{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\TTS_Reactjs\\\\malis-3-frontend\\\\src\\\\components\\\\Dialog\\\\Module\\\\Manufacturer\\\\CreateEdit.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useMemo, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useTranslation } from 'next-i18next';\nimport { Grid } from '@material-ui/core';\nimport { Unless } from 'react-if';\nimport { FormControllerTextField, DialogMain, SectionTimezone, BtnHelp, FormControllerNumberField } from '@/components';\nimport * as yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport _ from 'lodash';\n\nvar DialogManufacturer = function DialogManufacturer(props) {\n  _s();\n\n  var open = props.open,\n      loading = props.loading,\n      detail = props.detail,\n      permissions = props.permissions,\n      wikiPage = props.wikiPage,\n      onClose = props.onClose,\n      onSubmit = props.onSubmit,\n      onGetNextCode = props.onGetNextCode;\n\n  var _useTranslation = useTranslation('manufacturer'),\n      t = _useTranslation.t;\n\n  var validationSchema = useMemo(function () {\n    return yup.object().shape({\n      manufacturer_id: yup.number().nullable().required(t('form.message_validation.manufacturer_id_required')).min(0, t('form.message_validation.manufacturer_id_range')).max(100000, t('form.message_validation.manufacturer_id_range')),\n      name: yup.string().required(t('form.message_validation.name_required')).max(50, t('form.message_validation.name_max'))\n    });\n  }, [t]);\n  var manufacturerForm = useForm({\n    shouldUnregister: false,\n    resolver: yupResolver(validationSchema)\n  });\n\n  var isCreating = _.isNil(detail === null || detail === void 0 ? void 0 : detail.id);\n\n  useEffect(function () {\n    manufacturerForm.reset(detail);\n  }, [detail]);\n  var onSubmitForm = manufacturerForm.handleSubmit(function (data) {\n    var formData = _.pick(data, ['manufacturer_id', 'name']);\n\n    onSubmit(data.id, formData);\n  });\n\n  var handleGetNextCode = function handleGetNextCode() {\n    var formData = manufacturerForm.getValues();\n    onGetNextCode(formData);\n  };\n\n  return /*#__PURE__*/_jsxDEV(DialogMain, {\n    title: /*#__PURE__*/_jsxDEV(BtnHelp, {\n      title: isCreating ? t('form.title.create') : t('form.title.update'),\n      href: wikiPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 14\n    }, _this),\n    okText: isCreating ? t('common:button.create') : t('common:button.update'),\n    loading: loading,\n    open: open,\n    onOk: onSubmitForm,\n    onClose: onClose,\n    okButtonProps: {\n      disabled: loading || !(permissions === null || permissions === void 0 ? void 0 : permissions.edit) && !isCreating\n    },\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 2,\n      style: {\n        marginTop: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(FormControllerNumberField, {\n          control: manufacturerForm.control,\n          name: \"manufacturer_id\",\n          required: true,\n          label: \"Manufacturer #\",\n          thousandSeparator: \"\",\n          decimalScale: 0,\n          fixedDecimalScale: false,\n          generateCode: true,\n          disabled: !isCreating,\n          onGenerateCode: handleGetNextCode,\n          loading: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(FormControllerTextField, {\n          control: manufacturerForm.control,\n          name: \"name\",\n          required: true,\n          label: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Unless, {\n        condition: isCreating,\n        children: /*#__PURE__*/_jsxDEV(SectionTimezone, {\n          value: detail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(DialogManufacturer, \"7JRLGaM9mu4tUDu7p7KpMnyLstk=\", false, function () {\n  return [useTranslation, useForm];\n});\n\n_c = DialogManufacturer;\nexport default DialogManufacturer;\n\nvar _c;\n\n$RefreshReg$(_c, \"DialogManufacturer\");","map":{"version":3,"sources":["D:/TTS_Reactjs/malis-3-frontend/src/components/Dialog/Module/Manufacturer/CreateEdit.tsx"],"names":["useMemo","useEffect","useForm","useTranslation","Grid","Unless","FormControllerTextField","DialogMain","SectionTimezone","BtnHelp","FormControllerNumberField","yup","yupResolver","_","DialogManufacturer","props","open","loading","detail","permissions","wikiPage","onClose","onSubmit","onGetNextCode","t","validationSchema","object","shape","manufacturer_id","number","nullable","required","min","max","name","string","manufacturerForm","shouldUnregister","resolver","isCreating","isNil","id","reset","onSubmitForm","handleSubmit","data","formData","pick","handleGetNextCode","getValues","disabled","edit","marginTop","control"],"mappings":"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","sourcesContent":["import { useMemo, useEffect } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { useTranslation } from 'next-i18next'\n\nimport { Grid } from '@material-ui/core'\nimport { Unless } from 'react-if'\nimport { FormControllerTextField, DialogMain, SectionTimezone, BtnHelp, FormControllerNumberField } from '@/components'\n\nimport * as yup from 'yup'\nimport { yupResolver } from '@hookform/resolvers/yup'\nimport _ from 'lodash'\n\nimport type { ManufacturerItem, ManufacturerPermissions } from '@/types/Manufacturer'\n\nexport type DialogManufacturerProps = {\n  open: boolean\n  loading: boolean\n  detail: ManufacturerItem\n  permissions: ManufacturerPermissions\n  wikiPage: string\n  onClose: () => void\n  onSubmit: (id: number, formData: ManufacturerItem) => void\n  onGetNextCode: (formData: ManufacturerItem) => void\n}\n\nconst DialogManufacturer: React.FC<DialogManufacturerProps> = (props) => {\n  const { open, loading, detail, permissions, wikiPage, onClose, onSubmit, onGetNextCode } = props\n  const { t } = useTranslation('manufacturer')\n\n  const validationSchema = useMemo(() => {\n    return yup.object().shape({\n      manufacturer_id: yup\n        .number()\n        .nullable()\n        .required(t('form.message_validation.manufacturer_id_required'))\n        .min(0, t('form.message_validation.manufacturer_id_range'))\n        .max(100000, t('form.message_validation.manufacturer_id_range')),\n      name: yup\n        .string()\n        .required(t('form.message_validation.name_required'))\n        .max(50, t('form.message_validation.name_max'))\n    })\n  }, [t])\n\n  const manufacturerForm = useForm<ManufacturerItem>({\n    shouldUnregister: false,\n    resolver: yupResolver(validationSchema)\n  })\n\n  const isCreating = _.isNil(detail?.id)\n\n  useEffect(() => {\n    manufacturerForm.reset(detail)\n  }, [detail])\n\n  const onSubmitForm = manufacturerForm.handleSubmit((data) => {\n    const formData = _.pick(data, ['manufacturer_id', 'name'])\n    onSubmit(data.id, formData as any)\n  })\n\n  const handleGetNextCode = () => {\n    const formData = manufacturerForm.getValues()\n    onGetNextCode(formData)\n  }\n\n  return (\n    <DialogMain\n      title={<BtnHelp title={isCreating ? t('form.title.create') : t('form.title.update')} href={wikiPage} />}\n      okText={isCreating ? t('common:button.create') : t('common:button.update')}\n      loading={loading}\n      open={open}\n      onOk={onSubmitForm}\n      onClose={onClose}\n      okButtonProps={{\n        disabled: loading || (!permissions?.edit && !isCreating)\n      }}\n    >\n      <Grid container spacing={2} style={{ marginTop: 8 }}>\n        <Grid item xs={12}>\n          <FormControllerNumberField\n            control={manufacturerForm.control}\n            name=\"manufacturer_id\"\n            required\n            label=\"Manufacturer #\"\n            thousandSeparator=\"\"\n            decimalScale={0}\n            fixedDecimalScale={false}\n            generateCode\n            disabled={!isCreating}\n            onGenerateCode={handleGetNextCode}\n            loading={loading}\n          />\n        </Grid>\n\n        <Grid item xs={12}>\n          <FormControllerTextField control={manufacturerForm.control} name=\"name\" required label=\"Name\" />\n        </Grid>\n        <Unless condition={isCreating}>\n          <SectionTimezone value={detail} />\n        </Unless>\n      </Grid>\n    </DialogMain>\n  )\n}\n\nexport default DialogManufacturer\n"]},"metadata":{},"sourceType":"module"}