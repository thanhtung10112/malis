{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\TTS_Reactjs\\\\malis-3-frontend\\\\src\\\\pages\\\\tags.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useEffect, useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport useStyles from '@/styles/page/layout';\nimport { useTranslation } from 'next-i18next';\nimport useGetData from '@/hooks/useGetData';\nimport { Link } from '@material-ui/core';\nimport { AppLayout, EditIcon, CreateIcon, AppAutocompleteStyled, DeleteIcon, SaveIcon, MakeAListIcon, DialogTag, useConfirm, AppAutocompleteStyledAsync, DialogDrawingCreateEdit, DialogPart } from '@/components';\nimport _ from 'lodash';\nimport immer from 'immer';\nimport { tagStore, commonStore, drawingStore } from '@/store/reducers';\nimport { defaultProperties, iconColumn } from '@/utils/columnProperties';\nimport getMessageConfirm from '@/utils/getMessageConfirm';\nimport { defaultTagInitDataForCE, defaultTagDetail } from '@/utils/defaultValues';\n\nvar Specifications_Page = function Specifications_Page() {\n  _s();\n\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation('element'),\n      t = _useTranslation.t;\n\n  var _useConfirm = useConfirm(),\n      confirm = _useConfirm.confirm;\n\n  var _useGetData = useGetData('elements'),\n      getInitDataForCE = _useGetData.getInitDataForCE,\n      getGeneratedCode = _useGetData.getGeneratedCode,\n      getDetail = _useGetData.getDetail;\n\n  var _useState = useState(false),\n      openDialog = _useState[0],\n      setOpenDialog = _useState[1];\n\n  var _useState2 = useState(defaultTagInitDataForCE),\n      initDataForCE = _useState2[0],\n      setInitDataForCE = _useState2[1];\n\n  var _useState3 = useState(defaultTagDetail),\n      tagDetail = _useState3[0],\n      setTagDetail = _useState3[1];\n\n  var breadcrumbData = useMemo(function () {\n    return [{\n      label: 'Home',\n      href: '/'\n    }, {\n      label: 'Drawings',\n      href: '/Drawings'\n    }, {\n      label: 'Tags Management',\n      href: '/Tags'\n    }];\n  }, []);\n  var dispatch = useDispatch();\n  var permissions = useSelector(tagStore.selectPermissions);\n  var userJob = useSelector(commonStore.selectUserValueJob);\n\n  var _useSelector = useSelector(tagStore.selectInitDataForList),\n      wiki_page = _useSelector.wiki_page,\n      column_tooltips = _useSelector.column_tooltips,\n      jobOptions = _useSelector.jobs;\n\n  var selectedRows = useSelector(commonStore.selectSelectedRows);\n  var dataList = useSelector(tagStore.selectDataList);\n  var userDrawing = useSelector(commonStore.selectUserValueDrawing);\n  useEffect(function () {\n    return function () {\n      return dispatch(commonStore.actions.resetUserValue());\n    };\n  }, []);\n  useEffect(function () {\n    var schematicValue = userDrawing.value > 0 ? userDrawing : null;\n    setTagDetail(function (currentState) {\n      return immer(currentState, function (draft) {\n        draft.schematic_id = schematicValue;\n      });\n    });\n  }, [userDrawing]);\n  useEffect(function () {\n    setTagDetail(function (currentState) {\n      return immer(currentState, function (draft) {\n        draft.job_id = userJob.value;\n      });\n    });\n  }, [userJob]);\n\n  var resetDetail = function resetDetail() {\n    setTagDetail(function (currentState) {\n      return immer(defaultTagDetail, function (draft) {\n        draft.schematic_id = currentState.schematic_id;\n        draft.job_id = currentState.job_id;\n      });\n    });\n  };\n\n  var handleOpenCreateDialog = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var resInitDataForCE, generatedCode;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatch(commonStore.actions.setLoadingPage(true));\n              _context.prev = 1;\n              _context.next = 4;\n              return getInitDataForCE();\n\n            case 4:\n              resInitDataForCE = _context.sent;\n              setInitDataForCE(resInitDataForCE);\n\n              if (!(userDrawing.value > 0)) {\n                _context.next = 11;\n                break;\n              }\n\n              _context.next = 9;\n              return getGeneratedCode({\n                drawing_id: userDrawing.value\n              });\n\n            case 9:\n              generatedCode = _context.sent;\n              setTagDetail(function (currentState) {\n                return immer(currentState, function (draft) {\n                  draft.element_id = generatedCode;\n                });\n              });\n\n            case 11:\n              setOpenDialog(true);\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](1);\n              console.error('error', '>>>', _context.t0);\n\n            case 17:\n              dispatch(commonStore.actions.setLoadingPage(false));\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 14]]);\n    }));\n\n    return function handleOpenCreateDialog() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleOpenUpdateDialog = function handleOpenUpdateDialog(id) {\n    return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var resInitDataForCE, resDetail;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              dispatch(commonStore.actions.setLoadingPage(true));\n              _context2.prev = 1;\n              _context2.next = 4;\n              return getInitDataForCE();\n\n            case 4:\n              resInitDataForCE = _context2.sent;\n              _context2.next = 7;\n              return getDetail(id);\n\n            case 7:\n              resDetail = _context2.sent;\n              setInitDataForCE(resInitDataForCE);\n              setTagDetail(immer(resDetail, function (draft) {\n                draft.schematic_id = resDetail.related_schematic;\n                draft.part_id = resDetail.related_part;\n              }));\n              setOpenDialog(true);\n              _context2.next = 16;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.error('error', '>>>', _context2.t0);\n\n            case 16:\n              dispatch(commonStore.actions.setLoadingPage(false));\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 13]]);\n    }));\n  };\n\n  var handleChangeUserJob = function handleChangeUserJob(event, optionValue) {\n    dispatch(tagStore.sagaChangeUserJob(optionValue));\n  };\n\n  var handleChangeUserDrawing = function handleChangeUserDrawing(event, optionValue) {\n    dispatch(tagStore.sagaChangeUserDrawing(optionValue));\n  };\n\n  var handleDeleteTags = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var description, result, tags;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              description = getMessageConfirm(t, 'element', selectedRows, 'delete');\n              _context3.next = 3;\n              return confirm({\n                description: description\n              });\n\n            case 3:\n              result = _context3.sent;\n\n              if (result === 'OK') {\n                tags = _.map(selectedRows, function (partId) {\n                  var _$find = _.find(dataList, {\n                    id: partId\n                  }),\n                      schematic_id = _$find.schematic_id,\n                      id = _$find.id;\n\n                  return {\n                    entity_id: schematic_id,\n                    id: id\n                  };\n                });\n                dispatch(tagStore.sagaRemove(tags));\n              }\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleDeleteTags() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleOpenDrawingDialog = function handleOpenDrawingDialog(schematicId) {\n    return function () {\n      dispatch(drawingStore.sagaOpenUpdateDialog(schematicId));\n    };\n  };\n\n  var handleCloseDialog = function handleCloseDialog() {\n    setOpenDialog(false);\n    resetDetail();\n    dispatch(tagStore.sagaGetList());\n  };\n\n  var columns = useMemo(function () {\n    return [_objectSpread(_objectSpread(_objectSpread({}, defaultProperties), iconColumn), {}, {\n      description: column_tooltips.edit,\n      field: 'id',\n      headerName: 'Edit',\n      renderCell: function renderCell(params) {\n        return /*#__PURE__*/_jsxDEV(EditIcon, {\n          onClick: handleOpenUpdateDialog(params.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 18\n        }, _this);\n      }\n    }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n      description: column_tooltips.schematic_id,\n      field: 'schematic_id',\n      headerName: 'Schematic #',\n      flex: 0.15,\n      renderCell: function renderCell(params) {\n        var value = params.value,\n            row = params.row;\n        return /*#__PURE__*/_jsxDEV(Link, {\n          href: \"#\",\n          onClick: handleOpenDrawingDialog(row.schematic_pk_id),\n          children: value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this);\n      }\n    }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n      description: column_tooltips.element_id,\n      field: 'element_id',\n      headerName: 'Element #',\n      flex: 0.15\n    }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n      description: column_tooltips.tag,\n      field: 'tag',\n      headerName: 'Tag #',\n      flex: 0.15\n    }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n      description: column_tooltips.part_id,\n      field: 'part_id',\n      headerName: 'Part #',\n      flex: 0.2\n    }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n      description: column_tooltips.description,\n      headerName: 'Description',\n      flex: 0.6,\n      field: 'description'\n    }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n      description: column_tooltips.rfq_id,\n      field: 'rfq_id',\n      headerName: 'RFQ #',\n      width: 80\n    }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n      description: column_tooltips.rfo_id,\n      field: 'rfo_id',\n      headerName: 'RFO  #',\n      width: 80\n    }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n      description: column_tooltips.puco_id,\n      field: 'puco',\n      headerName: 'PuCo',\n      width: 80\n    }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n      description: column_tooltips.order_id,\n      field: 'order_id',\n      headerName: 'Order  #',\n      width: 120\n    }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n      description: column_tooltips.box_nr,\n      field: 'box_nr',\n      headerName: 'BoxNr',\n      width: 80\n    }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n      description: column_tooltips.cnt_nr,\n      field: 'cnt_nr',\n      headerName: 'CntNr',\n      width: 80\n    }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n      description: column_tooltips.package_id,\n      field: 'package_id',\n      headerName: 'Package #',\n      width: 80\n    })];\n  }, []);\n  var buttonsPage = [{\n    label: t('common:button.new'),\n    startIcon: /*#__PURE__*/_jsxDEV(CreateIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 18\n    }, _this),\n    onClick: handleOpenCreateDialog,\n    disabled: !(permissions === null || permissions === void 0 ? void 0 : permissions.create) || userJob.value < 0 || !(userJob === null || userJob === void 0 ? void 0 : userJob.value)\n  }, {\n    label: t('common:button.save'),\n    startIcon: /*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 18\n    }, _this),\n    disabled: !(permissions === null || permissions === void 0 ? void 0 : permissions.edit)\n  }, {\n    label: t('common:button.delete'),\n    startIcon: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 18\n    }, _this),\n    onClick: handleDeleteTags,\n    disabled: !(permissions === null || permissions === void 0 ? void 0 : permissions[\"delete\"]) || selectedRows.length === 0\n  }, {\n    label: t('common:button.make_a_list'),\n    startIcon: /*#__PURE__*/_jsxDEV(MakeAListIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 18\n    }, _this)\n  }];\n\n  var Dialogs = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(DialogTag, {\n      open: openDialog,\n      initData: initDataForCE,\n      detail: tagDetail,\n      onClose: handleCloseDialog\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(DialogDrawingCreateEdit, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(DialogPart, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n\n  var Options = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AppAutocompleteStyled, {\n      className: classes.controlAutocomplete,\n      width: 200,\n      label: \"Jobs\",\n      options: jobOptions,\n      value: userJob,\n      renderOption: function renderOption(option) {\n        return option.description;\n      },\n      primaryKeyOption: \"value\",\n      onChange: handleChangeUserJob\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(AppAutocompleteStyledAsync, {\n      disabled: !(userJob === null || userJob === void 0 ? void 0 : userJob.value),\n      width: 250,\n      label: \"Schematics\",\n      className: classes.controlAutocomplete,\n      compName: \"drawing_list\",\n      additionalData: {\n        limit_to_job: userJob.value,\n        include_all_drawings_option: true\n      },\n      onChange: handleChangeUserDrawing,\n      value: userDrawing,\n      defaultOptions: [commonStore.initialState.userValue.drawing]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n\n  return /*#__PURE__*/_jsxDEV(AppLayout, {\n    entity: \"element\",\n    breadcrumbs: breadcrumbData,\n    wikiPage: wiki_page,\n    searchProps: {\n      width: 320\n    },\n    buttons: buttonsPage,\n    permissions: permissions,\n    tableProps: {\n      columns: columns\n    },\n    Dialogs: Dialogs,\n    Options: Options\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 332,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Specifications_Page, \"ui1FIrnTRYYaJ3bvFIt8lmN22Zg=\", false, function () {\n  return [useStyles, useTranslation, useConfirm, useGetData, useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Specifications_Page;\nexport var __N_SSP = true;\nexport default Specifications_Page;\n\nvar _c;\n\n$RefreshReg$(_c, \"Specifications_Page\");","map":{"version":3,"sources":["D:/TTS_Reactjs/malis-3-frontend/src/pages/tags.tsx"],"names":["useEffect","useMemo","useState","useDispatch","useSelector","useStyles","useTranslation","useGetData","Link","AppLayout","EditIcon","CreateIcon","AppAutocompleteStyled","DeleteIcon","SaveIcon","MakeAListIcon","DialogTag","useConfirm","AppAutocompleteStyledAsync","DialogDrawingCreateEdit","DialogPart","_","immer","tagStore","commonStore","drawingStore","defaultProperties","iconColumn","getMessageConfirm","defaultTagInitDataForCE","defaultTagDetail","Specifications_Page","classes","t","confirm","getInitDataForCE","getGeneratedCode","getDetail","openDialog","setOpenDialog","initDataForCE","setInitDataForCE","tagDetail","setTagDetail","breadcrumbData","label","href","dispatch","permissions","selectPermissions","userJob","selectUserValueJob","selectInitDataForList","wiki_page","column_tooltips","jobOptions","jobs","selectedRows","selectSelectedRows","dataList","selectDataList","userDrawing","selectUserValueDrawing","actions","resetUserValue","schematicValue","value","currentState","draft","schematic_id","job_id","resetDetail","handleOpenCreateDialog","setLoadingPage","resInitDataForCE","drawing_id","generatedCode","element_id","console","error","handleOpenUpdateDialog","id","resDetail","related_schematic","part_id","related_part","handleChangeUserJob","event","optionValue","sagaChangeUserJob","handleChangeUserDrawing","sagaChangeUserDrawing","handleDeleteTags","description","result","tags","map","partId","find","entity_id","sagaRemove","handleOpenDrawingDialog","schematicId","sagaOpenUpdateDialog","handleCloseDialog","sagaGetList","columns","edit","field","headerName","renderCell","params","flex","row","schematic_pk_id","tag","rfq_id","width","rfo_id","puco_id","order_id","box_nr","cnt_nr","package_id","buttonsPage","startIcon","onClick","disabled","create","length","Dialogs","Options","controlAutocomplete","option","limit_to_job","include_all_drawings_option","initialState","userValue","drawing"],"mappings":"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","sourcesContent":["import { useEffect, useMemo, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport useStyles from '@/styles/page/layout'\nimport useAuthMiddleware from '@/hooks/useAuthMiddleware'\nimport { useTranslation } from 'next-i18next'\nimport useGetData from '@/hooks/useGetData'\n\nimport { Link } from '@material-ui/core'\n\nimport {\n  AppLayout,\n  EditIcon,\n  CreateIcon,\n  AppAutocompleteStyled,\n  DeleteIcon,\n  SaveIcon,\n  MakeAListIcon,\n  DialogTag,\n  useConfirm,\n  AppAutocompleteStyledAsync,\n  DialogDrawingCreateEdit,\n  DialogPart\n} from '@/components'\n\nimport _ from 'lodash'\nimport immer from 'immer'\nimport { tagStore, commonStore, drawingStore } from '@/store/reducers'\nimport { defaultProperties, iconColumn } from '@/utils/columnProperties'\nimport getMessageConfirm from '@/utils/getMessageConfirm'\nimport { defaultTagInitDataForCE, defaultTagDetail } from '@/utils/defaultValues'\n\nimport type { GridColumns } from '@material-ui/data-grid'\nimport type { ParameterOption, PayloadOperation, DataForDropdown } from '@/types/Common'\n\nconst Specifications_Page = () => {\n  const classes = useStyles()\n  const { t } = useTranslation('element')\n  const { confirm } = useConfirm()\n  const { getInitDataForCE, getGeneratedCode, getDetail } = useGetData('elements')\n\n  const [openDialog, setOpenDialog] = useState(false)\n  const [initDataForCE, setInitDataForCE] = useState(defaultTagInitDataForCE)\n  const [tagDetail, setTagDetail] = useState(defaultTagDetail)\n\n  const breadcrumbData = useMemo(\n    () => [\n      { label: 'Home', href: '/' },\n      { label: 'Drawings', href: '/Drawings' },\n      { label: 'Tags Management', href: '/Tags' }\n    ],\n    []\n  )\n\n  const dispatch = useDispatch()\n  const permissions = useSelector(tagStore.selectPermissions)\n  const userJob = useSelector(commonStore.selectUserValueJob)\n  const { wiki_page, column_tooltips, jobs: jobOptions } = useSelector(tagStore.selectInitDataForList)\n  const selectedRows = useSelector(commonStore.selectSelectedRows)\n  const dataList = useSelector(tagStore.selectDataList)\n  const userDrawing = useSelector(commonStore.selectUserValueDrawing)\n\n  useEffect(() => {\n    return () => dispatch(commonStore.actions.resetUserValue())\n  }, [])\n\n  useEffect(() => {\n    const schematicValue = userDrawing.value > 0 ? userDrawing : null\n    setTagDetail((currentState) =>\n      immer(currentState, (draft) => {\n        draft.schematic_id = schematicValue\n      })\n    )\n  }, [userDrawing])\n\n  useEffect(() => {\n    setTagDetail((currentState) =>\n      immer(currentState, (draft) => {\n        draft.job_id = userJob.value\n      })\n    )\n  }, [userJob])\n\n  const resetDetail = () => {\n    setTagDetail((currentState) =>\n      immer(defaultTagDetail, (draft) => {\n        draft.schematic_id = currentState.schematic_id\n        draft.job_id = currentState.job_id\n      })\n    )\n  }\n\n  const handleOpenCreateDialog = async () => {\n    dispatch(commonStore.actions.setLoadingPage(true))\n    try {\n      const resInitDataForCE = await getInitDataForCE()\n      setInitDataForCE(resInitDataForCE)\n      if (userDrawing.value > 0) {\n        const generatedCode = await getGeneratedCode({ drawing_id: userDrawing.value })\n        setTagDetail((currentState) =>\n          immer(currentState, (draft) => {\n            draft.element_id = generatedCode\n          })\n        )\n      }\n      setOpenDialog(true)\n    } catch (error) {\n      console.error('error', '>>>', error)\n    }\n    dispatch(commonStore.actions.setLoadingPage(false))\n  }\n\n  const handleOpenUpdateDialog = (id: number) => async () => {\n    dispatch(commonStore.actions.setLoadingPage(true))\n    try {\n      const resInitDataForCE = await getInitDataForCE()\n      const resDetail = await getDetail(id)\n      setInitDataForCE(resInitDataForCE)\n      setTagDetail(\n        immer(resDetail, (draft) => {\n          draft.schematic_id = resDetail.related_schematic\n          draft.part_id = resDetail.related_part\n        }) as any\n      )\n      setOpenDialog(true)\n    } catch (error) {\n      console.error('error', '>>>', error)\n    }\n    dispatch(commonStore.actions.setLoadingPage(false))\n  }\n\n  const handleChangeUserJob = (event, optionValue: ParameterOption) => {\n    dispatch(tagStore.sagaChangeUserJob(optionValue))\n  }\n\n  const handleChangeUserDrawing = (event, optionValue: DataForDropdown) => {\n    dispatch(tagStore.sagaChangeUserDrawing(optionValue))\n  }\n\n  const handleDeleteTags = async () => {\n    const description = getMessageConfirm(t, 'element', selectedRows, 'delete')\n    const result = await confirm({ description })\n    if (result === 'OK') {\n      const tags: PayloadOperation[] = _.map(selectedRows, (partId) => {\n        const { schematic_id, id } = _.find(dataList, { id: partId })\n        return { entity_id: schematic_id, id }\n      })\n      dispatch(tagStore.sagaRemove(tags))\n    }\n  }\n\n  const handleOpenDrawingDialog = (schematicId: number) => () => {\n    dispatch(drawingStore.sagaOpenUpdateDialog(schematicId))\n  }\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false)\n    resetDetail()\n    dispatch(tagStore.sagaGetList())\n  }\n\n  const columns = useMemo<GridColumns>(\n    () => [\n      {\n        ...defaultProperties,\n        ...iconColumn,\n        description: column_tooltips.edit,\n        field: 'id',\n        headerName: 'Edit',\n        renderCell: (params) => {\n          return <EditIcon onClick={handleOpenUpdateDialog(params.value as number)} />\n        }\n      },\n      {\n        ...defaultProperties,\n        description: column_tooltips.schematic_id,\n        field: 'schematic_id',\n        headerName: 'Schematic #',\n        flex: 0.15,\n        renderCell(params) {\n          const { value, row } = params\n          return (\n            <Link href=\"#\" onClick={handleOpenDrawingDialog(row.schematic_pk_id)}>\n              {value}\n            </Link>\n          )\n        }\n      },\n      {\n        ...defaultProperties,\n        description: column_tooltips.element_id,\n        field: 'element_id',\n        headerName: 'Element #',\n        flex: 0.15\n      },\n      {\n        ...defaultProperties,\n        description: column_tooltips.tag,\n        field: 'tag',\n        headerName: 'Tag #',\n        flex: 0.15\n      },\n      {\n        ...defaultProperties,\n        description: column_tooltips.part_id,\n        field: 'part_id',\n        headerName: 'Part #',\n        flex: 0.2\n      },\n      {\n        ...defaultProperties,\n        description: column_tooltips.description,\n        headerName: 'Description',\n        flex: 0.6,\n        field: 'description'\n      },\n      {\n        ...defaultProperties,\n        description: column_tooltips.rfq_id,\n        field: 'rfq_id',\n        headerName: 'RFQ #',\n        width: 80\n      },\n      {\n        ...defaultProperties,\n        description: column_tooltips.rfo_id,\n        field: 'rfo_id',\n        headerName: 'RFO  #',\n        width: 80\n      },\n      {\n        ...defaultProperties,\n        description: column_tooltips.puco_id,\n        field: 'puco',\n        headerName: 'PuCo',\n        width: 80\n      },\n      {\n        ...defaultProperties,\n        description: column_tooltips.order_id,\n        field: 'order_id',\n        headerName: 'Order  #',\n        width: 120\n      },\n      {\n        ...defaultProperties,\n        description: column_tooltips.box_nr,\n        field: 'box_nr',\n        headerName: 'BoxNr',\n        width: 80\n      },\n      {\n        ...defaultProperties,\n        description: column_tooltips.cnt_nr,\n        field: 'cnt_nr',\n        headerName: 'CntNr',\n        width: 80\n      },\n      {\n        ...defaultProperties,\n        description: column_tooltips.package_id,\n        field: 'package_id',\n        headerName: 'Package #',\n        width: 80\n      }\n    ],\n    []\n  )\n\n  const buttonsPage = [\n    {\n      label: t('common:button.new'),\n      startIcon: <CreateIcon />,\n      onClick: handleOpenCreateDialog,\n      disabled: !permissions?.create || userJob.value < 0 || !userJob?.value\n    },\n    {\n      label: t('common:button.save'),\n      startIcon: <SaveIcon />,\n      disabled: !permissions?.edit\n    },\n    {\n      label: t('common:button.delete'),\n      startIcon: <DeleteIcon />,\n      onClick: handleDeleteTags,\n      disabled: !permissions?.delete || selectedRows.length === 0\n    },\n    {\n      label: t('common:button.make_a_list'),\n      startIcon: <MakeAListIcon />\n    }\n  ]\n\n  const Dialogs = (\n    <>\n      <DialogTag open={openDialog} initData={initDataForCE} detail={tagDetail} onClose={handleCloseDialog} />\n      <DialogDrawingCreateEdit />\n      <DialogPart />\n    </>\n  )\n\n  const Options = (\n    <>\n      <AppAutocompleteStyled\n        className={classes.controlAutocomplete}\n        width={200}\n        label=\"Jobs\"\n        options={jobOptions}\n        value={userJob}\n        renderOption={(option) => option.description}\n        primaryKeyOption=\"value\"\n        onChange={handleChangeUserJob}\n      />\n\n      <AppAutocompleteStyledAsync\n        disabled={!userJob?.value}\n        width={250}\n        label=\"Schematics\"\n        className={classes.controlAutocomplete}\n        compName=\"drawing_list\"\n        additionalData={{\n          limit_to_job: userJob.value,\n          include_all_drawings_option: true\n        }}\n        onChange={handleChangeUserDrawing}\n        value={userDrawing}\n        defaultOptions={[commonStore.initialState.userValue.drawing]}\n      />\n    </>\n  )\n\n  return (\n    <AppLayout\n      entity=\"element\"\n      breadcrumbs={breadcrumbData}\n      wikiPage={wiki_page}\n      searchProps={{\n        width: 320\n      }}\n      buttons={buttonsPage}\n      permissions={permissions}\n      tableProps={{\n        columns\n      }}\n      Dialogs={Dialogs}\n      Options={Options}\n    />\n  )\n}\n\nexport const getServerSideProps = useAuthMiddleware([\n  'common',\n  'element',\n  'make_a_list',\n  'advanced_filter',\n  'drawing',\n  'item',\n  'assembly'\n])\n\nexport default Specifications_Page\n"]},"metadata":{},"sourceType":"module"}