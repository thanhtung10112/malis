{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nimport _ from 'lodash';\nimport { parseCookies } from 'nookies';\nimport { singular } from 'pluralize';\n\nvar HttpService = /*#__PURE__*/function () {\n  function HttpService(entity) {\n    var _this = this;\n\n    _classCallCheck(this, HttpService);\n\n    _defineProperty(this, \"_instance\", void 0);\n\n    _defineProperty(this, \"_entity\", void 0);\n\n    _defineProperty(this, \"saveToken\", function () {\n      var cookies = parseCookies();\n\n      if (_.size(cookies.token) !== 0) {\n        _this._instance.defaults.headers.common['Authorization'] = \"Bearer \".concat(cookies.token);\n      }\n    });\n\n    _defineProperty(this, \"get\", function (endpoint, params) {\n      _this.saveToken();\n\n      return _this._instance.get(endpoint, {\n        params: params\n      });\n    });\n\n    _defineProperty(this, \"post\", function (endpoint, data) {\n      _this.saveToken();\n\n      return _this._instance.post(endpoint, data);\n    });\n\n    _defineProperty(this, \"put\", function (endpoint, data) {\n      _this.saveToken();\n\n      return _this._instance.put(endpoint, data);\n    });\n\n    _defineProperty(this, \"delete\", function (endpoint, data) {\n      _this.saveToken();\n\n      return _this._instance[\"delete\"](endpoint, {\n        data: data\n      });\n    });\n\n    _defineProperty(this, \"getInitDataForList\", function () {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var singularEntity = singular(_this._entity);\n      return _this.get('init_data', _objectSpread({\n        comp_name: \"list_\".concat(singularEntity)\n      }, params));\n    });\n\n    _defineProperty(this, \"getInitDataForCE\", function () {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var singularEntity = singular(_this._entity);\n      return _this.get('init_data', _objectSpread({\n        comp_name: \"create_edit_\".concat(singularEntity)\n      }, params));\n    });\n\n    _defineProperty(this, \"getList\", function () {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return _this.get(_this._entity, params);\n    });\n\n    _defineProperty(this, \"getDetail\", function (id) {\n      return _this.get(\"\".concat(_this._entity, \"/\").concat(id));\n    });\n\n    _defineProperty(this, \"create\", function (data) {\n      return _this.post(_this._entity, data);\n    });\n\n    _defineProperty(this, \"update\", function (id, data) {\n      return _this.put(\"\".concat(_this._entity, \"/\").concat(id), data);\n    });\n\n    _defineProperty(this, \"updateMultiple\", function (data) {\n      return _this.put(_this._entity, _defineProperty({}, _this._entity, data));\n    });\n\n    _defineProperty(this, \"executeOperation\", function (operation, data) {\n      if (operation === 'delete') {\n        return _this[\"delete\"](_this._entity, _defineProperty({}, _this._entity, data));\n      }\n\n      return _this.put(\"\".concat(_this._entity, \"/\").concat(operation), _defineProperty({}, _this._entity, data));\n    });\n\n    _defineProperty(this, \"getGeneratedCode\", function (query) {\n      return _this.get(\"\".concat(_this._entity, \"/generate_code\"), query);\n    });\n\n    this._instance = axios.create({\n      baseURL: process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:5000/'\n    });\n\n    this._instance.interceptors.response.use(this.handleSuccessRes, this.handleErrorRes);\n\n    this._entity = entity;\n  }\n\n  _createClass(HttpService, [{\n    key: \"handleSuccessRes\",\n    value: function handleSuccessRes(res) {\n      return res.data;\n    }\n  }, {\n    key: \"handleErrorRes\",\n    value: function handleErrorRes(error) {\n      return Promise.reject(error);\n    }\n  }]);\n\n  return HttpService;\n}();\n\nexport default HttpService;","map":{"version":3,"sources":["D:/TTS_Reactjs/malis-3-frontend/src/helper/HttpService.ts"],"names":["axios","_","parseCookies","singular","HttpService","entity","cookies","size","token","_instance","defaults","headers","common","endpoint","params","saveToken","get","data","post","put","singularEntity","_entity","comp_name","id","operation","query","create","baseURL","process","env","NEXT_PUBLIC_BACKEND_URL","interceptors","response","use","handleSuccessRes","handleErrorRes","res","error","Promise","reject"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAqC,OAArC;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,YAAT,QAA6B,SAA7B;AACA,SAASC,QAAT,QAAyB,WAAzB;;IAEMC,W;AAIJ,uBAAYC,MAAZ,EAA4B;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,uCAgBR,YAAM;AACxB,UAAMC,OAAO,GAAGJ,YAAY,EAA5B;;AACA,UAAID,CAAC,CAACM,IAAF,CAAOD,OAAO,CAACE,KAAf,MAA0B,CAA9B,EAAiC;AAC/B,QAAA,KAAI,CAACC,SAAL,CAAeC,QAAf,CAAwBC,OAAxB,CAAgCC,MAAhC,CAAuC,eAAvC,qBAAoEN,OAAO,CAACE,KAA5E;AACD;AACF,KArB2B;;AAAA,iCAuBtB,UAACK,QAAD,EAAmBC,MAAnB,EAAoC;AACxC,MAAA,KAAI,CAACC,SAAL;;AACA,aAAO,KAAI,CAACN,SAAL,CAAeO,GAAf,CAAmBH,QAAnB,EAA6B;AAAEC,QAAAA,MAAM,EAANA;AAAF,OAA7B,CAAP;AACD,KA1B2B;;AAAA,kCA4BrB,UAACD,QAAD,EAAmBI,IAAnB,EAA4B;AACjC,MAAA,KAAI,CAACF,SAAL;;AACA,aAAO,KAAI,CAACN,SAAL,CAAeS,IAAf,CAAoBL,QAApB,EAA8BI,IAA9B,CAAP;AACD,KA/B2B;;AAAA,iCAiCtB,UAACJ,QAAD,EAAmBI,IAAnB,EAA4B;AAChC,MAAA,KAAI,CAACF,SAAL;;AACA,aAAO,KAAI,CAACN,SAAL,CAAeU,GAAf,CAAmBN,QAAnB,EAA6BI,IAA7B,CAAP;AACD,KApC2B;;AAAA,oCAsCnB,UAACJ,QAAD,EAAmBI,IAAnB,EAA4B;AACnC,MAAA,KAAI,CAACF,SAAL;;AACA,aAAO,KAAI,CAACN,SAAL,WAAsBI,QAAtB,EAAgC;AAAEI,QAAAA,IAAI,EAAJA;AAAF,OAAhC,CAAP;AACD,KAzC2B;;AAAA,gDA2CP,YAAiB;AAAA,UAAhBH,MAAgB,uEAAP,EAAO;AACpC,UAAMM,cAAc,GAAGjB,QAAQ,CAAC,KAAI,CAACkB,OAAN,CAA/B;AACA,aAAO,KAAI,CAACL,GAAL,CAAS,WAAT;AACLM,QAAAA,SAAS,iBAAUF,cAAV;AADJ,SAEFN,MAFE,EAAP;AAID,KAjD2B;;AAAA,8CAmDT,YAAiB;AAAA,UAAhBA,MAAgB,uEAAP,EAAO;AAClC,UAAMM,cAAc,GAAGjB,QAAQ,CAAC,KAAI,CAACkB,OAAN,CAA/B;AACA,aAAO,KAAI,CAACL,GAAL,CAAS,WAAT;AACLM,QAAAA,SAAS,wBAAiBF,cAAjB;AADJ,SAEFN,MAFE,EAAP;AAID,KAzD2B;;AAAA,qCA2DlB,YAAiB;AAAA,UAAhBA,MAAgB,uEAAP,EAAO;AACzB,aAAO,KAAI,CAACE,GAAL,CAAS,KAAI,CAACK,OAAd,EAAuBP,MAAvB,CAAP;AACD,KA7D2B;;AAAA,uCA+DhB,UAACS,EAAD,EAAgB;AAC1B,aAAO,KAAI,CAACP,GAAL,WAAY,KAAI,CAACK,OAAjB,cAA4BE,EAA5B,EAAP;AACD,KAjE2B;;AAAA,oCAmEnB,UAACN,IAAD,EAAU;AACjB,aAAO,KAAI,CAACC,IAAL,CAAU,KAAI,CAACG,OAAf,EAAwBJ,IAAxB,CAAP;AACD,KArE2B;;AAAA,oCAuEnB,UAACM,EAAD,EAAaN,IAAb,EAAsB;AAC7B,aAAO,KAAI,CAACE,GAAL,WAAY,KAAI,CAACE,OAAjB,cAA4BE,EAA5B,GAAkCN,IAAlC,CAAP;AACD,KAzE2B;;AAAA,4CA2EX,UAACA,IAAD,EAAU;AACzB,aAAO,KAAI,CAACE,GAAL,CAAS,KAAI,CAACE,OAAd,sBAA0B,KAAI,CAACA,OAA/B,EAAyCJ,IAAzC,EAAP;AACD,KA7E2B;;AAAA,8CA+ET,UAACO,SAAD,EAAYP,IAAZ,EAAqB;AACtC,UAAIO,SAAS,KAAK,QAAlB,EAA4B;AAC1B,eAAO,KAAI,UAAJ,CAAY,KAAI,CAACH,OAAjB,sBAA6B,KAAI,CAACA,OAAlC,EAA4CJ,IAA5C,EAAP;AACD;;AACD,aAAO,KAAI,CAACE,GAAL,WAAY,KAAI,CAACE,OAAjB,cAA4BG,SAA5B,uBAA4C,KAAI,CAACH,OAAjD,EAA2DJ,IAA3D,EAAP;AACD,KApF2B;;AAAA,8CAsFT,UAACQ,KAAD;AAAA,aAAgC,KAAI,CAACT,GAAL,WAAY,KAAI,CAACK,OAAjB,qBAA0CI,KAA1C,CAAhC;AAAA,KAtFS;;AAC1B,SAAKhB,SAAL,GAAiBT,KAAK,CAAC0B,MAAN,CAAa;AAC5BC,MAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,uBAAZ,IAAuC;AADpB,KAAb,CAAjB;;AAGA,SAAKrB,SAAL,CAAesB,YAAf,CAA4BC,QAA5B,CAAqCC,GAArC,CAAyC,KAAKC,gBAA9C,EAAgE,KAAKC,cAArE;;AACA,SAAKd,OAAL,GAAehB,MAAf;AACD;;;;qCAEwB+B,G,EAAK;AAC5B,aAAOA,GAAG,CAACnB,IAAX;AACD;;;mCAEsBoB,K,EAAO;AAC5B,aAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD;;;;;;AA2EH,eAAejC,WAAf","sourcesContent":["import axios, { AxiosInstance } from 'axios'\nimport _ from 'lodash'\nimport { parseCookies } from 'nookies'\nimport { singular } from 'pluralize'\n\nclass HttpService {\n  private _instance: AxiosInstance\n  protected _entity: string\n\n  constructor(entity: string) {\n    this._instance = axios.create({\n      baseURL: process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:5000/'\n    })\n    this._instance.interceptors.response.use(this.handleSuccessRes, this.handleErrorRes)\n    this._entity = entity\n  }\n\n  private handleSuccessRes(res) {\n    return res.data\n  }\n\n  private handleErrorRes(error) {\n    return Promise.reject(error)\n  }\n\n  private saveToken = () => {\n    const cookies = parseCookies()\n    if (_.size(cookies.token) !== 0) {\n      this._instance.defaults.headers.common['Authorization'] = `Bearer ${cookies.token}`\n    }\n  }\n\n  get = (endpoint: string, params?: any) => {\n    this.saveToken()\n    return this._instance.get(endpoint, { params }) as any\n  }\n\n  post = (endpoint: string, data) => {\n    this.saveToken()\n    return this._instance.post(endpoint, data) as any\n  }\n\n  put = (endpoint: string, data) => {\n    this.saveToken()\n    return this._instance.put(endpoint, data) as any\n  }\n\n  delete = (endpoint: string, data) => {\n    this.saveToken()\n    return this._instance.delete(endpoint, { data }) as any\n  }\n\n  getInitDataForList = (params = {}) => {\n    const singularEntity = singular(this._entity)\n    return this.get('init_data', {\n      comp_name: `list_${singularEntity}`,\n      ...params\n    }) as any\n  }\n\n  getInitDataForCE = (params = {}) => {\n    const singularEntity = singular(this._entity)\n    return this.get('init_data', {\n      comp_name: `create_edit_${singularEntity}`,\n      ...params\n    }) as any\n  }\n\n  getList = (params = {}) => {\n    return this.get(this._entity, params) as any\n  }\n\n  getDetail = (id: number) => {\n    return this.get(`${this._entity}/${id}`) as any\n  }\n\n  create = (data) => {\n    return this.post(this._entity, data) as any\n  }\n\n  update = (id: number, data) => {\n    return this.put(`${this._entity}/${id}`, data) as any\n  }\n\n  updateMultiple = (data) => {\n    return this.put(this._entity, { [this._entity]: data }) as any\n  }\n\n  executeOperation = (operation, data) => {\n    if (operation === 'delete') {\n      return this.delete(this._entity, { [this._entity]: data }) as any\n    }\n    return this.put(`${this._entity}/${operation}`, { [this._entity]: data }) as any\n  }\n\n  getGeneratedCode = (query: Record<string, any>) => this.get(`${this._entity}/generate_code`, query)\n}\n\nexport default HttpService\n"]},"metadata":{},"sourceType":"module"}