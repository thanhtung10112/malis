{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(getEntity),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(fetchDefaultFilter),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(fetchFilterList),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(fetchInitDataForCreateEdit),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(fetchFilterDetail),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(open),\n    _marked7 = /*#__PURE__*/_regeneratorRuntime.mark(changeFilterType),\n    _marked8 = /*#__PURE__*/_regeneratorRuntime.mark(getList),\n    _marked9 = /*#__PURE__*/_regeneratorRuntime.mark(getDefaultFilter),\n    _marked10 = /*#__PURE__*/_regeneratorRuntime.mark(create),\n    _marked11 = /*#__PURE__*/_regeneratorRuntime.mark(update),\n    _marked12 = /*#__PURE__*/_regeneratorRuntime.mark(share),\n    _marked13 = /*#__PURE__*/_regeneratorRuntime.mark(getDetail),\n    _marked14 = /*#__PURE__*/_regeneratorRuntime.mark(remove),\n    _marked15 = /*#__PURE__*/_regeneratorRuntime.mark(clearDefaultFilter),\n    _marked16 = /*#__PURE__*/_regeneratorRuntime.mark(saveAs),\n    _marked17 = /*#__PURE__*/_regeneratorRuntime.mark(apply),\n    _marked18 = /*#__PURE__*/_regeneratorRuntime.mark(close),\n    _marked19 = /*#__PURE__*/_regeneratorRuntime.mark(advancedFilterSaga);\n\nimport { put, takeEvery, takeLatest } from 'redux-saga/effects';\nimport { select, all, call } from 'typed-redux-saga';\nimport { createAction } from '@reduxjs/toolkit';\nimport { authStore, advancedFilterActions, commonStore } from '@/store/reducers';\nimport afApi from '@/apis/advancedFilter.api';\nimport { StatusCode } from '@/utils/StatusCode';\nimport { actionTypes } from '@/utils/constant';\n\nfunction getEntity() {\n  var entity;\n  return _regeneratorRuntime.wrap(function getEntity$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          return _context.delegateYield(select(commonStore.selectEntity), \"t0\", 1);\n\n        case 1:\n          entity = _context.t0;\n          return _context.abrupt(\"return\", entity);\n\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n\nfunction fetchDefaultFilter() {\n  var entity, data;\n  return _regeneratorRuntime.wrap(function fetchDefaultFilter$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return getEntity();\n\n        case 2:\n          entity = _context2.sent;\n          _context2.next = 5;\n          return call(afApi.getInitDataForList, entity);\n\n        case 5:\n          data = _context2.sent;\n          _context2.next = 8;\n          return put(advancedFilterActions.setDefaultFilter(data.default_filter));\n\n        case 8:\n          _context2.next = 10;\n          return put(advancedFilterActions.setPermissions(data.permissions.advanced_filters));\n\n        case 10:\n          _context2.next = 12;\n          return put(advancedFilterActions.setSystemPreset(data.system_default_filter));\n\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n\nfunction fetchFilterList() {\n  var filterType,\n      type,\n      entity,\n      _yield$call,\n      filter_preset_list,\n      _args3 = arguments;\n\n  return _regeneratorRuntime.wrap(function fetchFilterList$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          filterType = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : '';\n          type = filterType;\n\n          if (type) {\n            _context3.next = 5;\n            break;\n          }\n\n          return _context3.delegateYield(select(advancedFilterActions.selectFilterType), \"t0\", 4);\n\n        case 4:\n          type = _context3.t0;\n\n        case 5:\n          _context3.next = 7;\n          return getEntity();\n\n        case 7:\n          entity = _context3.sent;\n          _context3.next = 10;\n          return call(afApi.getList, {\n            entity: entity,\n            type: type\n          });\n\n        case 10:\n          _yield$call = _context3.sent;\n          filter_preset_list = _yield$call.filter_preset_list;\n          _context3.next = 14;\n          return put(advancedFilterActions.setFilterPresetList(filter_preset_list));\n\n        case 14:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n\nfunction fetchInitDataForCreateEdit() {\n  var entity, data;\n  return _regeneratorRuntime.wrap(function fetchInitDataForCreateEdit$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return getEntity();\n\n        case 2:\n          entity = _context4.sent;\n          _context4.next = 5;\n          return call(afApi.getInitDataForCE, entity);\n\n        case 5:\n          data = _context4.sent;\n          _context4.next = 8;\n          return put(advancedFilterActions.setInitData(data));\n\n        case 8:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\n\nfunction fetchFilterDetail(id) {\n  var _yield$call2, filter_preset, filterType;\n\n  return _regeneratorRuntime.wrap(function fetchFilterDetail$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return call(afApi.getDetail, id);\n\n        case 2:\n          _yield$call2 = _context5.sent;\n          filter_preset = _yield$call2.filter_preset;\n          return _context5.delegateYield(select(advancedFilterActions.selectFilterType), \"t0\", 5);\n\n        case 5:\n          filterType = _context5.t0;\n\n          if (filterType === 'shared') {\n            filter_preset.is_user_default = false;\n          }\n\n          _context5.next = 9;\n          return put(advancedFilterActions.setFilterDetail(filter_preset));\n\n        case 9:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}\n\nfunction open() {\n  var _yield$all, user, defaultFilter;\n\n  return _regeneratorRuntime.wrap(function open$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return put(advancedFilterActions.setOpenAdvanceSearch(true));\n\n        case 2:\n          _context6.next = 4;\n          return put(advancedFilterActions.setLoadingSection(true));\n\n        case 4:\n          _context6.prev = 4;\n          _context6.next = 7;\n          return all([call(fetchDefaultFilter), call(fetchFilterList), call(fetchInitDataForCreateEdit)]);\n\n        case 7:\n          return _context6.delegateYield(all({\n            user: select(authStore.selectProfile),\n            defaultFilter: select(advancedFilterActions.selectDefaultFilter)\n          }), \"t0\", 8);\n\n        case 8:\n          _yield$all = _context6.t0;\n          user = _yield$all.user;\n          defaultFilter = _yield$all.defaultFilter;\n\n          if (!(user.user_id === defaultFilter.created_by)) {\n            _context6.next = 14;\n            break;\n          }\n\n          _context6.next = 14;\n          return put(advancedFilterActions.setEditMode(true));\n\n        case 14:\n          _context6.next = 16;\n          return call(fetchFilterDetail, defaultFilter.id);\n\n        case 16:\n          _context6.next = 18;\n          return put(advancedFilterActions.setExpandedSection(true));\n\n        case 18:\n          _context6.next = 24;\n          break;\n\n        case 20:\n          _context6.prev = 20;\n          _context6.t1 = _context6[\"catch\"](4);\n          _context6.next = 24;\n          return put(commonStore.actions.setError(_context6.t1));\n\n        case 24:\n          _context6.next = 26;\n          return put(advancedFilterActions.setLoadingSection(false));\n\n        case 26:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6, null, [[4, 20]]);\n}\n\nfunction changeFilterType(_ref) {\n  var filterType;\n  return _regeneratorRuntime.wrap(function changeFilterType$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          filterType = _ref.payload;\n          _context7.next = 3;\n          return put(advancedFilterActions.setLoadingTable(true));\n\n        case 3:\n          _context7.prev = 3;\n          _context7.next = 6;\n          return call(fetchFilterList, filterType);\n\n        case 6:\n          _context7.next = 8;\n          return put(advancedFilterActions.setFilterType(filterType));\n\n        case 8:\n          _context7.next = 14;\n          break;\n\n        case 10:\n          _context7.prev = 10;\n          _context7.t0 = _context7[\"catch\"](3);\n          _context7.next = 14;\n          return put(commonStore.actions.setError(_context7.t0));\n\n        case 14:\n          _context7.next = 16;\n          return put(advancedFilterActions.setLoadingTable(false));\n\n        case 16:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7, null, [[3, 10]]);\n}\n\nfunction getList() {\n  return _regeneratorRuntime.wrap(function getList$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context8.prev = 2;\n          _context8.next = 5;\n          return call(fetchFilterList);\n\n        case 5:\n          _context8.next = 11;\n          break;\n\n        case 7:\n          _context8.prev = 7;\n          _context8.t0 = _context8[\"catch\"](2);\n          _context8.next = 11;\n          return put(commonStore.actions.setError(_context8.t0));\n\n        case 11:\n          _context8.next = 13;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 13:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8, null, [[2, 7]]);\n}\n\nfunction getDefaultFilter() {\n  return _regeneratorRuntime.wrap(function getDefaultFilter$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context9.prev = 2;\n          _context9.next = 5;\n          return call(fetchDefaultFilter);\n\n        case 5:\n          _context9.next = 11;\n          break;\n\n        case 7:\n          _context9.prev = 7;\n          _context9.t0 = _context9[\"catch\"](2);\n          _context9.next = 11;\n          return put(commonStore.actions.setError(_context9.t0));\n\n        case 11:\n          _context9.next = 13;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 13:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, _marked9, null, [[2, 7]]);\n}\n\nfunction create() {\n  var _yield$select, id, created_at, created_by, updated_at, updated_by, is_system_default, filterDetail, data, userInfo, status, message;\n\n  return _regeneratorRuntime.wrap(function create$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          _context10.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context10.prev = 2;\n          _context10.next = 5;\n          return select(advancedFilterActions.selectFilterDetail);\n\n        case 5:\n          _yield$select = _context10.sent;\n          id = _yield$select.id;\n          created_at = _yield$select.created_at;\n          created_by = _yield$select.created_by;\n          updated_at = _yield$select.updated_at;\n          updated_by = _yield$select.updated_by;\n          is_system_default = _yield$select.is_system_default;\n          filterDetail = _objectWithoutProperties(_yield$select, [\"id\", \"created_at\", \"created_by\", \"updated_at\", \"updated_by\", \"is_system_default\"]);\n          _context10.next = 15;\n          return call(afApi.create, filterDetail);\n\n        case 15:\n          data = _context10.sent;\n          _context10.next = 18;\n          return all([call(fetchDefaultFilter), call(fetchFilterList)]);\n\n        case 18:\n          _context10.next = 20;\n          return select(authStore.selectProfile);\n\n        case 20:\n          userInfo = _context10.sent;\n          _context10.next = 23;\n          return put(advancedFilterActions.setEditMode(true));\n\n        case 23:\n          _context10.next = 25;\n          return put(advancedFilterActions.setFilterDetail({\n            id: data.id,\n            created_by: userInfo.user_id,\n            is_system_default: false\n          }));\n\n        case 25:\n          _context10.next = 27;\n          return put(commonStore.actions.setSuccessMessage(data.message));\n\n        case 27:\n          _context10.next = 29;\n          return put(advancedFilterActions.setAfForm({\n            clearError: true,\n            error: ''\n          }));\n\n        case 29:\n          _context10.next = 41;\n          break;\n\n        case 31:\n          _context10.prev = 31;\n          _context10.t0 = _context10[\"catch\"](2);\n          status = _context10.t0.status, message = _context10.t0.message;\n\n          if (!(status === StatusCode.BAD_REQUEST)) {\n            _context10.next = 39;\n            break;\n          }\n\n          _context10.next = 37;\n          return put(advancedFilterActions.setAfForm({\n            error: message\n          }));\n\n        case 37:\n          _context10.next = 41;\n          break;\n\n        case 39:\n          _context10.next = 41;\n          return put(commonStore.actions.setError(_context10.t0));\n\n        case 41:\n          _context10.next = 43;\n          return put(advancedFilterActions.setAfForm({\n            clearError: false,\n            error: ''\n          }));\n\n        case 43:\n          _context10.next = 45;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 45:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, _marked10, null, [[2, 31]]);\n}\n\nfunction update() {\n  var _yield$select2, id, created_at, created_by, updated_at, updated_by, is_system_default, filterDetail, _yield$call3, message, status, _message;\n\n  return _regeneratorRuntime.wrap(function update$(_context11) {\n    while (1) {\n      switch (_context11.prev = _context11.next) {\n        case 0:\n          _context11.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context11.prev = 2;\n          _context11.next = 5;\n          return select(advancedFilterActions.selectFilterDetail);\n\n        case 5:\n          _yield$select2 = _context11.sent;\n          id = _yield$select2.id;\n          created_at = _yield$select2.created_at;\n          created_by = _yield$select2.created_by;\n          updated_at = _yield$select2.updated_at;\n          updated_by = _yield$select2.updated_by;\n          is_system_default = _yield$select2.is_system_default;\n          filterDetail = _objectWithoutProperties(_yield$select2, [\"id\", \"created_at\", \"created_by\", \"updated_at\", \"updated_by\", \"is_system_default\"]);\n          _context11.next = 15;\n          return call(afApi.update, id, filterDetail);\n\n        case 15:\n          _yield$call3 = _context11.sent;\n          message = _yield$call3.message;\n          _context11.next = 19;\n          return all([call(fetchDefaultFilter), call(fetchFilterList)]);\n\n        case 19:\n          _context11.next = 21;\n          return put(commonStore.actions.setSuccessMessage(message));\n\n        case 21:\n          _context11.next = 23;\n          return put(advancedFilterActions.setAfForm({\n            clearError: true,\n            error: ''\n          }));\n\n        case 23:\n          _context11.next = 35;\n          break;\n\n        case 25:\n          _context11.prev = 25;\n          _context11.t0 = _context11[\"catch\"](2);\n          status = _context11.t0.status, _message = _context11.t0.message;\n\n          if (!(status === StatusCode.BAD_REQUEST)) {\n            _context11.next = 33;\n            break;\n          }\n\n          _context11.next = 31;\n          return put(advancedFilterActions.setAfForm({\n            error: _message\n          }));\n\n        case 31:\n          _context11.next = 35;\n          break;\n\n        case 33:\n          _context11.next = 35;\n          return put(commonStore.actions.setError(_context11.t0));\n\n        case 35:\n          _context11.next = 37;\n          return put(advancedFilterActions.setAfForm({\n            clearError: false,\n            error: ''\n          }));\n\n        case 37:\n          _context11.next = 39;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 39:\n        case \"end\":\n          return _context11.stop();\n      }\n    }\n  }, _marked11, null, [[2, 25]]);\n}\n\nfunction share(_ref2) {\n  var payload, id, is_shared, _yield$call4, message;\n\n  return _regeneratorRuntime.wrap(function share$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          payload = _ref2.payload;\n          _context12.next = 3;\n          return put(advancedFilterActions.setLoadingTable(true));\n\n        case 3:\n          _context12.prev = 3;\n          id = payload.id, is_shared = payload.is_shared;\n          _context12.next = 7;\n          return call(afApi.share, id, is_shared);\n\n        case 7:\n          _yield$call4 = _context12.sent;\n          message = _yield$call4.message;\n          _context12.next = 11;\n          return call(fetchFilterList);\n\n        case 11:\n          _context12.next = 13;\n          return put(commonStore.actions.setSuccessMessage(message));\n\n        case 13:\n          _context12.next = 19;\n          break;\n\n        case 15:\n          _context12.prev = 15;\n          _context12.t0 = _context12[\"catch\"](3);\n          _context12.next = 19;\n          return put(commonStore.actions.setError(_context12.t0));\n\n        case 19:\n          _context12.next = 21;\n          return put(advancedFilterActions.setLoadingTable(false));\n\n        case 21:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  }, _marked12, null, [[3, 15]]);\n}\n\nfunction getDetail(_ref3) {\n  var id;\n  return _regeneratorRuntime.wrap(function getDetail$(_context13) {\n    while (1) {\n      switch (_context13.prev = _context13.next) {\n        case 0:\n          id = _ref3.payload;\n          _context13.next = 3;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 3:\n          _context13.prev = 3;\n          _context13.next = 6;\n          return all([call(fetchInitDataForCreateEdit), call(fetchFilterDetail, id)]);\n\n        case 6:\n          _context13.next = 8;\n          return put(advancedFilterActions.setEditMode(true));\n\n        case 8:\n          _context13.next = 14;\n          break;\n\n        case 10:\n          _context13.prev = 10;\n          _context13.t0 = _context13[\"catch\"](3);\n          _context13.next = 14;\n          return put(commonStore.actions.setError(_context13.t0));\n\n        case 14:\n          _context13.next = 16;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 16:\n        case \"end\":\n          return _context13.stop();\n      }\n    }\n  }, _marked13, null, [[3, 10]]);\n}\n\nfunction remove() {\n  var _yield$select3, id, _yield$call5, message, defaultFilter;\n\n  return _regeneratorRuntime.wrap(function remove$(_context14) {\n    while (1) {\n      switch (_context14.prev = _context14.next) {\n        case 0:\n          _context14.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context14.prev = 2;\n          _context14.next = 5;\n          return select(advancedFilterActions.selectFilterDetail);\n\n        case 5:\n          _yield$select3 = _context14.sent;\n          id = _yield$select3.id;\n          _context14.next = 9;\n          return call(afApi.remove, id);\n\n        case 9:\n          _yield$call5 = _context14.sent;\n          message = _yield$call5.message;\n          _context14.next = 13;\n          return all([call(fetchDefaultFilter), call(fetchFilterList)]);\n\n        case 13:\n          _context14.next = 15;\n          return select(advancedFilterActions.selectDefaultFilter);\n\n        case 15:\n          defaultFilter = _context14.sent;\n          _context14.next = 18;\n          return call(fetchFilterDetail, defaultFilter.id);\n\n        case 18:\n          _context14.next = 20;\n          return put(commonStore.actions.setSuccessMessage(message));\n\n        case 20:\n          _context14.next = 26;\n          break;\n\n        case 22:\n          _context14.prev = 22;\n          _context14.t0 = _context14[\"catch\"](2);\n          _context14.next = 26;\n          return put(commonStore.actions.setError(_context14.t0));\n\n        case 26:\n          _context14.next = 28;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 28:\n        case \"end\":\n          return _context14.stop();\n      }\n    }\n  }, _marked14, null, [[2, 22]]);\n}\n\nfunction clearDefaultFilter() {\n  var entity, _yield$call6, message, filterDefault;\n\n  return _regeneratorRuntime.wrap(function clearDefaultFilter$(_context15) {\n    while (1) {\n      switch (_context15.prev = _context15.next) {\n        case 0:\n          _context15.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context15.prev = 2;\n          _context15.next = 5;\n          return getEntity();\n\n        case 5:\n          entity = _context15.sent;\n          _context15.next = 8;\n          return call(afApi.clearDefault, entity);\n\n        case 8:\n          _yield$call6 = _context15.sent;\n          message = _yield$call6.message;\n          _context15.next = 12;\n          return call(fetchDefaultFilter);\n\n        case 12:\n          _context15.next = 14;\n          return select(advancedFilterActions.selectDefaultFilter);\n\n        case 14:\n          filterDefault = _context15.sent;\n          _context15.next = 17;\n          return put(advancedFilterActions.setFilterDetail(filterDefault));\n\n        case 17:\n          _context15.next = 19;\n          return put(commonStore.actions.setSuccessMessage(message));\n\n        case 19:\n          _context15.next = 25;\n          break;\n\n        case 21:\n          _context15.prev = 21;\n          _context15.t0 = _context15[\"catch\"](2);\n          _context15.next = 25;\n          return put(commonStore.actions.setError(_context15.t0));\n\n        case 25:\n          _context15.next = 27;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 27:\n        case \"end\":\n          return _context15.stop();\n      }\n    }\n  }, _marked15, null, [[2, 21]]);\n}\n\nfunction saveAs(_ref4) {\n  var name, _yield$select4, id, created_at, created_by, updated_at, updated_by, is_system_default, filterDetail, copyFilterDetail, data, userInfo, message, status;\n\n  return _regeneratorRuntime.wrap(function saveAs$(_context16) {\n    while (1) {\n      switch (_context16.prev = _context16.next) {\n        case 0:\n          name = _ref4.payload;\n          _context16.next = 3;\n          return put(advancedFilterActions.setLoadingDialog(true));\n\n        case 3:\n          _context16.prev = 3;\n          _context16.next = 6;\n          return select(advancedFilterActions.selectFilterDetail);\n\n        case 6:\n          _yield$select4 = _context16.sent;\n          id = _yield$select4.id;\n          created_at = _yield$select4.created_at;\n          created_by = _yield$select4.created_by;\n          updated_at = _yield$select4.updated_at;\n          updated_by = _yield$select4.updated_by;\n          is_system_default = _yield$select4.is_system_default;\n          filterDetail = _objectWithoutProperties(_yield$select4, [\"id\", \"created_at\", \"created_by\", \"updated_at\", \"updated_by\", \"is_system_default\"]);\n          copyFilterDetail = _objectSpread(_objectSpread({}, filterDetail), {}, {\n            name: name\n          });\n          _context16.next = 17;\n          return call(afApi.create, copyFilterDetail);\n\n        case 17:\n          data = _context16.sent;\n          _context16.next = 20;\n          return all([call(fetchDefaultFilter), call(fetchFilterList)]);\n\n        case 20:\n          _context16.next = 22;\n          return select(authStore.selectProfile);\n\n        case 22:\n          userInfo = _context16.sent;\n          _context16.next = 25;\n          return put(advancedFilterActions.setEditMode(true));\n\n        case 25:\n          _context16.next = 27;\n          return put(advancedFilterActions.setFilterDetail({\n            id: data.id,\n            created_by: userInfo.user_id,\n            is_system_default: false,\n            name: name\n          }));\n\n        case 27:\n          _context16.next = 29;\n          return put(commonStore.actions.setSuccessMessage(data.message));\n\n        case 29:\n          _context16.next = 31;\n          return put(advancedFilterActions.setSaveAsForm({\n            open: false,\n            clearError: true,\n            error: ''\n          }));\n\n        case 31:\n          _context16.next = 43;\n          break;\n\n        case 33:\n          _context16.prev = 33;\n          _context16.t0 = _context16[\"catch\"](3);\n          message = _context16.t0.message, status = _context16.t0.status;\n\n          if (!(status === StatusCode.BAD_REQUEST)) {\n            _context16.next = 41;\n            break;\n          }\n\n          _context16.next = 39;\n          return put(advancedFilterActions.setSaveAsForm({\n            error: message\n          }));\n\n        case 39:\n          _context16.next = 43;\n          break;\n\n        case 41:\n          _context16.next = 43;\n          return put(commonStore.actions.setError(_context16.t0));\n\n        case 43:\n          _context16.next = 45;\n          return put(advancedFilterActions.setSaveAsForm({\n            clearError: false,\n            error: ''\n          }));\n\n        case 45:\n          _context16.next = 47;\n          return put(advancedFilterActions.setLoadingDialog(false));\n\n        case 47:\n        case \"end\":\n          return _context16.stop();\n      }\n    }\n  }, _marked16, null, [[3, 33]]);\n}\n\nfunction apply() {\n  var entity, getListAction;\n  return _regeneratorRuntime.wrap(function apply$(_context17) {\n    while (1) {\n      switch (_context17.prev = _context17.next) {\n        case 0:\n          return _context17.delegateYield(getEntity(), \"t0\", 1);\n\n        case 1:\n          entity = _context17.t0;\n\n          if (entity === 'manufacturing_standard' || entity === 'material_standard') {\n            entity = 'equivalence';\n          }\n\n          getListAction = createAction(\"\".concat(entity, \"/\").concat(actionTypes.GET_LIST));\n          _context17.next = 6;\n          return put(commonStore.actions.setTableState({\n            page: 1\n          }));\n\n        case 6:\n          _context17.next = 8;\n          return put(getListAction());\n\n        case 8:\n          _context17.next = 10;\n          return put(commonStore.actions.setSuccessMessage('The filter preset is applied successfully! This result is temporary'));\n\n        case 10:\n        case \"end\":\n          return _context17.stop();\n      }\n    }\n  }, _marked17);\n}\n\nfunction close() {\n  var entity, getListAction;\n  return _regeneratorRuntime.wrap(function close$(_context18) {\n    while (1) {\n      switch (_context18.prev = _context18.next) {\n        case 0:\n          return _context18.delegateYield(getEntity(), \"t0\", 1);\n\n        case 1:\n          entity = _context18.t0;\n\n          if (entity === 'manufacturing_standard' || entity === 'material_standard') {\n            entity = 'equivalence';\n          }\n\n          getListAction = createAction(\"\".concat(entity, \"/\").concat(actionTypes.GET_LIST));\n          _context18.next = 6;\n          return put(getListAction());\n\n        case 6:\n        case \"end\":\n          return _context18.stop();\n      }\n    }\n  }, _marked18);\n}\n\nfunction advancedFilterSaga() {\n  return _regeneratorRuntime.wrap(function advancedFilterSaga$(_context19) {\n    while (1) {\n      switch (_context19.prev = _context19.next) {\n        case 0:\n          _context19.next = 2;\n          return takeEvery(advancedFilterActions.getList, getList);\n\n        case 2:\n          _context19.next = 4;\n          return takeEvery(advancedFilterActions.create, create);\n\n        case 4:\n          _context19.next = 6;\n          return takeEvery(advancedFilterActions.update, update);\n\n        case 6:\n          _context19.next = 8;\n          return takeEvery(advancedFilterActions.getDetail, getDetail);\n\n        case 8:\n          _context19.next = 10;\n          return takeEvery(advancedFilterActions.share, share);\n\n        case 10:\n          _context19.next = 12;\n          return takeLatest(advancedFilterActions.remove, remove);\n\n        case 12:\n          _context19.next = 14;\n          return takeLatest(advancedFilterActions.clearDefaultFilter, clearDefaultFilter);\n\n        case 14:\n          _context19.next = 16;\n          return takeEvery(advancedFilterActions.getDefaultFilter, getDefaultFilter);\n\n        case 16:\n          _context19.next = 18;\n          return takeEvery(advancedFilterActions.changeFilterType, changeFilterType);\n\n        case 18:\n          _context19.next = 20;\n          return takeEvery(advancedFilterActions.saveAs, saveAs);\n\n        case 20:\n          _context19.next = 22;\n          return takeEvery(advancedFilterActions.open, open);\n\n        case 22:\n          _context19.next = 24;\n          return takeEvery(advancedFilterActions.apply, apply);\n\n        case 24:\n          _context19.next = 26;\n          return takeEvery(advancedFilterActions.close, close);\n\n        case 26:\n        case \"end\":\n          return _context19.stop();\n      }\n    }\n  }, _marked19);\n}\n\nexport default advancedFilterSaga;","map":{"version":3,"sources":["D:/TTS_Reactjs/malis-3-frontend/src/store/saga/advancedFilter.saga.ts"],"names":["getEntity","fetchDefaultFilter","fetchFilterList","fetchInitDataForCreateEdit","fetchFilterDetail","open","changeFilterType","getList","getDefaultFilter","create","update","share","getDetail","remove","clearDefaultFilter","saveAs","apply","close","advancedFilterSaga","put","takeEvery","takeLatest","select","all","call","createAction","authStore","advancedFilterActions","commonStore","afApi","StatusCode","actionTypes","selectEntity","entity","getInitDataForList","data","setDefaultFilter","default_filter","setPermissions","permissions","advanced_filters","setSystemPreset","system_default_filter","filterType","type","selectFilterType","filter_preset_list","setFilterPresetList","getInitDataForCE","setInitData","id","filter_preset","is_user_default","setFilterDetail","setOpenAdvanceSearch","setLoadingSection","user","selectProfile","defaultFilter","selectDefaultFilter","user_id","created_by","setEditMode","setExpandedSection","actions","setError","payload","setLoadingTable","setFilterType","setLoadingPage","selectFilterDetail","created_at","updated_at","updated_by","is_system_default","filterDetail","userInfo","setSuccessMessage","message","setAfForm","clearError","error","status","BAD_REQUEST","is_shared","clearDefault","filterDefault","name","setLoadingDialog","copyFilterDetail","setSaveAsForm","getListAction","GET_LIST","setTableState","page"],"mappings":"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","sourcesContent":["import { put, takeEvery, takeLatest } from 'redux-saga/effects'\nimport { select, all, call } from 'typed-redux-saga'\nimport { createAction } from '@reduxjs/toolkit'\n\nimport { authStore, advancedFilterActions, commonStore } from '@/store/reducers'\nimport afApi from '@/apis/advancedFilter.api'\nimport { StatusCode } from '@/utils/StatusCode'\nimport { actionTypes } from '@/utils/constant'\n\nfunction* getEntity() {\n  const entity = yield* select(commonStore.selectEntity)\n  return entity\n}\n\nfunction* fetchDefaultFilter() {\n  const entity = yield getEntity()\n  const data = yield call(afApi.getInitDataForList, entity)\n  yield put(advancedFilterActions.setDefaultFilter(data.default_filter))\n  yield put(advancedFilterActions.setPermissions(data.permissions.advanced_filters))\n  yield put(advancedFilterActions.setSystemPreset(data.system_default_filter))\n}\n\nfunction* fetchFilterList(filterType = '') {\n  let type = filterType\n  if (!type) {\n    type = yield* select(advancedFilterActions.selectFilterType)\n  }\n  const entity = yield getEntity()\n  const { filter_preset_list } = yield call(afApi.getList, { entity, type })\n  yield put(advancedFilterActions.setFilterPresetList(filter_preset_list))\n}\n\nfunction* fetchInitDataForCreateEdit() {\n  const entity = yield getEntity()\n  const data = yield call(afApi.getInitDataForCE, entity)\n  yield put(advancedFilterActions.setInitData(data))\n}\n\nfunction* fetchFilterDetail(id: number) {\n  const { filter_preset } = yield call(afApi.getDetail, id)\n  const filterType = yield* select(advancedFilterActions.selectFilterType)\n  if (filterType === 'shared') {\n    filter_preset.is_user_default = false\n  }\n  yield put(advancedFilterActions.setFilterDetail(filter_preset))\n}\n\nfunction* open() {\n  yield put(advancedFilterActions.setOpenAdvanceSearch(true))\n  yield put(advancedFilterActions.setLoadingSection(true))\n\n  try {\n    yield all([call(fetchDefaultFilter), call(fetchFilterList), call(fetchInitDataForCreateEdit)])\n    const { user, defaultFilter } = yield* all({\n      user: select(authStore.selectProfile),\n      defaultFilter: select(advancedFilterActions.selectDefaultFilter)\n    })\n    if (user.user_id === defaultFilter.created_by) {\n      yield put(advancedFilterActions.setEditMode(true))\n    }\n    yield call(fetchFilterDetail, defaultFilter.id)\n    yield put(advancedFilterActions.setExpandedSection(true))\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n  yield put(advancedFilterActions.setLoadingSection(false))\n}\n\nfunction* changeFilterType({ payload: filterType }) {\n  yield put(advancedFilterActions.setLoadingTable(true))\n  try {\n    yield call(fetchFilterList, filterType)\n    yield put(advancedFilterActions.setFilterType(filterType))\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n  yield put(advancedFilterActions.setLoadingTable(false))\n}\n\nfunction* getList() {\n  yield put(commonStore.actions.setLoadingPage(true))\n\n  try {\n    yield call(fetchFilterList)\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* getDefaultFilter() {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    yield call(fetchDefaultFilter)\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* create() {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    const { id, created_at, created_by, updated_at, updated_by, is_system_default, ...filterDetail } = yield select(\n      advancedFilterActions.selectFilterDetail\n    )\n    const data = yield call(afApi.create, filterDetail)\n    yield all([call(fetchDefaultFilter), call(fetchFilterList)])\n    const userInfo = yield select(authStore.selectProfile)\n    yield put(advancedFilterActions.setEditMode(true))\n    yield put(\n      advancedFilterActions.setFilterDetail({\n        id: data.id,\n        created_by: userInfo.user_id,\n        is_system_default: false\n      })\n    )\n    yield put(commonStore.actions.setSuccessMessage(data.message))\n    yield put(\n      advancedFilterActions.setAfForm({\n        clearError: true,\n        error: ''\n      })\n    )\n  } catch (error) {\n    const { status, message } = error\n    if (status === StatusCode.BAD_REQUEST) {\n      yield put(advancedFilterActions.setAfForm({ error: message }))\n    } else {\n      yield put(commonStore.actions.setError(error))\n    }\n  }\n  yield put(advancedFilterActions.setAfForm({ clearError: false, error: '' }))\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* update() {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    const { id, created_at, created_by, updated_at, updated_by, is_system_default, ...filterDetail } = yield select(\n      advancedFilterActions.selectFilterDetail\n    )\n    const { message } = yield call(afApi.update, id, filterDetail)\n    yield all([call(fetchDefaultFilter), call(fetchFilterList)])\n    yield put(commonStore.actions.setSuccessMessage(message))\n    yield put(\n      advancedFilterActions.setAfForm({\n        clearError: true,\n        error: ''\n      })\n    )\n  } catch (error) {\n    const { status, message } = error\n    if (status === StatusCode.BAD_REQUEST) {\n      yield put(advancedFilterActions.setAfForm({ error: message }))\n    } else {\n      yield put(commonStore.actions.setError(error))\n    }\n  }\n  yield put(advancedFilterActions.setAfForm({ clearError: false, error: '' }))\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* share({ payload }: ReturnType<typeof advancedFilterActions.share>) {\n  yield put(advancedFilterActions.setLoadingTable(true))\n  try {\n    const { id, is_shared } = payload\n    const { message } = yield call(afApi.share, id, is_shared)\n    yield call(fetchFilterList)\n    yield put(commonStore.actions.setSuccessMessage(message))\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n  yield put(advancedFilterActions.setLoadingTable(false))\n}\n\nfunction* getDetail({ payload: id }) {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    yield all([call(fetchInitDataForCreateEdit), call(fetchFilterDetail, id)])\n    yield put(advancedFilterActions.setEditMode(true))\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* remove() {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    const { id } = yield select(advancedFilterActions.selectFilterDetail)\n    const { message } = yield call(afApi.remove, id)\n    yield all([call(fetchDefaultFilter), call(fetchFilterList)])\n    const defaultFilter = yield select(advancedFilterActions.selectDefaultFilter)\n    yield call(fetchFilterDetail, defaultFilter.id)\n    yield put(commonStore.actions.setSuccessMessage(message))\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* clearDefaultFilter() {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    const entity = yield getEntity()\n    const { message } = yield call(afApi.clearDefault, entity)\n    yield call(fetchDefaultFilter)\n    const filterDefault = yield select(advancedFilterActions.selectDefaultFilter)\n    yield put(advancedFilterActions.setFilterDetail(filterDefault))\n    yield put(commonStore.actions.setSuccessMessage(message))\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* saveAs({ payload: name }) {\n  yield put(advancedFilterActions.setLoadingDialog(true))\n  try {\n    const { id, created_at, created_by, updated_at, updated_by, is_system_default, ...filterDetail } = yield select(\n      advancedFilterActions.selectFilterDetail\n    )\n    const copyFilterDetail = { ...filterDetail, name }\n    const data = yield call(afApi.create, copyFilterDetail)\n    yield all([call(fetchDefaultFilter), call(fetchFilterList)])\n    const userInfo = yield select(authStore.selectProfile)\n    yield put(advancedFilterActions.setEditMode(true))\n    yield put(\n      advancedFilterActions.setFilterDetail({\n        id: data.id,\n        created_by: userInfo.user_id,\n        is_system_default: false,\n        name\n      })\n    )\n    yield put(commonStore.actions.setSuccessMessage(data.message))\n    yield put(\n      advancedFilterActions.setSaveAsForm({\n        open: false,\n        clearError: true,\n        error: ''\n      })\n    )\n  } catch (error) {\n    const { message, status } = error\n    if (status === StatusCode.BAD_REQUEST) {\n      yield put(advancedFilterActions.setSaveAsForm({ error: message }))\n    } else {\n      yield put(commonStore.actions.setError(error))\n    }\n  }\n  yield put(advancedFilterActions.setSaveAsForm({ clearError: false, error: '' }))\n  yield put(advancedFilterActions.setLoadingDialog(false))\n}\n\nfunction* apply() {\n  let entity = yield* getEntity()\n  if (entity === 'manufacturing_standard' || entity === 'material_standard') {\n    entity = 'equivalence'\n  }\n  const getListAction = createAction(`${entity}/${actionTypes.GET_LIST}`)\n  yield put(commonStore.actions.setTableState({ page: 1 }))\n  yield put(getListAction())\n  yield put(\n    commonStore.actions.setSuccessMessage('The filter preset is applied successfully! This result is temporary')\n  )\n}\n\nfunction* close() {\n  let entity = yield* getEntity()\n  if (entity === 'manufacturing_standard' || entity === 'material_standard') {\n    entity = 'equivalence'\n  }\n  const getListAction = createAction(`${entity}/${actionTypes.GET_LIST}`)\n  yield put(getListAction())\n}\n\nfunction* advancedFilterSaga() {\n  yield takeEvery(advancedFilterActions.getList, getList)\n  yield takeEvery(advancedFilterActions.create, create)\n  yield takeEvery(advancedFilterActions.update, update)\n  yield takeEvery(advancedFilterActions.getDetail, getDetail)\n  yield takeEvery(advancedFilterActions.share, share)\n  yield takeLatest(advancedFilterActions.remove, remove)\n  yield takeLatest(advancedFilterActions.clearDefaultFilter, clearDefaultFilter)\n  yield takeEvery(advancedFilterActions.getDefaultFilter, getDefaultFilter)\n  yield takeEvery(advancedFilterActions.changeFilterType, changeFilterType)\n  yield takeEvery(advancedFilterActions.saveAs, saveAs)\n  yield takeEvery(advancedFilterActions.open, open)\n  yield takeEvery(advancedFilterActions.apply, apply)\n  yield takeEvery(advancedFilterActions.close, close)\n}\n\nexport default advancedFilterSaga\n"]},"metadata":{},"sourceType":"module"}