{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\TTS_Reactjs\\\\malis-3-frontend\\\\src\\\\pages\\\\_app.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useBeforeUnload } from 'react-use';\nimport { useRouter } from 'next/router';\nimport Rollbar from 'rollbar';\nimport NextNprogress from 'nextjs-progressbar';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport { Provider as RollbarProvider } from '@rollbar/react';\nimport { appWithTranslation } from 'next-i18next';\nimport { Header, AppLoadingPage, AppMessagePopup, SummaryReport, SessionExpiredDialog, ConfirmProvider, ErrorBoundary, DialogError } from '@/components';\nimport { Unless } from 'react-if';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { wrapper } from '@/store/config';\nimport theme from '@/styles/theme';\nimport _ from 'lodash';\nimport { commonStore, authStore } from '@/store/reducers';\nimport '@/styles/theme.css';\nvar rollbarConfig = {\n  accessToken: process.env.NEXT_PUBLIC_ROLLBAR_ACCESS_TOKEN,\n  captureUncaught: true,\n  captureUnhandledRejections: true,\n  environment: process.env.NEXT_PUBLIC_MODE,\n  enabled: process.env.NEXT_PUBLIC_MODE === 'production'\n};\nvar rollbar = new Rollbar(rollbarConfig);\n\nfunction MyApp(_ref) {\n  _s();\n\n  var Component = _ref.Component,\n      pageProps = _ref.pageProps;\n  var router = useRouter();\n  var dispatch = useDispatch();\n  var isLoginPage = router.pathname === '/login';\n  var editRows = useSelector(commonStore.selectEditRows);\n  var profile = useSelector(authStore.selectProfile);\n  var currentLanguage = useSelector(commonStore.selectCurrentLanguage);\n  useBeforeUnload(editRows.length > 0, 'You have unsaved changes, are you sure?');\n  useEffect(function () {\n    var jssStyles = document.querySelector('#jss-server-side');\n\n    if (jssStyles) {\n      jssStyles.parentElement.removeChild(jssStyles);\n    }\n  }, []);\n  useEffect(function () {\n    return function () {\n      dispatch(commonStore.resetState());\n    };\n  }, [router.pathname]);\n  useEffect(function () {\n    if (_.isNil(currentLanguage.id) && !_.isNil(profile.default_language_id)) {\n      dispatch(commonStore.actions.setCurrentLanguage(_objectSpread(_objectSpread({}, commonStore.initialState.currentLanguage), {}, {\n        id: profile.default_language_id\n      })));\n    }\n  }, [profile, currentLanguage]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(ThemeProvider, {\n      theme: theme,\n      children: [/*#__PURE__*/_jsxDEV(NextNprogress, {\n        color: \"#29D\",\n        startPosition: 0.3,\n        stopDelayMs: 200,\n        height: 2,\n        options: {\n          showSpinner: false\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AppMessagePopup, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AppLoadingPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MuiPickersUtilsProvider, {\n        utils: DateFnsUtils,\n        children: [/*#__PURE__*/_jsxDEV(ConfirmProvider, {\n          children: /*#__PURE__*/_jsxDEV(RollbarProvider, {\n            instance: rollbar,\n            children: [/*#__PURE__*/_jsxDEV(ErrorBoundary, {\n              children: [/*#__PURE__*/_jsxDEV(Unless, {\n                condition: isLoginPage,\n                children: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Component, _objectSpread({}, pageProps), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(DialogError, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SessionExpiredDialog, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SummaryReport, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(MyApp, \"g8aYpT4YUGZLVpDMQGpAflo0b68=\", false, function () {\n  return [useRouter, useDispatch, useSelector, useSelector, useSelector, useBeforeUnload];\n});\n\n_c = MyApp;\nexport default _c3 = wrapper.withRedux(_c2 = appWithTranslation(MyApp));\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"MyApp\");\n$RefreshReg$(_c2, \"%default%$wrapper.withRedux\");\n$RefreshReg$(_c3, \"%default%\");","map":{"version":3,"sources":["D:/TTS_Reactjs/malis-3-frontend/src/pages/_app.tsx"],"names":["useEffect","useDispatch","useSelector","useBeforeUnload","useRouter","Rollbar","NextNprogress","ThemeProvider","CssBaseline","MuiPickersUtilsProvider","Provider","RollbarProvider","appWithTranslation","Header","AppLoadingPage","AppMessagePopup","SummaryReport","SessionExpiredDialog","ConfirmProvider","ErrorBoundary","DialogError","Unless","DateFnsUtils","wrapper","theme","_","commonStore","authStore","rollbarConfig","accessToken","process","env","NEXT_PUBLIC_ROLLBAR_ACCESS_TOKEN","captureUncaught","captureUnhandledRejections","environment","NEXT_PUBLIC_MODE","enabled","rollbar","MyApp","Component","pageProps","router","dispatch","isLoginPage","pathname","editRows","selectEditRows","profile","selectProfile","currentLanguage","selectCurrentLanguage","length","jssStyles","document","querySelector","parentElement","removeChild","resetState","isNil","id","default_language_id","actions","setCurrentLanguage","initialState","showSpinner","withRedux"],"mappings":"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","sourcesContent":["import { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useBeforeUnload } from 'react-use'\nimport { useRouter } from 'next/router'\n\nimport Rollbar from 'rollbar'\nimport NextNprogress from 'nextjs-progressbar'\n\nimport { ThemeProvider } from '@material-ui/core/styles'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers'\n\nimport { Provider as RollbarProvider } from '@rollbar/react'\n\nimport { appWithTranslation } from 'next-i18next'\n\nimport {\n  Header,\n  AppLoadingPage,\n  AppMessagePopup,\n  SummaryReport,\n  SessionExpiredDialog,\n  ConfirmProvider,\n  ErrorBoundary,\n  DialogError\n} from '@/components'\n\nimport { Unless } from 'react-if'\nimport DateFnsUtils from '@date-io/date-fns'\nimport { wrapper } from '@/store/config'\n\nimport theme from '@/styles/theme'\nimport _ from 'lodash'\nimport { commonStore, authStore } from '@/store/reducers'\n\nimport type { AppProps } from 'next/app'\n\nimport '@/styles/theme.css'\n\nconst rollbarConfig = {\n  accessToken: process.env.NEXT_PUBLIC_ROLLBAR_ACCESS_TOKEN,\n  captureUncaught: true,\n  captureUnhandledRejections: true,\n  environment: process.env.NEXT_PUBLIC_MODE,\n  enabled: process.env.NEXT_PUBLIC_MODE === 'production'\n}\n\nconst rollbar = new Rollbar(rollbarConfig)\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  const router = useRouter()\n  const dispatch = useDispatch()\n\n  const isLoginPage = router.pathname === '/login'\n  const editRows = useSelector(commonStore.selectEditRows)\n  const profile = useSelector(authStore.selectProfile)\n  const currentLanguage = useSelector(commonStore.selectCurrentLanguage)\n\n  useBeforeUnload(editRows.length > 0, 'You have unsaved changes, are you sure?')\n\n  useEffect(() => {\n    const jssStyles = document.querySelector('#jss-server-side')\n    if (jssStyles) {\n      jssStyles.parentElement.removeChild(jssStyles)\n    }\n  }, [])\n\n  useEffect(() => {\n    return () => {\n      dispatch(commonStore.resetState())\n    }\n  }, [router.pathname])\n\n  useEffect(() => {\n    if (_.isNil(currentLanguage.id) && !_.isNil(profile.default_language_id)) {\n      dispatch(\n        commonStore.actions.setCurrentLanguage({\n          ...commonStore.initialState.currentLanguage,\n          id: profile.default_language_id\n        })\n      )\n    }\n  }, [profile, currentLanguage])\n\n  return (\n    <>\n      <ThemeProvider theme={theme}>\n        <NextNprogress color=\"#29D\" startPosition={0.3} stopDelayMs={200} height={2} options={{ showSpinner: false }} />\n        <CssBaseline />\n\n        <AppMessagePopup />\n        <AppLoadingPage />\n\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n          <ConfirmProvider>\n            <RollbarProvider instance={rollbar}>\n              <ErrorBoundary>\n                <Unless condition={isLoginPage}>\n                  <Header />\n                </Unless>\n\n                <Component {...pageProps} />\n              </ErrorBoundary>\n              <DialogError />\n            </RollbarProvider>\n          </ConfirmProvider>\n\n          <SessionExpiredDialog />\n          <SummaryReport />\n        </MuiPickersUtilsProvider>\n      </ThemeProvider>\n    </>\n  )\n}\nexport default wrapper.withRedux(appWithTranslation(MyApp))\n"]},"metadata":{},"sourceType":"module"}