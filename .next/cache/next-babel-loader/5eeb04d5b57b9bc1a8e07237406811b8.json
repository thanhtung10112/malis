{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(getEntityFromStore),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(fetchPresetList),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(fetchPresetDetail),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(fetchInitDataForCreateUpdate),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(fetchInitDataForList),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(changeFilterType),\n    _marked7 = /*#__PURE__*/_regeneratorRuntime.mark(open),\n    _marked8 = /*#__PURE__*/_regeneratorRuntime.mark(create),\n    _marked9 = /*#__PURE__*/_regeneratorRuntime.mark(update),\n    _marked10 = /*#__PURE__*/_regeneratorRuntime.mark(getList),\n    _marked11 = /*#__PURE__*/_regeneratorRuntime.mark(getDetail),\n    _marked12 = /*#__PURE__*/_regeneratorRuntime.mark(share),\n    _marked13 = /*#__PURE__*/_regeneratorRuntime.mark(remove),\n    _marked14 = /*#__PURE__*/_regeneratorRuntime.mark(clearDefault),\n    _marked15 = /*#__PURE__*/_regeneratorRuntime.mark(startMakeAListExport),\n    _marked16 = /*#__PURE__*/_regeneratorRuntime.mark(stopMakeAListExport),\n    _marked17 = /*#__PURE__*/_regeneratorRuntime.mark(saveAs),\n    _marked18 = /*#__PURE__*/_regeneratorRuntime.mark(makeAListSaga);\n\nimport { call, put, takeEvery, select, takeLatest, all } from 'redux-saga/effects';\nimport _ from 'lodash';\nimport * as errorSaga from '@/store/saga/errorSaga';\nimport { makeAListActions, exportProcessDialogActions, commonStore } from '@/store/reducers';\nimport { removalProperties } from '@/utils/constant';\nimport malApi from '@/apis/makeAList.api';\nimport { StatusCode } from '@/utils/StatusCode';\n\nfunction getEntityFromStore() {\n  var entity;\n  return _regeneratorRuntime.wrap(function getEntityFromStore$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return select(commonStore.selectEntity);\n\n        case 2:\n          entity = _context.sent;\n          return _context.abrupt(\"return\", entity);\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n\nfunction fetchPresetList() {\n  var filterType,\n      type,\n      entity,\n      _yield$call,\n      make_a_list_preset_list,\n      _args2 = arguments;\n\n  return _regeneratorRuntime.wrap(function fetchPresetList$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          filterType = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : '';\n          type = filterType;\n\n          if (type) {\n            _context2.next = 6;\n            break;\n          }\n\n          _context2.next = 5;\n          return select(function (state) {\n            return state.makeAList.filterType;\n          });\n\n        case 5:\n          type = _context2.sent;\n\n        case 6:\n          _context2.next = 8;\n          return getEntityFromStore();\n\n        case 8:\n          entity = _context2.sent;\n          _context2.next = 11;\n          return call(malApi.getList, {\n            entity: entity,\n            type: type\n          });\n\n        case 11:\n          _yield$call = _context2.sent;\n          make_a_list_preset_list = _yield$call.make_a_list_preset_list;\n          _context2.next = 15;\n          return put(makeAListActions.setPresetList(make_a_list_preset_list));\n\n        case 15:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n\nfunction fetchPresetDetail(id) {\n  var _yield$call2, make_a_list_preset, filterType;\n\n  return _regeneratorRuntime.wrap(function fetchPresetDetail$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return call(malApi.getDetail, id);\n\n        case 2:\n          _yield$call2 = _context3.sent;\n          make_a_list_preset = _yield$call2.make_a_list_preset;\n          _context3.next = 6;\n          return select(makeAListActions.selectFilterType);\n\n        case 6:\n          filterType = _context3.sent;\n\n          if (filterType === 'shared') {\n            make_a_list_preset.is_user_default = false;\n          }\n\n          _context3.next = 10;\n          return put(makeAListActions.setPresetDetail(make_a_list_preset));\n\n        case 10:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n\nfunction fetchInitDataForCreateUpdate() {\n  var entity, data;\n  return _regeneratorRuntime.wrap(function fetchInitDataForCreateUpdate$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return getEntityFromStore();\n\n        case 2:\n          entity = _context4.sent;\n          _context4.next = 5;\n          return call(malApi.getInitDataForCE, entity);\n\n        case 5:\n          data = _context4.sent;\n          _context4.next = 8;\n          return put(makeAListActions.setInitData(data));\n\n        case 8:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\n\nfunction fetchInitDataForList(isSetPresetDetail) {\n  var entity, _yield$call3, current_default_preset, system_default_preset, make_a_list;\n\n  return _regeneratorRuntime.wrap(function fetchInitDataForList$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return getEntityFromStore();\n\n        case 2:\n          entity = _context5.sent;\n          _context5.next = 5;\n          return call(malApi.getInitDataForList, entity);\n\n        case 5:\n          _yield$call3 = _context5.sent;\n          current_default_preset = _yield$call3.current_default_preset;\n          system_default_preset = _yield$call3.system_default_preset;\n          make_a_list = _yield$call3.permissions.make_a_list;\n          _context5.next = 11;\n          return all([put(makeAListActions.setPresetDefault(current_default_preset)), put(makeAListActions.setSystemPreset(system_default_preset)), put(makeAListActions.setPermissions(make_a_list))]);\n\n        case 11:\n          _context5.t0 = isSetPresetDetail;\n\n          if (!_context5.t0) {\n            _context5.next = 15;\n            break;\n          }\n\n          _context5.next = 15;\n          return put(makeAListActions.setPresetDetail(current_default_preset));\n\n        case 15:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}\n\nfunction changeFilterType(_ref) {\n  var filterType;\n  return _regeneratorRuntime.wrap(function changeFilterType$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          filterType = _ref.payload;\n          _context6.next = 3;\n          return put(makeAListActions.setLoadingTable(true));\n\n        case 3:\n          _context6.prev = 3;\n          _context6.next = 6;\n          return call(fetchPresetList, filterType);\n\n        case 6:\n          _context6.next = 8;\n          return put(makeAListActions.setFilterType(filterType));\n\n        case 8:\n          _context6.next = 14;\n          break;\n\n        case 10:\n          _context6.prev = 10;\n          _context6.t0 = _context6[\"catch\"](3);\n          _context6.next = 14;\n          return errorSaga.handleError(_context6.t0);\n\n        case 14:\n          _context6.next = 16;\n          return put(makeAListActions.setLoadingTable(false));\n\n        case 16:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6, null, [[3, 10]]);\n}\n\nfunction open() {\n  var entity, _yield$call4, success, data, message, _success;\n\n  return _regeneratorRuntime.wrap(function open$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context7.next = 4;\n          return getEntityFromStore();\n\n        case 4:\n          entity = _context7.sent;\n          _context7.prev = 5;\n          _context7.next = 8;\n          return call(malApi.checkPermissions, entity);\n\n        case 8:\n          _yield$call4 = _context7.sent;\n          success = _yield$call4.success;\n\n          if (!success) {\n            _context7.next = 15;\n            break;\n          }\n\n          _context7.next = 13;\n          return all([call(fetchPresetList), call(fetchInitDataForList, true), call(fetchInitDataForCreateUpdate)]);\n\n        case 13:\n          _context7.next = 15;\n          return put(makeAListActions.setOpen(true));\n\n        case 15:\n          _context7.next = 26;\n          break;\n\n        case 17:\n          _context7.prev = 17;\n          _context7.t0 = _context7[\"catch\"](5);\n          data = _context7.t0.response.data;\n          message = data.message, _success = data.success;\n\n          if (_success) {\n            _context7.next = 26;\n            break;\n          }\n\n          _context7.next = 24;\n          return put(commonStore.actions.setErrorMessage(message));\n\n        case 24:\n          _context7.next = 26;\n          return put({\n            type: \"\".concat(entity, \"/setPermissions\"),\n            payload: {\n              make_a_list: false\n            }\n          });\n\n        case 26:\n          _context7.next = 28;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 28:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7, null, [[5, 17]]);\n}\n\nfunction create(_ref2) {\n  var payload, id, created_at, created_by, updated_at, updated_by, is_system_default, presetDetail, data, _error$response, _data, status, _error;\n\n  return _regeneratorRuntime.wrap(function create$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          payload = _ref2.payload;\n          _context8.next = 3;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 3:\n          _context8.prev = 3;\n          id = payload.id, created_at = payload.created_at, created_by = payload.created_by, updated_at = payload.updated_at, updated_by = payload.updated_by, is_system_default = payload.is_system_default, presetDetail = _objectWithoutProperties(payload, [\"id\", \"created_at\", \"created_by\", \"updated_at\", \"updated_by\", \"is_system_default\"]);\n          _context8.next = 7;\n          return call(malApi.create, presetDetail);\n\n        case 7:\n          data = _context8.sent;\n          _context8.next = 10;\n          return all([call(fetchPresetDetail, data.id), call(fetchPresetList), call(fetchInitDataForList, false), put(commonStore.actions.setSuccessMessage(data.message)), put(makeAListActions.setIsEditMode(true)), put(makeAListActions.setMalForm({\n            clearError: true,\n            error: ''\n          }))]);\n\n        case 10:\n          _context8.next = 23;\n          break;\n\n        case 12:\n          _context8.prev = 12;\n          _context8.t0 = _context8[\"catch\"](3);\n          _error$response = _context8.t0.response, _data = _error$response.data, status = _error$response.status;\n\n          if (!(status === StatusCode.BAD_REQUEST)) {\n            _context8.next = 21;\n            break;\n          }\n\n          _error = _data.message;\n          _context8.next = 19;\n          return put(makeAListActions.setMalForm({\n            error: _error\n          }));\n\n        case 19:\n          _context8.next = 23;\n          break;\n\n        case 21:\n          _context8.next = 23;\n          return errorSaga.handleError(_context8.t0);\n\n        case 23:\n          _context8.next = 25;\n          return put(makeAListActions.setMalForm({\n            clearError: false,\n            error: ''\n          }));\n\n        case 25:\n          _context8.next = 27;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 27:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8, null, [[3, 12]]);\n}\n\nfunction update(_ref3) {\n  var payload, presetDetail, _yield$call5, message, _error$response2, data, status, _error2;\n\n  return _regeneratorRuntime.wrap(function update$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          payload = _ref3.payload;\n          _context9.next = 3;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 3:\n          _context9.prev = 3;\n          presetDetail = _.omit(payload, [].concat(_toConsumableArray(removalProperties), ['is_system_default', 'is_shared']));\n          _context9.next = 7;\n          return call(malApi.update, payload.id, presetDetail);\n\n        case 7:\n          _yield$call5 = _context9.sent;\n          message = _yield$call5.message;\n          _context9.next = 11;\n          return all([call(fetchPresetList), call(fetchInitDataForList, false), put(commonStore.actions.setSuccessMessage(message)), put(makeAListActions.setMalForm({\n            clearError: true,\n            error: ''\n          }))]);\n\n        case 11:\n          _context9.next = 24;\n          break;\n\n        case 13:\n          _context9.prev = 13;\n          _context9.t0 = _context9[\"catch\"](3);\n          _error$response2 = _context9.t0.response, data = _error$response2.data, status = _error$response2.status;\n\n          if (!(status === StatusCode.BAD_REQUEST)) {\n            _context9.next = 22;\n            break;\n          }\n\n          _error2 = data.message;\n          _context9.next = 20;\n          return put(makeAListActions.setMalForm({\n            error: _error2\n          }));\n\n        case 20:\n          _context9.next = 24;\n          break;\n\n        case 22:\n          _context9.next = 24;\n          return errorSaga.handleError(_context9.t0);\n\n        case 24:\n          _context9.next = 26;\n          return put(makeAListActions.setMalForm({\n            clearError: false,\n            error: ''\n          }));\n\n        case 26:\n          _context9.next = 28;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 28:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, _marked9, null, [[3, 13]]);\n}\n\nfunction getList() {\n  return _regeneratorRuntime.wrap(function getList$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          _context10.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context10.prev = 2;\n          _context10.next = 5;\n          return call(fetchPresetList);\n\n        case 5:\n          _context10.next = 11;\n          break;\n\n        case 7:\n          _context10.prev = 7;\n          _context10.t0 = _context10[\"catch\"](2);\n          _context10.next = 11;\n          return errorSaga.handleError(_context10.t0);\n\n        case 11:\n          _context10.next = 13;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 13:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, _marked10, null, [[2, 7]]);\n}\n\nfunction getDetail(_ref4) {\n  var id;\n  return _regeneratorRuntime.wrap(function getDetail$(_context11) {\n    while (1) {\n      switch (_context11.prev = _context11.next) {\n        case 0:\n          id = _ref4.payload;\n          _context11.next = 3;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 3:\n          _context11.prev = 3;\n          _context11.next = 6;\n          return call(fetchPresetDetail, id);\n\n        case 6:\n          _context11.next = 12;\n          break;\n\n        case 8:\n          _context11.prev = 8;\n          _context11.t0 = _context11[\"catch\"](3);\n          _context11.next = 12;\n          return errorSaga.handleError(_context11.t0);\n\n        case 12:\n          _context11.next = 14;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 14:\n        case \"end\":\n          return _context11.stop();\n      }\n    }\n  }, _marked11, null, [[3, 8]]);\n}\n\nfunction share(_ref5) {\n  var payload, id, shared, _yield$call6, message;\n\n  return _regeneratorRuntime.wrap(function share$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          payload = _ref5.payload;\n          _context12.next = 3;\n          return put(makeAListActions.setLoadingTable(true));\n\n        case 3:\n          _context12.prev = 3;\n          id = payload.id, shared = payload.shared;\n          _context12.next = 7;\n          return call(malApi.share, id, shared);\n\n        case 7:\n          _yield$call6 = _context12.sent;\n          message = _yield$call6.message;\n          _context12.next = 11;\n          return call(fetchPresetList);\n\n        case 11:\n          _context12.next = 13;\n          return put(commonStore.actions.setSuccessMessage(message));\n\n        case 13:\n          _context12.next = 19;\n          break;\n\n        case 15:\n          _context12.prev = 15;\n          _context12.t0 = _context12[\"catch\"](3);\n          _context12.next = 19;\n          return errorSaga.handleError(_context12.t0);\n\n        case 19:\n          _context12.next = 21;\n          return put(makeAListActions.setLoadingTable(false));\n\n        case 21:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  }, _marked12, null, [[3, 15]]);\n}\n\nfunction remove() {\n  var _yield$select, id, _yield$call7, message;\n\n  return _regeneratorRuntime.wrap(function remove$(_context13) {\n    while (1) {\n      switch (_context13.prev = _context13.next) {\n        case 0:\n          _context13.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context13.prev = 2;\n          _context13.next = 5;\n          return select(makeAListActions.selectPresetDetail);\n\n        case 5:\n          _yield$select = _context13.sent;\n          id = _yield$select.id;\n          _context13.next = 9;\n          return call(malApi.remove, id);\n\n        case 9:\n          _yield$call7 = _context13.sent;\n          message = _yield$call7.message;\n          _context13.next = 13;\n          return all([call(fetchPresetList), call(fetchInitDataForList, true)]);\n\n        case 13:\n          _context13.next = 15;\n          return put(commonStore.actions.setSuccessMessage(message));\n\n        case 15:\n          _context13.next = 21;\n          break;\n\n        case 17:\n          _context13.prev = 17;\n          _context13.t0 = _context13[\"catch\"](2);\n          _context13.next = 21;\n          return errorSaga.handleError(_context13.t0);\n\n        case 21:\n          _context13.next = 23;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 23:\n        case \"end\":\n          return _context13.stop();\n      }\n    }\n  }, _marked13, null, [[2, 17]]);\n}\n\nfunction clearDefault() {\n  var entity, _yield$call8, message;\n\n  return _regeneratorRuntime.wrap(function clearDefault$(_context14) {\n    while (1) {\n      switch (_context14.prev = _context14.next) {\n        case 0:\n          _context14.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context14.prev = 2;\n          _context14.next = 5;\n          return getEntityFromStore();\n\n        case 5:\n          entity = _context14.sent;\n          _context14.next = 8;\n          return call(malApi.clearDefault, entity);\n\n        case 8:\n          _yield$call8 = _context14.sent;\n          message = _yield$call8.message;\n          _context14.next = 12;\n          return call(fetchInitDataForList, true);\n\n        case 12:\n          _context14.next = 14;\n          return put(commonStore.actions.setSuccessMessage(message));\n\n        case 14:\n          _context14.next = 20;\n          break;\n\n        case 16:\n          _context14.prev = 16;\n          _context14.t0 = _context14[\"catch\"](2);\n          _context14.next = 20;\n          return errorSaga.handleError(_context14.t0);\n\n        case 20:\n          _context14.next = 22;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 22:\n        case \"end\":\n          return _context14.stop();\n      }\n    }\n  }, _marked14, null, [[2, 16]]);\n}\n\nfunction startMakeAListExport(exportEvent) {\n  var exportDetails, entity, requestData, data, domain, redirectUrl;\n  return _regeneratorRuntime.wrap(function startMakeAListExport$(_context15) {\n    while (1) {\n      switch (_context15.prev = _context15.next) {\n        case 0:\n          _context15.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context15.prev = 2;\n          exportDetails = exportEvent.payload;\n          _context15.next = 6;\n          return getEntityFromStore();\n\n        case 6:\n          entity = _context15.sent;\n          requestData = {\n            entity: entity,\n            destination: exportDetails.destination,\n            columns_displayed: exportDetails.displayedColumns,\n            where_conditions: exportDetails.whereCondtions,\n            sort_conditions: exportDetails.sortConditions,\n            distinct: exportDetails.distinct,\n            ignore_case: exportDetails.ignoreCase\n          };\n          _context15.next = 10;\n          return call(malApi.startMakeAListExport, requestData);\n\n        case 10:\n          data = _context15.sent;\n\n          if (!data.success) {\n            _context15.next = 24;\n            break;\n          }\n\n          if (!data.result_path) {\n            _context15.next = 18;\n            break;\n          }\n\n          domain = process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:5000/';\n          redirectUrl = \"\".concat(domain).concat(data.result_path);\n          window.open(redirectUrl);\n          _context15.next = 24;\n          break;\n\n        case 18:\n          _context15.next = 20;\n          return put(exportProcessDialogActions.setOperationId(data.operation_id));\n\n        case 20:\n          _context15.next = 22;\n          return put(exportProcessDialogActions.setCeleryId(data.celery_id));\n\n        case 22:\n          _context15.next = 24;\n          return put(exportProcessDialogActions.setOpen(true));\n\n        case 24:\n          _context15.next = 30;\n          break;\n\n        case 26:\n          _context15.prev = 26;\n          _context15.t0 = _context15[\"catch\"](2);\n          _context15.next = 30;\n          return errorSaga.handleError(_context15.t0);\n\n        case 30:\n          _context15.next = 32;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 32:\n        case \"end\":\n          return _context15.stop();\n      }\n    }\n  }, _marked15, null, [[2, 26]]);\n}\n\nfunction stopMakeAListExport(operationData) {\n  var requestData, data;\n  return _regeneratorRuntime.wrap(function stopMakeAListExport$(_context16) {\n    while (1) {\n      switch (_context16.prev = _context16.next) {\n        case 0:\n          _context16.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context16.prev = 2;\n          requestData = operationData.payload;\n          _context16.next = 6;\n          return call(malApi.stopMakeAListExport, requestData);\n\n        case 6:\n          data = _context16.sent;\n\n          if (data.success) {\n            put(commonStore.actions.setSuccessMessage(data.message));\n            put(exportProcessDialogActions.setOpen(false));\n          }\n\n          _context16.next = 14;\n          break;\n\n        case 10:\n          _context16.prev = 10;\n          _context16.t0 = _context16[\"catch\"](2);\n          _context16.next = 14;\n          return errorSaga.handleError(_context16.t0);\n\n        case 14:\n          _context16.next = 16;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 16:\n        case \"end\":\n          return _context16.stop();\n      }\n    }\n  }, _marked16, null, [[2, 10]]);\n}\n\nfunction saveAs(_ref6) {\n  var payload, id, created_at, created_by, updated_at, updated_by, is_system_default, presetDetail, data, _error$response3, _data2, status, _error3;\n\n  return _regeneratorRuntime.wrap(function saveAs$(_context17) {\n    while (1) {\n      switch (_context17.prev = _context17.next) {\n        case 0:\n          payload = _ref6.payload;\n          _context17.next = 3;\n          return put(makeAListActions.setLoadingDialog(true));\n\n        case 3:\n          _context17.prev = 3;\n          id = payload.id, created_at = payload.created_at, created_by = payload.created_by, updated_at = payload.updated_at, updated_by = payload.updated_by, is_system_default = payload.is_system_default, presetDetail = _objectWithoutProperties(payload, [\"id\", \"created_at\", \"created_by\", \"updated_at\", \"updated_by\", \"is_system_default\"]);\n          _context17.next = 7;\n          return call(malApi.create, presetDetail);\n\n        case 7:\n          data = _context17.sent;\n          _context17.next = 10;\n          return all([call(fetchPresetDetail, data.id), call(fetchPresetList), call(fetchInitDataForList, false), put(commonStore.actions.setSuccessMessage(data.message)), put(makeAListActions.setIsEditMode(true)), put(makeAListActions.setSaveAsForm({\n            open: false,\n            clearError: true,\n            error: ''\n          }))]);\n\n        case 10:\n          _context17.next = 23;\n          break;\n\n        case 12:\n          _context17.prev = 12;\n          _context17.t0 = _context17[\"catch\"](3);\n          _error$response3 = _context17.t0.response, _data2 = _error$response3.data, status = _error$response3.status;\n\n          if (!(status === StatusCode.BAD_REQUEST)) {\n            _context17.next = 21;\n            break;\n          }\n\n          _error3 = _data2.message;\n          _context17.next = 19;\n          return put(makeAListActions.setSaveAsForm({\n            error: _error3\n          }));\n\n        case 19:\n          _context17.next = 23;\n          break;\n\n        case 21:\n          _context17.next = 23;\n          return errorSaga.handleError(_context17.t0);\n\n        case 23:\n          _context17.next = 25;\n          return put(makeAListActions.setSaveAsForm({\n            clearError: false,\n            error: ''\n          }));\n\n        case 25:\n          _context17.next = 27;\n          return put(makeAListActions.setLoadingDialog(false));\n\n        case 27:\n        case \"end\":\n          return _context17.stop();\n      }\n    }\n  }, _marked17, null, [[3, 12]]);\n}\n\nfunction makeAListSaga() {\n  return _regeneratorRuntime.wrap(function makeAListSaga$(_context18) {\n    while (1) {\n      switch (_context18.prev = _context18.next) {\n        case 0:\n          _context18.next = 2;\n          return takeEvery(makeAListActions.create, create);\n\n        case 2:\n          _context18.next = 4;\n          return takeEvery(makeAListActions.getList, getList);\n\n        case 4:\n          _context18.next = 6;\n          return takeEvery(makeAListActions.getDetail, getDetail);\n\n        case 6:\n          _context18.next = 8;\n          return takeEvery(makeAListActions.share, share);\n\n        case 8:\n          _context18.next = 10;\n          return takeEvery(makeAListActions.update, update);\n\n        case 10:\n          _context18.next = 12;\n          return takeLatest(makeAListActions.remove, remove);\n\n        case 12:\n          _context18.next = 14;\n          return takeLatest(makeAListActions.open, open);\n\n        case 14:\n          _context18.next = 16;\n          return takeLatest(makeAListActions.clearDefault, clearDefault);\n\n        case 16:\n          _context18.next = 18;\n          return takeLatest(makeAListActions.exportMakeAList, startMakeAListExport);\n\n        case 18:\n          _context18.next = 20;\n          return takeLatest(makeAListActions.changeFilterType, changeFilterType);\n\n        case 20:\n          _context18.next = 22;\n          return takeLatest(makeAListActions.saveAs, saveAs);\n\n        case 22:\n          _context18.next = 24;\n          return takeLatest(makeAListActions.stopMakeAList, stopMakeAListExport);\n\n        case 24:\n        case \"end\":\n          return _context18.stop();\n      }\n    }\n  }, _marked18);\n}\n\nexport default makeAListSaga;","map":{"version":3,"sources":["D:/TTS_Reactjs/malis-3-frontend/src/store/saga/makeAListSaga.ts"],"names":["getEntityFromStore","fetchPresetList","fetchPresetDetail","fetchInitDataForCreateUpdate","fetchInitDataForList","changeFilterType","open","create","update","getList","getDetail","share","remove","clearDefault","startMakeAListExport","stopMakeAListExport","saveAs","makeAListSaga","call","put","takeEvery","select","takeLatest","all","_","errorSaga","makeAListActions","exportProcessDialogActions","commonStore","removalProperties","malApi","StatusCode","selectEntity","entity","filterType","type","state","makeAList","make_a_list_preset_list","setPresetList","id","make_a_list_preset","selectFilterType","is_user_default","setPresetDetail","getInitDataForCE","data","setInitData","isSetPresetDetail","getInitDataForList","current_default_preset","system_default_preset","make_a_list","permissions","setPresetDefault","setSystemPreset","setPermissions","payload","setLoadingTable","setFilterType","handleError","actions","setLoadingPage","checkPermissions","success","setOpen","response","message","setErrorMessage","created_at","created_by","updated_at","updated_by","is_system_default","presetDetail","setSuccessMessage","setIsEditMode","setMalForm","clearError","error","status","BAD_REQUEST","omit","shared","selectPresetDetail","exportEvent","exportDetails","requestData","destination","columns_displayed","displayedColumns","where_conditions","whereCondtions","sort_conditions","sortConditions","distinct","ignore_case","ignoreCase","result_path","domain","process","env","NEXT_PUBLIC_BACKEND_URL","redirectUrl","window","setOperationId","operation_id","setCeleryId","celery_id","operationData","setLoadingDialog","setSaveAsForm","exportMakeAList","stopMakeAList"],"mappings":"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","sourcesContent":["import { call, put, takeEvery, select, takeLatest, all } from 'redux-saga/effects'\nimport _ from 'lodash'\n\nimport * as errorSaga from '@/store/saga/errorSaga'\n\nimport { makeAListActions, exportProcessDialogActions, commonStore } from '@/store/reducers'\n\nimport { removalProperties } from '@/utils/constant'\nimport malApi from '@/apis/makeAList.api'\nimport { StatusCode } from '@/utils/StatusCode'\n\nfunction* getEntityFromStore() {\n  const entity = yield select(commonStore.selectEntity)\n  return entity\n}\n\nfunction* fetchPresetList(filterType = '') {\n  let type = filterType\n  if (!type) {\n    type = yield select((state) => state.makeAList.filterType)\n  }\n  const entity = yield getEntityFromStore()\n  const { make_a_list_preset_list } = yield call(malApi.getList, {\n    entity,\n    type\n  })\n  yield put(makeAListActions.setPresetList(make_a_list_preset_list))\n}\n\nfunction* fetchPresetDetail(id) {\n  const { make_a_list_preset } = yield call(malApi.getDetail, id)\n  const filterType = yield select(makeAListActions.selectFilterType)\n  if (filterType === 'shared') {\n    make_a_list_preset.is_user_default = false\n  }\n  yield put(makeAListActions.setPresetDetail(make_a_list_preset))\n}\n\nfunction* fetchInitDataForCreateUpdate() {\n  const entity = yield getEntityFromStore()\n  const data = yield call(malApi.getInitDataForCE, entity)\n  yield put(makeAListActions.setInitData(data))\n}\n\nfunction* fetchInitDataForList(isSetPresetDetail) {\n  const entity = yield getEntityFromStore()\n  const {\n    current_default_preset,\n    system_default_preset,\n    permissions: { make_a_list }\n  } = yield call(malApi.getInitDataForList, entity)\n  yield all([\n    put(makeAListActions.setPresetDefault(current_default_preset)),\n    put(makeAListActions.setSystemPreset(system_default_preset)),\n    put(makeAListActions.setPermissions(make_a_list))\n  ])\n  isSetPresetDetail && (yield put(makeAListActions.setPresetDetail(current_default_preset)))\n}\n\nfunction* changeFilterType({ payload: filterType }) {\n  yield put(makeAListActions.setLoadingTable(true))\n  try {\n    yield call(fetchPresetList, filterType)\n    yield put(makeAListActions.setFilterType(filterType))\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n  yield put(makeAListActions.setLoadingTable(false))\n}\n\nfunction* open() {\n  yield put(commonStore.actions.setLoadingPage(true))\n  const entity = yield getEntityFromStore()\n\n  try {\n    const { success } = yield call(malApi.checkPermissions, entity)\n    if (success) {\n      yield all([call(fetchPresetList), call(fetchInitDataForList, true), call(fetchInitDataForCreateUpdate)])\n\n      yield put(makeAListActions.setOpen(true))\n    }\n  } catch (error) {\n    const { data } = error.response\n    const { message, success } = data\n    if (!success) {\n      yield put(commonStore.actions.setErrorMessage(message))\n      yield put({\n        type: `${entity}/setPermissions`,\n        payload: { make_a_list: false }\n      })\n    }\n  }\n\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* create({ payload }: ReturnType<typeof makeAListActions.create>) {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    const { id, created_at, created_by, updated_at, updated_by, is_system_default, ...presetDetail } = payload\n    const data = yield call(malApi.create, presetDetail)\n    yield all([\n      call(fetchPresetDetail, data.id),\n      call(fetchPresetList),\n      call(fetchInitDataForList, false),\n      put(commonStore.actions.setSuccessMessage(data.message)),\n      put(makeAListActions.setIsEditMode(true)),\n      put(\n        makeAListActions.setMalForm({\n          clearError: true,\n          error: ''\n        })\n      )\n    ])\n  } catch (error) {\n    const {\n      response: { data, status }\n    } = error\n    if (status === StatusCode.BAD_REQUEST) {\n      const error = data.message\n      yield put(makeAListActions.setMalForm({ error }))\n    } else {\n      yield errorSaga.handleError(error)\n    }\n  }\n  yield put(makeAListActions.setMalForm({ clearError: false, error: '' }))\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* update({ payload }: ReturnType<typeof makeAListActions.update>) {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    const presetDetail = _.omit(payload, [...removalProperties, 'is_system_default', 'is_shared'])\n    const { message } = yield call(malApi.update, payload.id, presetDetail)\n    yield all([\n      call(fetchPresetList),\n      call(fetchInitDataForList, false),\n      put(commonStore.actions.setSuccessMessage(message)),\n      put(\n        makeAListActions.setMalForm({\n          clearError: true,\n          error: ''\n        })\n      )\n    ])\n  } catch (error) {\n    const {\n      response: { data, status }\n    } = error\n    if (status === StatusCode.BAD_REQUEST) {\n      const error = data.message\n      yield put(makeAListActions.setMalForm({ error }))\n    } else {\n      yield errorSaga.handleError(error)\n    }\n  }\n  yield put(makeAListActions.setMalForm({ clearError: false, error: '' }))\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* getList() {\n  yield put(commonStore.actions.setLoadingPage(true))\n\n  try {\n    yield call(fetchPresetList)\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* getDetail({ payload: id }) {\n  yield put(commonStore.actions.setLoadingPage(true))\n\n  try {\n    yield call(fetchPresetDetail, id)\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* share({ payload }: ReturnType<typeof makeAListActions.share>) {\n  yield put(makeAListActions.setLoadingTable(true))\n  try {\n    const { id, shared } = payload\n    const { message } = yield call(malApi.share, id, shared)\n    yield call(fetchPresetList)\n    yield put(commonStore.actions.setSuccessMessage(message))\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n  yield put(makeAListActions.setLoadingTable(false))\n}\n\nfunction* remove() {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    const { id } = yield select(makeAListActions.selectPresetDetail)\n    const { message } = yield call(malApi.remove, id)\n    yield all([call(fetchPresetList), call(fetchInitDataForList, true)])\n    yield put(commonStore.actions.setSuccessMessage(message))\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* clearDefault() {\n  yield put(commonStore.actions.setLoadingPage(true))\n\n  try {\n    const entity = yield getEntityFromStore()\n    const { message } = yield call(malApi.clearDefault, entity)\n    yield call(fetchInitDataForList, true)\n    yield put(commonStore.actions.setSuccessMessage(message))\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* startMakeAListExport(exportEvent) {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    const exportDetails = exportEvent.payload\n    const entity = yield getEntityFromStore()\n    const requestData = {\n      entity: entity,\n      destination: exportDetails.destination,\n      columns_displayed: exportDetails.displayedColumns,\n      where_conditions: exportDetails.whereCondtions,\n      sort_conditions: exportDetails.sortConditions,\n      distinct: exportDetails.distinct,\n      ignore_case: exportDetails.ignoreCase\n    }\n    const data = yield call(malApi.startMakeAListExport, requestData)\n    if (data.success) {\n      if (data.result_path) {\n        const domain = process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:5000/'\n        const redirectUrl = `${domain}${data.result_path}`\n        window.open(redirectUrl)\n      } else {\n        yield put(exportProcessDialogActions.setOperationId(data.operation_id))\n        yield put(exportProcessDialogActions.setCeleryId(data.celery_id))\n        yield put(exportProcessDialogActions.setOpen(true))\n      }\n    }\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* stopMakeAListExport(operationData) {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    const requestData = operationData.payload\n    const data = yield call(malApi.stopMakeAListExport, requestData)\n    if (data.success) {\n      put(commonStore.actions.setSuccessMessage(data.message))\n      put(exportProcessDialogActions.setOpen(false))\n    }\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* saveAs({ payload }: ReturnType<typeof makeAListActions.saveAs>) {\n  yield put(makeAListActions.setLoadingDialog(true))\n  try {\n    const { id, created_at, created_by, updated_at, updated_by, is_system_default, ...presetDetail } = payload\n    const data = yield call(malApi.create, presetDetail)\n    yield all([\n      call(fetchPresetDetail, data.id),\n      call(fetchPresetList),\n      call(fetchInitDataForList, false),\n      put(commonStore.actions.setSuccessMessage(data.message)),\n      put(makeAListActions.setIsEditMode(true)),\n      put(\n        makeAListActions.setSaveAsForm({\n          open: false,\n          clearError: true,\n          error: ''\n        })\n      )\n    ])\n  } catch (error) {\n    const {\n      response: { data, status }\n    } = error\n    if (status === StatusCode.BAD_REQUEST) {\n      const error = data.message\n      yield put(makeAListActions.setSaveAsForm({ error }))\n    } else {\n      yield errorSaga.handleError(error)\n    }\n  }\n  yield put(makeAListActions.setSaveAsForm({ clearError: false, error: '' }))\n  yield put(makeAListActions.setLoadingDialog(false))\n}\n\nfunction* makeAListSaga() {\n  yield takeEvery(makeAListActions.create, create)\n  yield takeEvery(makeAListActions.getList, getList)\n  yield takeEvery(makeAListActions.getDetail, getDetail)\n  yield takeEvery(makeAListActions.share, share)\n  yield takeEvery(makeAListActions.update, update)\n  yield takeLatest(makeAListActions.remove, remove)\n  yield takeLatest(makeAListActions.open, open)\n  yield takeLatest(makeAListActions.clearDefault, clearDefault)\n  yield takeLatest(makeAListActions.exportMakeAList, startMakeAListExport)\n  yield takeLatest(makeAListActions.changeFilterType, changeFilterType)\n  yield takeLatest(makeAListActions.saveAs, saveAs)\n  yield takeLatest(makeAListActions.stopMakeAList, stopMakeAListExport)\n}\n\nexport default makeAListSaga\n"]},"metadata":{},"sourceType":"module"}