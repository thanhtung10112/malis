{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\TTS_Reactjs\\\\malis-3-frontend\\\\src\\\\components\\\\Dialog\\\\Module\\\\Drawing\\\\TabParts.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState, useEffect } from 'react';\nimport useStyles from './styles';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Paper, Link } from '@material-ui/core';\nimport { DataTable, CreateIcon, DeleteIcon, useConfirm, AppButton, DialogPart } from '@/components';\nimport _ from 'lodash';\nimport { defaultProperties, rightColumn } from '@/utils/columnProperties';\nimport { drawingStore, itemStore, partStore } from '@/store/reducers';\nimport { isAssemblyByDpn } from '@/utils/isAssembly';\n\nconst TabComponent = () => {\n  const classes = useStyles();\n  const {\n    confirm\n  } = useConfirm();\n  const {\n    0: selectedRows,\n    1: setSelectedRows\n  } = useState([]);\n  const dispatch = useDispatch();\n  const componentList = useSelector(drawingStore.selectComponentList);\n  useEffect(() => {\n    setSelectedRows([]);\n  }, [componentList]);\n\n  const handleOpenComponentDialog = partEntity => () => {\n    dispatch(drawingStore.sagaOpenCreatePartDialog(partEntity));\n  };\n\n  const handleSelectRows = ({\n    selectionModel\n  }) => {\n    setSelectedRows(selectionModel);\n  };\n\n  const buildDescription = () => {\n    if (selectedRows.length > 1) {\n      return `Are you sure you want to delete ${selectedRows.length} selected parts?`;\n    }\n\n    return `Are you sure you want to delete ${selectedRows.length} selected part?`;\n  };\n\n  const handleDeleteItems = async () => {\n    const description = buildDescription();\n    const result = await confirm({\n      description\n    });\n\n    if (result === 'OK') {\n      const parts = _.map(selectedRows, partId => {\n        const {\n          dpn,\n          id\n        } = _.find(componentList, {\n          id: partId\n        });\n\n        return {\n          entity_id: dpn,\n          id\n        };\n      });\n\n      dispatch(itemStore.sagaRemove(parts));\n    }\n  };\n\n  const handleOpenPartDialog = (id, dpn) => event => {\n    event.preventDefault();\n    const entity = isAssemblyByDpn(dpn) ? 'assembly' : 'item';\n    dispatch(partStore.sagaOpenUpdateDialog({\n      id,\n      entity\n    }));\n  };\n\n  const handleClosePartDialog = () => {\n    dispatch(drawingStore.sagaGetDrawingPartList());\n  };\n\n  const newButtonDropdown = [{\n    label: 'Item',\n    onClick: handleOpenComponentDialog('item')\n  }, {\n    label: 'Assembly',\n    onClick: handleOpenComponentDialog('assembly')\n  }];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.buttonGroupRoot,\n      children: [/*#__PURE__*/_jsxDEV(AppButton, {\n        startIcon: /*#__PURE__*/_jsxDEV(CreateIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 31\n        }, this),\n        item: newButtonDropdown,\n        children: \"New\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AppButton, {\n        startIcon: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 31\n        }, this),\n        onClick: handleDeleteItems,\n        disabled: selectedRows.length === 0,\n        children: \"Remove\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 1,\n      children: /*#__PURE__*/_jsxDEV(DataTable, {\n        rows: componentList,\n        checkboxSelection: true,\n        selectionModel: selectedRows,\n        onSelectionModelChange: handleSelectRows,\n        onCellClick: (params, event) => {\n          if (['dpn', 'reference_to'].includes(params.field)) {\n            event.stopPropagation();\n          }\n        },\n        columns: [_objectSpread(_objectSpread({}, defaultProperties), {}, {\n          field: 'dpn',\n          headerName: 'Item',\n          flex: 0.2,\n\n          renderCell(params) {\n            const {\n              value,\n              id\n            } = params;\n            return /*#__PURE__*/_jsxDEV(Link, {\n              href: \"#\",\n              onClick: handleOpenPartDialog(id, value),\n              children: value\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 19\n            }, this);\n          }\n\n        }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n          field: 'reference_to',\n          headerName: 'Referenced Part Number',\n          flex: 0.2,\n\n          renderCell(params) {\n            const {\n              value,\n              row\n            } = params;\n            return /*#__PURE__*/_jsxDEV(Link, {\n              href: \"#\",\n              onClick: handleOpenPartDialog(row.id_ref, value),\n              children: value\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 19\n            }, this);\n          }\n\n        }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n          field: 'description',\n          headerName: 'Description',\n          flex: 0.2\n        }), _objectSpread(_objectSpread(_objectSpread({}, defaultProperties), rightColumn), {}, {\n          field: 'mass',\n          headerName: 'Mass (kg)',\n          flex: 0.1\n        }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n          field: 'raw_unit',\n          headerName: 'Unit',\n          flex: 0.1\n        }), _objectSpread(_objectSpread({}, defaultProperties), {}, {\n          field: 'material',\n          headerName: 'Material',\n          flex: 0.1\n        })],\n        hideFooter: true,\n        tableHeight: 385\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogPart, {\n      onClose: handleClosePartDialog\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nexport default TabComponent;","map":{"version":3,"sources":["D:/TTS_Reactjs/malis-3-frontend/src/components/Dialog/Module/Drawing/TabParts.tsx"],"names":["useState","useEffect","useStyles","useDispatch","useSelector","Paper","Link","DataTable","CreateIcon","DeleteIcon","useConfirm","AppButton","DialogPart","_","defaultProperties","rightColumn","drawingStore","itemStore","partStore","isAssemblyByDpn","TabComponent","classes","confirm","selectedRows","setSelectedRows","dispatch","componentList","selectComponentList","handleOpenComponentDialog","partEntity","sagaOpenCreatePartDialog","handleSelectRows","selectionModel","buildDescription","length","handleDeleteItems","description","result","parts","map","partId","dpn","id","find","entity_id","sagaRemove","handleOpenPartDialog","event","preventDefault","entity","sagaOpenUpdateDialog","handleClosePartDialog","sagaGetDrawingPartList","newButtonDropdown","label","onClick","buttonGroupRoot","params","includes","field","stopPropagation","headerName","flex","renderCell","value","row","id_ref"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport useStyles from './styles'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport { Paper, Link } from '@material-ui/core'\nimport { DataTable, CreateIcon, DeleteIcon, useConfirm, AppButton, DialogPart } from '@/components'\n\nimport _ from 'lodash'\nimport { defaultProperties, rightColumn } from '@/utils/columnProperties'\nimport { drawingStore, itemStore, partStore } from '@/store/reducers'\nimport { isAssemblyByDpn } from '@/utils/isAssembly'\n\nimport type { PartEntity } from '@/types/Part'\n\nconst TabComponent: React.FC = () => {\n  const classes = useStyles()\n  const { confirm } = useConfirm()\n\n  const [selectedRows, setSelectedRows] = useState<number[]>([])\n\n  const dispatch = useDispatch()\n  const componentList = useSelector(drawingStore.selectComponentList)\n\n  useEffect(() => {\n    setSelectedRows([])\n  }, [componentList])\n\n  const handleOpenComponentDialog = (partEntity: PartEntity) => () => {\n    dispatch(drawingStore.sagaOpenCreatePartDialog(partEntity))\n  }\n\n  const handleSelectRows = ({ selectionModel }) => {\n    setSelectedRows(selectionModel)\n  }\n\n  const buildDescription = () => {\n    if (selectedRows.length > 1) {\n      return `Are you sure you want to delete ${selectedRows.length} selected parts?`\n    }\n    return `Are you sure you want to delete ${selectedRows.length} selected part?`\n  }\n\n  const handleDeleteItems = async () => {\n    const description = buildDescription()\n    const result = await confirm({\n      description\n    })\n    if (result === 'OK') {\n      const parts = _.map(selectedRows, (partId) => {\n        const { dpn, id } = _.find(componentList, { id: partId })\n        return { entity_id: dpn, id }\n      })\n      dispatch(itemStore.sagaRemove(parts))\n    }\n  }\n\n  const handleOpenPartDialog = (id: number, dpn: string) => (event) => {\n    event.preventDefault()\n    const entity = isAssemblyByDpn(dpn) ? 'assembly' : 'item'\n    dispatch(partStore.sagaOpenUpdateDialog({ id, entity }))\n  }\n\n  const handleClosePartDialog = () => {\n    dispatch(drawingStore.sagaGetDrawingPartList())\n  }\n\n  const newButtonDropdown = [\n    {\n      label: 'Item',\n      onClick: handleOpenComponentDialog('item')\n    },\n    {\n      label: 'Assembly',\n      onClick: handleOpenComponentDialog('assembly')\n    }\n  ]\n\n  return (\n    <>\n      <div className={classes.buttonGroupRoot}>\n        <AppButton startIcon={<CreateIcon />} item={newButtonDropdown}>\n          New\n        </AppButton>\n        <AppButton startIcon={<DeleteIcon />} onClick={handleDeleteItems} disabled={selectedRows.length === 0}>\n          Remove\n        </AppButton>\n      </div>\n      <Paper elevation={1}>\n        <DataTable\n          rows={componentList}\n          checkboxSelection\n          selectionModel={selectedRows}\n          onSelectionModelChange={handleSelectRows}\n          onCellClick={(params, event) => {\n            if (['dpn', 'reference_to'].includes(params.field)) {\n              event.stopPropagation()\n            }\n          }}\n          columns={[\n            {\n              ...defaultProperties,\n              field: 'dpn',\n              headerName: 'Item',\n              flex: 0.2,\n              renderCell(params) {\n                const { value, id } = params\n                return (\n                  <Link href=\"#\" onClick={handleOpenPartDialog(id as number, value as string)}>\n                    {value}\n                  </Link>\n                )\n              }\n            },\n            {\n              ...defaultProperties,\n              field: 'reference_to',\n              headerName: 'Referenced Part Number',\n              flex: 0.2,\n              renderCell(params) {\n                const { value, row } = params\n                return (\n                  <Link href=\"#\" onClick={handleOpenPartDialog(row.id_ref, value as string)}>\n                    {value}\n                  </Link>\n                )\n              }\n            },\n            {\n              ...defaultProperties,\n              field: 'description',\n              headerName: 'Description',\n              flex: 0.2\n            },\n            {\n              ...defaultProperties,\n              ...rightColumn,\n              field: 'mass',\n              headerName: 'Mass (kg)',\n              flex: 0.1\n            },\n            {\n              ...defaultProperties,\n              field: 'raw_unit',\n              headerName: 'Unit',\n              flex: 0.1\n            },\n            {\n              ...defaultProperties,\n              field: 'material',\n              headerName: 'Material',\n              flex: 0.1\n            }\n          ]}\n          hideFooter\n          tableHeight={385}\n        />\n      </Paper>\n      <DialogPart onClose={handleClosePartDialog} />\n    </>\n  )\n}\n\nexport default TabComponent\n"]},"metadata":{},"sourceType":"module"}