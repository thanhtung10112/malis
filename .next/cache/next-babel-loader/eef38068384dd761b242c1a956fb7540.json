{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(fetchInitDataForList),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(fetchList),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(getGroupList),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(createGroup),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(fetchGroupInitDataForCE),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(openGroupCreateDialog),\n    _marked7 = /*#__PURE__*/_regeneratorRuntime.mark(openUpdateDialog),\n    _marked8 = /*#__PURE__*/_regeneratorRuntime.mark(updateGroup),\n    _marked9 = /*#__PURE__*/_regeneratorRuntime.mark(getGroupPermissions),\n    _marked10 = /*#__PURE__*/_regeneratorRuntime.mark(updateGroupPermissions),\n    _marked11 = /*#__PURE__*/_regeneratorRuntime.mark(closeGroupDialog),\n    _marked12 = /*#__PURE__*/_regeneratorRuntime.mark(groupSaga);\n\nimport { takeEvery, put, putResolve } from 'redux-saga/effects';\nimport { select, call, all } from 'typed-redux-saga';\nimport * as errorSaga from '@/store/saga/errorSaga';\nimport groupApi from '@/apis/group.api';\nimport { advancedFilterActions, commonStore, groupStore } from '@/store/reducers';\n\nfunction fetchInitDataForList() {\n  var data;\n  return _regeneratorRuntime.wrap(function fetchInitDataForList$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return call(groupApi.getInitDataForList);\n\n        case 2:\n          data = _context.sent;\n          _context.next = 5;\n          return put(groupStore.actions.setInitDataForList(data));\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n\nfunction fetchList() {\n  var _yield$all, tableState, searchQuery, filterData, page, per_page, data;\n\n  return _regeneratorRuntime.wrap(function fetchList$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          return _context2.delegateYield(all({\n            tableState: select(commonStore.selectTableState),\n            searchQuery: select(commonStore.selectSearchQuery),\n            filterData: select(advancedFilterActions.selectFilterData)\n          }), \"t0\", 1);\n\n        case 1:\n          _yield$all = _context2.t0;\n          tableState = _yield$all.tableState;\n          searchQuery = _yield$all.searchQuery;\n          filterData = _yield$all.filterData;\n          page = tableState.page, per_page = tableState.per_page;\n          _context2.next = 8;\n          return call(groupApi.getList, _objectSpread({\n            per_page: per_page,\n            page: page,\n            s: searchQuery\n          }, filterData));\n\n        case 8:\n          data = _context2.sent;\n          _context2.next = 11;\n          return put(commonStore.actions.setTableState({\n            total_items: data.total_items\n          }));\n\n        case 11:\n          _context2.next = 13;\n          return put(groupStore.actions.setDataList(data.group_list));\n\n        case 13:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n\nfunction getGroupList() {\n  var permissions;\n  return _regeneratorRuntime.wrap(function getGroupList$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context3.prev = 2;\n          _context3.next = 5;\n          return call(fetchInitDataForList);\n\n        case 5:\n          return _context3.delegateYield(select(groupStore.selectPermissions), \"t0\", 6);\n\n        case 6:\n          permissions = _context3.t0;\n\n          if (!permissions.view) {\n            _context3.next = 10;\n            break;\n          }\n\n          _context3.next = 10;\n          return call(fetchList);\n\n        case 10:\n          _context3.next = 16;\n          break;\n\n        case 12:\n          _context3.prev = 12;\n          _context3.t1 = _context3[\"catch\"](2);\n          _context3.next = 16;\n          return errorSaga.handleError(_context3.t1);\n\n        case 16:\n          _context3.next = 18;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 18:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[2, 12]]);\n}\n\nfunction createGroup(_ref) {\n  var payload, _yield$call, message;\n\n  return _regeneratorRuntime.wrap(function createGroup$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          payload = _ref.payload;\n          _context4.next = 3;\n          return put(groupStore.actions.setDialogStateLoading(true));\n\n        case 3:\n          _context4.prev = 3;\n          _context4.next = 6;\n          return call(fetchGroupInitDataForCE);\n\n        case 6:\n          _context4.next = 8;\n          return call(groupApi.create, payload);\n\n        case 8:\n          _yield$call = _context4.sent;\n          message = _yield$call.message;\n          _context4.next = 12;\n          return all([put(commonStore.actions.setSuccessMessage(message)), put(groupStore.actions.resetDetail())]);\n\n        case 12:\n          _context4.next = 18;\n          break;\n\n        case 14:\n          _context4.prev = 14;\n          _context4.t0 = _context4[\"catch\"](3);\n          _context4.next = 18;\n          return errorSaga.handleError(_context4.t0);\n\n        case 18:\n          _context4.next = 20;\n          return put(groupStore.actions.setDialogStateLoading(false));\n\n        case 20:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, null, [[3, 14]]);\n}\n\nfunction fetchGroupInitDataForCE() {\n  var data;\n  return _regeneratorRuntime.wrap(function fetchGroupInitDataForCE$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return call(groupApi.getInitDataForCE);\n\n        case 2:\n          data = _context5.sent;\n          _context5.next = 5;\n          return put(groupStore.actions.setInitDataForCE(data));\n\n        case 5:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}\n\nfunction openGroupCreateDialog() {\n  return _regeneratorRuntime.wrap(function openGroupCreateDialog$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context6.prev = 2;\n          _context6.next = 5;\n          return call(fetchGroupInitDataForCE);\n\n        case 5:\n          _context6.next = 7;\n          return put(groupStore.actions.setDialogStateOpen(true));\n\n        case 7:\n          _context6.next = 13;\n          break;\n\n        case 9:\n          _context6.prev = 9;\n          _context6.t0 = _context6[\"catch\"](2);\n          _context6.next = 13;\n          return errorSaga.handleError(_context6.t0);\n\n        case 13:\n          _context6.next = 15;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 15:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6, null, [[2, 9]]);\n}\n\nfunction openUpdateDialog(_ref2) {\n  var id, _yield$call2, group;\n\n  return _regeneratorRuntime.wrap(function openUpdateDialog$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          id = _ref2.payload;\n          _context7.next = 3;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 3:\n          _context7.prev = 3;\n          _context7.next = 6;\n          return call(fetchGroupInitDataForCE);\n\n        case 6:\n          _context7.next = 8;\n          return call(groupApi.getDetail, id);\n\n        case 8:\n          _yield$call2 = _context7.sent;\n          group = _yield$call2.group;\n          _context7.next = 12;\n          return put(groupStore.actions.setDetail(group));\n\n        case 12:\n          _context7.next = 14;\n          return put(groupStore.actions.setDialogState({\n            open: true,\n            editMode: true\n          }));\n\n        case 14:\n          _context7.next = 20;\n          break;\n\n        case 16:\n          _context7.prev = 16;\n          _context7.t0 = _context7[\"catch\"](3);\n          _context7.next = 20;\n          return errorSaga.handleError(_context7.t0);\n\n        case 20:\n          _context7.next = 22;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 22:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7, null, [[3, 16]]);\n}\n\nfunction updateGroup(_ref3) {\n  var payload, id, formData, _yield$call3, message;\n\n  return _regeneratorRuntime.wrap(function updateGroup$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          payload = _ref3.payload;\n          _context8.next = 3;\n          return put(groupStore.actions.setDialogStateLoading(true));\n\n        case 3:\n          _context8.prev = 3;\n          id = payload.id, formData = payload.formData;\n          _context8.next = 7;\n          return call(groupApi.update, id, formData);\n\n        case 7:\n          _yield$call3 = _context8.sent;\n          message = _yield$call3.message;\n          _context8.next = 11;\n          return call(closeGroupDialog);\n\n        case 11:\n          _context8.next = 13;\n          return put(commonStore.actions.setSuccessMessage(message));\n\n        case 13:\n          _context8.next = 19;\n          break;\n\n        case 15:\n          _context8.prev = 15;\n          _context8.t0 = _context8[\"catch\"](3);\n          _context8.next = 19;\n          return errorSaga.handleError(_context8.t0);\n\n        case 19:\n          _context8.next = 21;\n          return put(groupStore.actions.setDialogStateLoading(false));\n\n        case 21:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8, null, [[3, 15]]);\n}\n\nfunction getGroupPermissions() {\n  var data;\n  return _regeneratorRuntime.wrap(function getGroupPermissions$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context9.prev = 2;\n          _context9.next = 5;\n          return call(fetchInitDataForList);\n\n        case 5:\n          _context9.next = 7;\n          return call(groupApi.getPermissionsList);\n\n        case 7:\n          data = _context9.sent;\n          _context9.next = 10;\n          return put(groupStore.actions.setGroupPermissions(data));\n\n        case 10:\n          _context9.next = 16;\n          break;\n\n        case 12:\n          _context9.prev = 12;\n          _context9.t0 = _context9[\"catch\"](2);\n          _context9.next = 16;\n          return errorSaga.handleError(_context9.t0);\n\n        case 16:\n          _context9.next = 18;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 18:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, _marked9, null, [[2, 12]]);\n}\n\nfunction updateGroupPermissions(_ref4) {\n  var payload, _yield$call4, message;\n\n  return _regeneratorRuntime.wrap(function updateGroupPermissions$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          payload = _ref4.payload;\n          _context10.next = 3;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 3:\n          _context10.prev = 3;\n          _context10.next = 6;\n          return call(groupApi.updatePermissionsList, payload);\n\n        case 6:\n          _yield$call4 = _context10.sent;\n          message = _yield$call4.message;\n          _context10.next = 10;\n          return put(commonStore.actions.setSuccessMessage(message));\n\n        case 10:\n          _context10.next = 16;\n          break;\n\n        case 12:\n          _context10.prev = 12;\n          _context10.t0 = _context10[\"catch\"](3);\n          _context10.next = 16;\n          return errorSaga.handleError(_context10.t0);\n\n        case 16:\n          _context10.next = 18;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 18:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, _marked10, null, [[3, 12]]);\n}\n\nfunction closeGroupDialog() {\n  return _regeneratorRuntime.wrap(function closeGroupDialog$(_context11) {\n    while (1) {\n      switch (_context11.prev = _context11.next) {\n        case 0:\n          _context11.prev = 0;\n          _context11.next = 3;\n          return putResolve(groupStore.actions.setDialogStateOpen(false));\n\n        case 3:\n          _context11.next = 5;\n          return call(getGroupList);\n\n        case 5:\n          _context11.next = 7;\n          return put(groupStore.actions.resetDetail());\n\n        case 7:\n          _context11.next = 13;\n          break;\n\n        case 9:\n          _context11.prev = 9;\n          _context11.t0 = _context11[\"catch\"](0);\n          _context11.next = 13;\n          return errorSaga.handleError(_context11.t0);\n\n        case 13:\n        case \"end\":\n          return _context11.stop();\n      }\n    }\n  }, _marked11, null, [[0, 9]]);\n}\n\nfunction groupSaga() {\n  return _regeneratorRuntime.wrap(function groupSaga$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          _context12.next = 2;\n          return takeEvery(groupStore.sagaGetList, getGroupList);\n\n        case 2:\n          _context12.next = 4;\n          return takeEvery(groupStore.sagaCreate, createGroup);\n\n        case 4:\n          _context12.next = 6;\n          return takeEvery(groupStore.sagaOpenUpdateDialog, openUpdateDialog);\n\n        case 6:\n          _context12.next = 8;\n          return takeEvery(groupStore.sagaUpdate, updateGroup);\n\n        case 8:\n          _context12.next = 10;\n          return takeEvery(groupStore.sagaCloseDialog, closeGroupDialog);\n\n        case 10:\n          _context12.next = 12;\n          return takeEvery(groupStore.sagaOpenCreateDialog, openGroupCreateDialog);\n\n        case 12:\n          _context12.next = 14;\n          return takeEvery(groupStore.sagaGetGroupPermissions, getGroupPermissions);\n\n        case 14:\n          _context12.next = 16;\n          return takeEvery(groupStore.sagaUpdateGroupPermissions, updateGroupPermissions);\n\n        case 16:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  }, _marked12);\n}\n\nexport default groupSaga;","map":{"version":3,"sources":["D:/TTS_Reactjs/malis-3-frontend/src/store/saga/group.saga.ts"],"names":["fetchInitDataForList","fetchList","getGroupList","createGroup","fetchGroupInitDataForCE","openGroupCreateDialog","openUpdateDialog","updateGroup","getGroupPermissions","updateGroupPermissions","closeGroupDialog","groupSaga","takeEvery","put","putResolve","select","call","all","errorSaga","groupApi","advancedFilterActions","commonStore","groupStore","getInitDataForList","data","actions","setInitDataForList","tableState","selectTableState","searchQuery","selectSearchQuery","filterData","selectFilterData","page","per_page","getList","s","setTableState","total_items","setDataList","group_list","setLoadingPage","selectPermissions","permissions","view","handleError","payload","setDialogStateLoading","create","message","setSuccessMessage","resetDetail","getInitDataForCE","setInitDataForCE","setDialogStateOpen","id","getDetail","group","setDetail","setDialogState","open","editMode","formData","update","getPermissionsList","setGroupPermissions","updatePermissionsList","sagaGetList","sagaCreate","sagaOpenUpdateDialog","sagaUpdate","sagaCloseDialog","sagaOpenCreateDialog","sagaGetGroupPermissions","sagaUpdateGroupPermissions"],"mappings":"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","sourcesContent":["import { takeEvery, put, putResolve } from 'redux-saga/effects'\n\nimport { select, call, all } from 'typed-redux-saga'\n\nimport * as errorSaga from '@/store/saga/errorSaga'\n\nimport groupApi from '@/apis/group.api'\n\nimport { advancedFilterActions, commonStore, groupStore } from '@/store/reducers'\n\nfunction* fetchInitDataForList() {\n  const data = yield call(groupApi.getInitDataForList)\n  yield put(groupStore.actions.setInitDataForList(data))\n}\n\nfunction* fetchList() {\n  const { tableState, searchQuery, filterData } = yield* all({\n    tableState: select(commonStore.selectTableState),\n    searchQuery: select(commonStore.selectSearchQuery),\n    filterData: select(advancedFilterActions.selectFilterData)\n  })\n  const { page, per_page } = tableState\n  const data = yield call(groupApi.getList, {\n    per_page,\n    page,\n    s: searchQuery,\n    ...filterData\n  })\n  yield put(commonStore.actions.setTableState({ total_items: data.total_items }))\n  yield put(groupStore.actions.setDataList(data.group_list))\n}\n\nfunction* getGroupList() {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    yield call(fetchInitDataForList)\n    const permissions = yield* select(groupStore.selectPermissions)\n    if (permissions.view) {\n      yield call(fetchList)\n    }\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* createGroup({ payload }: ReturnType<typeof groupStore.sagaCreate>) {\n  yield put(groupStore.actions.setDialogStateLoading(true))\n\n  try {\n    yield call(fetchGroupInitDataForCE)\n    const { message } = yield call(groupApi.create, payload)\n    yield all([put(commonStore.actions.setSuccessMessage(message)), put(groupStore.actions.resetDetail())])\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n  yield put(groupStore.actions.setDialogStateLoading(false))\n}\n\nfunction* fetchGroupInitDataForCE() {\n  const data = yield call(groupApi.getInitDataForCE)\n  yield put(groupStore.actions.setInitDataForCE(data))\n}\n\nfunction* openGroupCreateDialog() {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    yield call(fetchGroupInitDataForCE)\n    yield put(groupStore.actions.setDialogStateOpen(true))\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* openUpdateDialog({ payload: id }: ReturnType<typeof groupStore.sagaOpenUpdateDialog>) {\n  yield put(commonStore.actions.setLoadingPage(true))\n\n  try {\n    yield call(fetchGroupInitDataForCE)\n    const { group } = yield call(groupApi.getDetail, id)\n    yield put(groupStore.actions.setDetail(group))\n    yield put(groupStore.actions.setDialogState({ open: true, editMode: true }))\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* updateGroup({ payload }: ReturnType<typeof groupStore.sagaUpdate>) {\n  yield put(groupStore.actions.setDialogStateLoading(true))\n\n  try {\n    const { id, formData } = payload\n    const { message } = yield call(groupApi.update, id, formData)\n    yield call(closeGroupDialog)\n    yield put(commonStore.actions.setSuccessMessage(message))\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n\n  yield put(groupStore.actions.setDialogStateLoading(false))\n}\n\nfunction* getGroupPermissions() {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    yield call(fetchInitDataForList)\n    const data = yield call(groupApi.getPermissionsList)\n    yield put(groupStore.actions.setGroupPermissions(data))\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* updateGroupPermissions({ payload }) {\n  yield put(commonStore.actions.setLoadingPage(true))\n\n  try {\n    const { message } = yield call(groupApi.updatePermissionsList, payload)\n    yield put(commonStore.actions.setSuccessMessage(message))\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nfunction* closeGroupDialog() {\n  try {\n    yield putResolve(groupStore.actions.setDialogStateOpen(false))\n    yield call(getGroupList)\n    yield put(groupStore.actions.resetDetail())\n  } catch (error) {\n    yield errorSaga.handleError(error)\n  }\n}\n\nfunction* groupSaga() {\n  yield takeEvery(groupStore.sagaGetList, getGroupList)\n  yield takeEvery(groupStore.sagaCreate, createGroup)\n  yield takeEvery(groupStore.sagaOpenUpdateDialog, openUpdateDialog)\n  yield takeEvery(groupStore.sagaUpdate, updateGroup)\n  yield takeEvery(groupStore.sagaCloseDialog, closeGroupDialog)\n  yield takeEvery(groupStore.sagaOpenCreateDialog, openGroupCreateDialog)\n\n  yield takeEvery(groupStore.sagaGetGroupPermissions, getGroupPermissions)\n  yield takeEvery(groupStore.sagaUpdateGroupPermissions, updateGroupPermissions)\n}\n\nexport default groupSaga\n"]},"metadata":{},"sourceType":"module"}