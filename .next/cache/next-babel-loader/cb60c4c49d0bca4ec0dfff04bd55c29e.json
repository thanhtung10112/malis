{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport useStyles from './styles';\nimport { Paper, IconButton, InputBase, Tooltip } from '@material-ui/core';\nimport { When } from 'react-if';\nimport { useConfirm, SearchIcon, FilterIcon } from '@/components';\nimport clsx from 'clsx';\nimport { commonStore, advancedFilterActions } from '@/store/reducers';\n\nconst AppSearchBar = props => {\n  const {\n    placeholder,\n    width,\n    onSearch,\n    filterable,\n    disabled\n  } = props;\n  const {\n    confirm\n  } = useConfirm();\n  const {\n    0: searchQuery,\n    1: setSearchQuery\n  } = useState('');\n  const dispatch = useDispatch();\n  const isOpenAF = useSelector(advancedFilterActions.selectOpenAdvanceSearch);\n  const classes = useStyles();\n\n  const handleInputQuery = event => {\n    setSearchQuery(event.target.value);\n  };\n\n  const handleSubmitSearch = async event => {\n    event.preventDefault();\n\n    if (searchQuery.length < 3) {\n      const result = await confirm({\n        description: 'Searching with less than 3 digits will be slow, do you want to continue?'\n      });\n\n      if (result === 'OK') {\n        onSearch(event, searchQuery);\n      }\n    } else {\n      onSearch(event, searchQuery);\n    }\n  };\n\n  const onOpenAdvancedFilter = () => {\n    if (disabled) {\n      return;\n    }\n\n    if (isOpenAF) {\n      dispatch(advancedFilterActions.resetState());\n      dispatch(commonStore.actions.setTableState({\n        page: 1\n      }));\n      dispatch(advancedFilterActions.close());\n    } else {\n      dispatch(advancedFilterActions.open());\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: classes.searchBar__container,\n    \"data-testid\": \"app-searchbar\",\n    children: [/*#__PURE__*/_jsx(When, {\n      condition: filterable,\n      children: /*#__PURE__*/_jsx(Tooltip, {\n        title: isOpenAF ? 'Close Advanced Filter' : 'Open Advanced Filter',\n        \"aria-label\": \"Advanced_Filter\",\n        children: /*#__PURE__*/_jsx(FilterIcon, {\n          onClick: onOpenAdvancedFilter,\n          className: clsx(classes.searchBar__filterIcon, {\n            [classes.searchBar__disabled]: disabled\n          })\n        })\n      })\n    }), /*#__PURE__*/_jsxs(Paper, {\n      component: \"form\",\n      elevation: 0,\n      className: classes.searchBar__form,\n      style: {\n        width\n      },\n      onSubmit: handleSubmitSearch,\n      children: [/*#__PURE__*/_jsx(IconButton, {\n        type: \"submit\",\n        className: classes.searchBar__searchIcon,\n        \"aria-label\": \"search\",\n        disabled: disabled,\n        children: /*#__PURE__*/_jsx(SearchIcon, {})\n      }), /*#__PURE__*/_jsx(InputBase, {\n        disabled: disabled,\n        className: classes.searchBar__input,\n        placeholder: placeholder,\n        value: searchQuery,\n        onChange: handleInputQuery\n      })]\n    })]\n  });\n};\n\nAppSearchBar.defaultProps = {\n  filterable: true,\n  width: 300,\n  placeholder: 'Search...',\n  disabled: false\n};\nexport default AppSearchBar;","map":null,"metadata":{},"sourceType":"module"}