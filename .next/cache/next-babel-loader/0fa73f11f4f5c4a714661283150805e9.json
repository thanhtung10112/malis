{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\TTS_Reactjs\\\\malis-3-frontend\\\\src\\\\components\\\\AdvancedFilter\\\\FilterDetails.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useMemo, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useTranslation } from 'next-i18next';\nimport { useForm } from 'react-hook-form';\nimport useStyles from './styles';\nimport { Button, Tab, Tabs, Checkbox, FormControlLabel, Typography, Grid, Tooltip } from '@material-ui/core';\nimport { MalisPanel, DialogMain, useConfirm, confirmConstant, FormControllerTextField, EditIcon, SaveIcon, DeleteIcon, CloseIcon, FilterIcon, CopyIcon } from '@/components';\nimport { When, Unless } from 'react-if';\nimport ConditionTree from './ConditionTree';\nimport SortConditionList from './SortConditionList';\nimport _ from 'lodash';\nimport { authStore, advancedFilterActions, commonStore } from '@/store/reducers';\nexport var conjunctions = [{\n  description: 'AND',\n  value: 'AND'\n}, {\n  description: 'OR',\n  value: 'OR'\n}];\n\nfunction FilterDetails(_ref) {\n  _s();\n\n  var activeTab = _ref.activeTab,\n      onChangeActiveTab = _ref.onChangeActiveTab;\n  // props.entity is the thing that you will pass to the backend to get the corresponding data for each module\n  var classes = useStyles();\n\n  var _useConfirm = useConfirm(),\n      confirm = _useConfirm.confirm;\n\n  var _useTranslation = useTranslation(['common', 'advanced_filter']),\n      t = _useTranslation.t;\n\n  var dispatch = useDispatch();\n  var columnOptions = useSelector(advancedFilterActions.selectColumn);\n  var comparatorOptions = useSelector(advancedFilterActions.selectComparator);\n  var sortOptions = useSelector(advancedFilterActions.selectSortOptions);\n  var conditionTreeData = useSelector(advancedFilterActions.selectConditionTree);\n  var sortConditions = useSelector(advancedFilterActions.selectSortConditions);\n  var isUserDefault = useSelector(advancedFilterActions.selectUserDefault);\n  var filterName = useSelector(advancedFilterActions.selectFilterDetailName);\n  var isEditMode = useSelector(advancedFilterActions.selectEditMode);\n  var filterDetail = useSelector(advancedFilterActions.selectFilterDetail);\n  var permissions = useSelector(advancedFilterActions.selectPermissions);\n  var loading = useSelector(advancedFilterActions.selectLoading);\n  var afFormSelector = useSelector(advancedFilterActions.selectAfForm);\n  var saveAsFormSelector = useSelector(advancedFilterActions.selectSaveAsForm);\n  var userInfo = useSelector(authStore.selectProfile);\n  var isSharedMode = filterDetail.created_by && filterDetail.created_by !== userInfo.user_name;\n  var conjunctionOptions = conjunctions;\n  var treeData = useMemo(function () {\n    return _.cloneDeep(conditionTreeData);\n  }, [conditionTreeData]);\n  var sortData = useMemo(function () {\n    return _.cloneDeep(sortConditions);\n  }, [sortConditions]);\n  var saveAsForm = useForm({\n    defaultValues: {\n      save_as_name: ''\n    },\n    shouldUnregister: false\n  });\n  var afForm = useForm({\n    defaultValues: {\n      name: ''\n    },\n    shouldUnregister: false\n  });\n  var formValidation = {\n    name: {\n      required: {\n        value: true,\n        message: t('advanced_filter:validations.name_required')\n      },\n      maxLength: {\n        value: 80,\n        message: t('advanced_filter:validations.name_max_length')\n      }\n    }\n  };\n  useEffect(function () {\n    afForm.setValue('name', filterDetail.name);\n    afForm.clearErrors();\n  }, [filterDetail]);\n  useEffect(function () {\n    if (afFormSelector.error) {\n      afForm.setError('name', {\n        message: afFormSelector.error\n      });\n    }\n  }, [afFormSelector.error]);\n  useEffect(function () {\n    if (saveAsFormSelector.error) {\n      saveAsForm.setError('save_as_name', {\n        message: saveAsFormSelector.error\n      });\n    }\n  }, [saveAsFormSelector.error]);\n  useEffect(function () {\n    if (saveAsFormSelector.clearError) {\n      saveAsForm.clearErrors();\n    }\n  }, [saveAsFormSelector.clearError]);\n  useEffect(function () {\n    if (afFormSelector.clearError) {\n      afForm.clearErrors();\n    }\n  }, [afFormSelector.clearError]);\n  var onSubmitTreeData = afForm.handleSubmit(function (data) {\n    dispatch(advancedFilterActions.setFilterDetail(_objectSpread(_objectSpread({}, data), {}, {\n      where_conditions: treeData,\n      sort_conditions: sortData\n    })));\n\n    if (isEditMode) {\n      dispatch(advancedFilterActions.update());\n    } else {\n      dispatch(advancedFilterActions.create());\n    }\n\n    afForm.clearErrors();\n  });\n\n  var onSetDefaultFilter = function onSetDefaultFilter(_, checked) {\n    var nameTextBoxValue = afForm.getValues('name');\n    dispatch(advancedFilterActions.setFilterDetail({\n      name: nameTextBoxValue,\n      is_user_default: checked\n    }));\n  };\n\n  var onCloseAdvanceSearch = function onCloseAdvanceSearch() {\n    dispatch(advancedFilterActions.resetState());\n    dispatch(commonStore.actions.setTableState({\n      page: 1\n    }));\n    dispatch(advancedFilterActions.close());\n  };\n\n  var onDeleteFilter = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var title, description, result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              title = t('advanced_filter:confirmation.title');\n              description = t('advanced_filter:confirmation.message_delete');\n              _context.next = 4;\n              return confirm({\n                title: title,\n                description: description\n              });\n\n            case 4:\n              result = _context.sent;\n\n              if (result === confirmConstant.actionTypes.OK) {\n                dispatch(advancedFilterActions.remove());\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onDeleteFilter() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onSaveAsSharedFilter = function onSaveAsSharedFilter() {\n    dispatch(advancedFilterActions.setFilterDetail({\n      is_shared: false,\n      where_conditions: treeData,\n      sort_conditions: sortData\n    }));\n    dispatch(advancedFilterActions.setSaveAsForm({\n      open: true\n    }));\n    var copyName = \"Copy of \".concat(filterName);\n    saveAsForm.setValue('save_as_name', copyName);\n\n    if (copyName.length > formValidation.name.maxLength.value) {\n      saveAsForm.setError('save_as_name', {\n        type: 'manual',\n        message: formValidation.name.maxLength.message\n      });\n    }\n  };\n\n  var onSubmitToSaveAs = saveAsForm.handleSubmit(function (data) {\n    dispatch(advancedFilterActions.saveAs(data.save_as_name));\n  });\n\n  var onCloseSaveAsForm = function onCloseSaveAsForm() {\n    saveAsForm.clearErrors();\n    saveAsForm.reset();\n    dispatch(advancedFilterActions.setSaveAsForm({\n      open: false\n    }));\n  };\n\n  var onApplyAdvanceSearch = function onApplyAdvanceSearch() {\n    var where_conditions = _.cloneDeep(treeData);\n\n    var sort_conditions = _.cloneDeep(sortData);\n\n    dispatch(advancedFilterActions.setDefaultFilter({\n      where_conditions: where_conditions,\n      sort_conditions: sort_conditions\n    }));\n    dispatch(advancedFilterActions.apply());\n  };\n\n  var onUpdateSystemFilter = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var title, description, result;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              title = t('advanced_filter:confirmation.title_warning');\n              description = t('advanced_filter:confirmation.description_warning');\n              _context2.next = 4;\n              return confirm({\n                title: title,\n                description: description\n              });\n\n            case 4:\n              result = _context2.sent;\n\n              if (result === confirmConstant.actionTypes.OK) {\n                dispatch(advancedFilterActions.setFilterDetail({\n                  where_conditions: treeData,\n                  sort_conditions: sortData\n                }));\n                dispatch(advancedFilterActions.update());\n              }\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onUpdateSystemFilter() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      alignItems: \"center\",\n      spacing: 2,\n      component: \"form\",\n      id: \"af-form\",\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 7,\n        children: /*#__PURE__*/_jsxDEV(FormControllerTextField, {\n          label: t('advanced_filter:filter_details.name_input'),\n          variant: \"outlined\",\n          name: \"name\",\n          required: true,\n          disabled: isSharedMode,\n          autoFocus: !isSharedMode,\n          control: afForm.control,\n          rules: formValidation.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Unless, {\n        condition: filterDetail.is_system_default,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 5,\n          style: {\n            padding: 0\n          },\n          children: /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            disabled: false,\n            control: /*#__PURE__*/_jsxDEV(Checkbox, {\n              name: \"setAsDefault\",\n              color: \"primary\",\n              checked: isUserDefault,\n              onChange: onSetDefaultFilter,\n              className: classes.checkboxSetDefault\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 17\n            }, this),\n            label: /*#__PURE__*/_jsxDEV(Typography, {\n              component: \"span\",\n              variant: \"body2\",\n              children: t('advanced_filter:filter_details.set_as_default')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n      value: activeTab,\n      onChange: onChangeActiveTab,\n      children: [/*#__PURE__*/_jsxDEV(Tab, {\n        label: t('advanced_filter:filter_details.filter_tab')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tab, {\n        label: t('advanced_filter:filter_details.sort_tab')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MalisPanel, {\n      value: activeTab,\n      index: 0,\n      className: classes.tabPanel,\n      children: /*#__PURE__*/_jsxDEV(ConditionTree, {\n        columnOptions: columnOptions,\n        comparatorOptions: comparatorOptions,\n        conjunctionOptions: conjunctionOptions,\n        data: treeData,\n        maxLevel: 2,\n        disabled: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MalisPanel, {\n      value: activeTab,\n      index: 1,\n      className: classes.tabPanel,\n      children: /*#__PURE__*/_jsxDEV(SortConditionList, {\n        columnOptions: columnOptions,\n        sortOptions: sortOptions,\n        sortData: sortData,\n        disabled: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: classes.wrapButtonGroup,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.wrapButtonLeft,\n        children: [/*#__PURE__*/_jsxDEV(When, {\n          condition: isSharedMode,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            onClick: onSaveAsSharedFilter,\n            startIcon: /*#__PURE__*/_jsxDEV(CopyIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 83\n            }, this),\n            children: t('common:button.save_as')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(When, {\n          condition: filterDetail.is_system_default && permissions.update_system_default_presets,\n          children: /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: t('advanced_filter:tooltip.update'),\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: onUpdateSystemFilter,\n              style: {\n                marginLeft: '5px'\n              },\n              children: t('common:button.update')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Unless, {\n          condition: isSharedMode,\n          children: /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: isEditMode ? t('advanced_filter:tooltip.update') : t('advanced_filter:tooltip.create'),\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              type: \"submit\",\n              form: \"af-form\",\n              onClick: onSubmitTreeData,\n              startIcon: isEditMode ? /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 41\n              }, this) : /*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 56\n              }, this),\n              children: isEditMode ? t('common:button.update') : t('common:button.create')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(When, {\n          condition: !isSharedMode && isEditMode,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"default\",\n            style: {\n              marginLeft: '5px'\n            },\n            onClick: onDeleteFilter,\n            startIcon: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 26\n            }, this),\n            children: t('common:button.delete')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.wrapButtonRight,\n        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: t('advanced_filter:tooltip.apply'),\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            onClick: onApplyAdvanceSearch,\n            startIcon: /*#__PURE__*/_jsxDEV(FilterIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 83\n            }, this),\n            children: t('common:button.apply')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: t('advanced_filter:tooltip.close'),\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: onCloseAdvanceSearch,\n            startIcon: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 26\n            }, this),\n            variant: \"contained\",\n            style: {\n              marginLeft: 5\n            },\n            children: t('common:button.close')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogMain, {\n      open: saveAsFormSelector.open,\n      title: t('advanced_filter:confirmation.save_as_title'),\n      maxWidth: \"sm\",\n      loading: loading.dialog,\n      onOk: onSubmitToSaveAs,\n      okText: t('common:button.save'),\n      onClose: onCloseSaveAsForm,\n      closeText: t('common:button.cancel'),\n      children: /*#__PURE__*/_jsxDEV(FormControllerTextField, {\n        style: {\n          marginTop: 8\n        },\n        name: \"save_as_name\",\n        label: t('advanced_filter:filter_details.name_input'),\n        autoFocus: true,\n        required: true,\n        control: saveAsForm.control\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(FilterDetails, \"zPtd5ynCJ+/RwXL9jLz3bx9fliU=\", false, function () {\n  return [useStyles, useConfirm, useTranslation, useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useForm, useForm];\n});\n\n_c = FilterDetails;\nexport default FilterDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"FilterDetails\");","map":{"version":3,"sources":["D:/TTS_Reactjs/malis-3-frontend/src/components/AdvancedFilter/FilterDetails.tsx"],"names":["useMemo","useEffect","useSelector","useDispatch","useTranslation","useForm","useStyles","Button","Tab","Tabs","Checkbox","FormControlLabel","Typography","Grid","Tooltip","MalisPanel","DialogMain","useConfirm","confirmConstant","FormControllerTextField","EditIcon","SaveIcon","DeleteIcon","CloseIcon","FilterIcon","CopyIcon","When","Unless","ConditionTree","SortConditionList","_","authStore","advancedFilterActions","commonStore","conjunctions","description","value","FilterDetails","activeTab","onChangeActiveTab","classes","confirm","t","dispatch","columnOptions","selectColumn","comparatorOptions","selectComparator","sortOptions","selectSortOptions","conditionTreeData","selectConditionTree","sortConditions","selectSortConditions","isUserDefault","selectUserDefault","filterName","selectFilterDetailName","isEditMode","selectEditMode","filterDetail","selectFilterDetail","permissions","selectPermissions","loading","selectLoading","afFormSelector","selectAfForm","saveAsFormSelector","selectSaveAsForm","userInfo","selectProfile","isSharedMode","created_by","user_name","conjunctionOptions","treeData","cloneDeep","sortData","saveAsForm","defaultValues","save_as_name","shouldUnregister","afForm","name","formValidation","required","message","maxLength","setValue","clearErrors","error","setError","clearError","onSubmitTreeData","handleSubmit","data","setFilterDetail","where_conditions","sort_conditions","update","create","onSetDefaultFilter","checked","nameTextBoxValue","getValues","is_user_default","onCloseAdvanceSearch","resetState","actions","setTableState","page","close","onDeleteFilter","title","result","actionTypes","OK","remove","onSaveAsSharedFilter","is_shared","setSaveAsForm","open","copyName","length","type","onSubmitToSaveAs","saveAs","onCloseSaveAsForm","reset","onApplyAdvanceSearch","setDefaultFilter","apply","onUpdateSystemFilter","control","is_system_default","padding","checkboxSetDefault","tabPanel","wrapButtonGroup","wrapButtonLeft","update_system_default_presets","marginLeft","wrapButtonRight","dialog","marginTop"],"mappings":"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","sourcesContent":["import { useMemo, useEffect } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { useTranslation } from 'next-i18next'\nimport { useForm } from 'react-hook-form'\nimport useStyles from './styles'\n\nimport { Button, Tab, Tabs, Checkbox, FormControlLabel, Typography, Grid, Tooltip } from '@material-ui/core'\n\nimport {\n  MalisPanel,\n  DialogMain,\n  useConfirm,\n  confirmConstant,\n  FormControllerTextField,\n  EditIcon,\n  SaveIcon,\n  DeleteIcon,\n  CloseIcon,\n  FilterIcon,\n  CopyIcon\n} from '@/components'\n\nimport { When, Unless } from 'react-if'\n\nimport ConditionTree from './ConditionTree'\nimport SortConditionList from './SortConditionList'\n\nimport _ from 'lodash'\nimport { authStore, advancedFilterActions, commonStore } from '@/store/reducers'\n\nexport const conjunctions = [\n  { description: 'AND', value: 'AND' },\n  { description: 'OR', value: 'OR' }\n]\n\nfunction FilterDetails({ activeTab, onChangeActiveTab }) {\n  // props.entity is the thing that you will pass to the backend to get the corresponding data for each module\n\n  const classes = useStyles()\n  const { confirm } = useConfirm()\n  const { t } = useTranslation(['common', 'advanced_filter'])\n\n  const dispatch = useDispatch()\n  const columnOptions = useSelector(advancedFilterActions.selectColumn)\n  const comparatorOptions = useSelector(advancedFilterActions.selectComparator)\n  const sortOptions = useSelector(advancedFilterActions.selectSortOptions)\n  const conditionTreeData = useSelector(advancedFilterActions.selectConditionTree)\n  const sortConditions = useSelector(advancedFilterActions.selectSortConditions)\n  const isUserDefault = useSelector(advancedFilterActions.selectUserDefault)\n  const filterName = useSelector(advancedFilterActions.selectFilterDetailName)\n  const isEditMode = useSelector(advancedFilterActions.selectEditMode)\n  const filterDetail = useSelector(advancedFilterActions.selectFilterDetail)\n  const permissions = useSelector(advancedFilterActions.selectPermissions)\n  const loading = useSelector(advancedFilterActions.selectLoading)\n\n  const afFormSelector = useSelector(advancedFilterActions.selectAfForm)\n  const saveAsFormSelector = useSelector(advancedFilterActions.selectSaveAsForm)\n\n  const userInfo = useSelector(authStore.selectProfile)\n\n  const isSharedMode = filterDetail.created_by && filterDetail.created_by !== userInfo.user_name\n\n  const conjunctionOptions = conjunctions\n\n  const treeData = useMemo(() => _.cloneDeep(conditionTreeData), [conditionTreeData])\n  const sortData = useMemo(() => _.cloneDeep(sortConditions), [sortConditions])\n\n  const saveAsForm = useForm({\n    defaultValues: { save_as_name: '' },\n    shouldUnregister: false\n  })\n  const afForm = useForm({\n    defaultValues: { name: '' },\n    shouldUnregister: false\n  })\n\n  const formValidation = {\n    name: {\n      required: {\n        value: true,\n        message: t('advanced_filter:validations.name_required')\n      },\n      maxLength: {\n        value: 80,\n        message: t('advanced_filter:validations.name_max_length')\n      }\n    }\n  }\n\n  useEffect(() => {\n    afForm.setValue('name', filterDetail.name)\n    afForm.clearErrors()\n  }, [filterDetail])\n\n  useEffect(() => {\n    if (afFormSelector.error) {\n      afForm.setError('name', { message: afFormSelector.error })\n    }\n  }, [afFormSelector.error])\n\n  useEffect(() => {\n    if (saveAsFormSelector.error) {\n      saveAsForm.setError('save_as_name', { message: saveAsFormSelector.error })\n    }\n  }, [saveAsFormSelector.error])\n\n  useEffect(() => {\n    if (saveAsFormSelector.clearError) {\n      saveAsForm.clearErrors()\n    }\n  }, [saveAsFormSelector.clearError])\n\n  useEffect(() => {\n    if (afFormSelector.clearError) {\n      afForm.clearErrors()\n    }\n  }, [afFormSelector.clearError])\n\n  const onSubmitTreeData = afForm.handleSubmit((data) => {\n    dispatch(\n      advancedFilterActions.setFilterDetail({\n        ...data,\n        where_conditions: treeData,\n        sort_conditions: sortData\n      })\n    )\n    if (isEditMode) {\n      dispatch(advancedFilterActions.update())\n    } else {\n      dispatch(advancedFilterActions.create())\n    }\n    afForm.clearErrors()\n  })\n\n  const onSetDefaultFilter = (_, checked: boolean) => {\n    const nameTextBoxValue = afForm.getValues('name')\n    dispatch(\n      advancedFilterActions.setFilterDetail({\n        name: nameTextBoxValue,\n        is_user_default: checked\n      })\n    )\n  }\n\n  const onCloseAdvanceSearch = () => {\n    dispatch(advancedFilterActions.resetState())\n    dispatch(commonStore.actions.setTableState({ page: 1 }))\n    dispatch(advancedFilterActions.close())\n  }\n\n  const onDeleteFilter = async () => {\n    const title = t('advanced_filter:confirmation.title')\n    const description = t('advanced_filter:confirmation.message_delete')\n    const result = await confirm({ title, description })\n    if (result === confirmConstant.actionTypes.OK) {\n      dispatch(advancedFilterActions.remove())\n    }\n  }\n\n  const onSaveAsSharedFilter = () => {\n    dispatch(\n      advancedFilterActions.setFilterDetail({\n        is_shared: false,\n        where_conditions: treeData,\n        sort_conditions: sortData\n      })\n    )\n    dispatch(advancedFilterActions.setSaveAsForm({ open: true }))\n    const copyName = `Copy of ${filterName}`\n    saveAsForm.setValue('save_as_name', copyName)\n    if (copyName.length > formValidation.name.maxLength.value) {\n      saveAsForm.setError('save_as_name', {\n        type: 'manual',\n        message: formValidation.name.maxLength.message\n      })\n    }\n  }\n\n  const onSubmitToSaveAs = saveAsForm.handleSubmit((data) => {\n    dispatch(advancedFilterActions.saveAs(data.save_as_name))\n  })\n\n  const onCloseSaveAsForm = () => {\n    saveAsForm.clearErrors()\n    saveAsForm.reset()\n    dispatch(advancedFilterActions.setSaveAsForm({ open: false }))\n  }\n\n  const onApplyAdvanceSearch = () => {\n    const where_conditions = _.cloneDeep(treeData)\n    const sort_conditions = _.cloneDeep(sortData)\n    dispatch(\n      advancedFilterActions.setDefaultFilter({\n        where_conditions,\n        sort_conditions\n      })\n    )\n    dispatch(advancedFilterActions.apply())\n  }\n\n  const onUpdateSystemFilter = async () => {\n    const title = t('advanced_filter:confirmation.title_warning')\n    const description = t('advanced_filter:confirmation.description_warning')\n    const result = await confirm({ title, description })\n    if (result === confirmConstant.actionTypes.OK) {\n      dispatch(\n        advancedFilterActions.setFilterDetail({\n          where_conditions: treeData,\n          sort_conditions: sortData\n        })\n      )\n      dispatch(advancedFilterActions.update())\n    }\n  }\n\n  return (\n    <>\n      <Grid container alignItems=\"center\" spacing={2} component=\"form\" id=\"af-form\">\n        <Grid item xs={7}>\n          <FormControllerTextField\n            label={t('advanced_filter:filter_details.name_input')}\n            variant=\"outlined\"\n            name=\"name\"\n            required\n            disabled={isSharedMode}\n            autoFocus={!isSharedMode}\n            control={afForm.control}\n            rules={formValidation.name}\n          />\n        </Grid>\n\n        <Unless condition={filterDetail.is_system_default}>\n          <Grid item xs={5} style={{ padding: 0 }}>\n            <FormControlLabel\n              disabled={false}\n              control={\n                <Checkbox\n                  name=\"setAsDefault\"\n                  color=\"primary\"\n                  checked={isUserDefault}\n                  onChange={onSetDefaultFilter}\n                  className={classes.checkboxSetDefault}\n                />\n              }\n              label={\n                <Typography component=\"span\" variant=\"body2\">\n                  {t('advanced_filter:filter_details.set_as_default')}\n                </Typography>\n              }\n            />\n          </Grid>\n        </Unless>\n      </Grid>\n      <Tabs value={activeTab} onChange={onChangeActiveTab}>\n        <Tab label={t('advanced_filter:filter_details.filter_tab')} />\n        <Tab label={t('advanced_filter:filter_details.sort_tab')} />\n      </Tabs>\n\n      <MalisPanel value={activeTab} index={0} className={classes.tabPanel}>\n        <ConditionTree\n          columnOptions={columnOptions}\n          comparatorOptions={comparatorOptions}\n          conjunctionOptions={conjunctionOptions}\n          data={treeData}\n          maxLevel={2}\n          disabled={false}\n        />\n      </MalisPanel>\n\n      <MalisPanel value={activeTab} index={1} className={classes.tabPanel}>\n        {/* <SortList /> */}\n        <SortConditionList\n          columnOptions={columnOptions}\n          sortOptions={sortOptions}\n          sortData={sortData}\n          disabled={false}\n        />\n      </MalisPanel>\n      <section className={classes.wrapButtonGroup}>\n        <div className={classes.wrapButtonLeft}>\n          <When condition={isSharedMode}>\n            <Button variant=\"contained\" onClick={onSaveAsSharedFilter} startIcon={<CopyIcon />}>\n              {t('common:button.save_as')}\n            </Button>\n          </When>\n\n          <When condition={filterDetail.is_system_default && permissions.update_system_default_presets}>\n            <Tooltip title={t('advanced_filter:tooltip.update')}>\n              <Button variant=\"contained\" onClick={onUpdateSystemFilter} style={{ marginLeft: '5px' }}>\n                {t('common:button.update')}\n              </Button>\n            </Tooltip>\n          </When>\n\n          <Unless condition={isSharedMode}>\n            <Tooltip title={isEditMode ? t('advanced_filter:tooltip.update') : t('advanced_filter:tooltip.create')}>\n              <Button\n                variant=\"contained\"\n                type=\"submit\"\n                form=\"af-form\"\n                onClick={onSubmitTreeData}\n                startIcon={isEditMode ? <EditIcon /> : <SaveIcon />}\n              >\n                {isEditMode ? t('common:button.update') : t('common:button.create')}\n              </Button>\n            </Tooltip>\n          </Unless>\n\n          <When condition={!isSharedMode && isEditMode}>\n            <Button\n              variant=\"contained\"\n              color=\"default\"\n              style={{ marginLeft: '5px' }}\n              onClick={onDeleteFilter}\n              startIcon={<DeleteIcon />}\n            >\n              {t('common:button.delete')}\n            </Button>\n          </When>\n        </div>\n        <div className={classes.wrapButtonRight}>\n          <Tooltip title={t('advanced_filter:tooltip.apply')}>\n            <Button variant=\"contained\" onClick={onApplyAdvanceSearch} startIcon={<FilterIcon />}>\n              {t('common:button.apply')}\n            </Button>\n          </Tooltip>\n          <Tooltip title={t('advanced_filter:tooltip.close')}>\n            <Button\n              onClick={onCloseAdvanceSearch}\n              startIcon={<CloseIcon />}\n              variant=\"contained\"\n              style={{ marginLeft: 5 }}\n            >\n              {t('common:button.close')}\n            </Button>\n          </Tooltip>\n        </div>\n      </section>\n\n      <DialogMain\n        open={saveAsFormSelector.open}\n        title={t('advanced_filter:confirmation.save_as_title')}\n        maxWidth=\"sm\"\n        loading={loading.dialog}\n        onOk={onSubmitToSaveAs}\n        okText={t('common:button.save')}\n        onClose={onCloseSaveAsForm}\n        closeText={t('common:button.cancel')}\n      >\n        <FormControllerTextField\n          style={{ marginTop: 8 }}\n          name=\"save_as_name\"\n          label={t('advanced_filter:filter_details.name_input')}\n          autoFocus\n          required\n          control={saveAsForm.control}\n        />\n      </DialogMain>\n    </>\n  )\n}\n\nexport default FilterDetails\n"]},"metadata":{},"sourceType":"module"}