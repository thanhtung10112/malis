{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { createElement as _createElement } from \"react\";\n\nvar _jsxFileName = \"D:\\\\Fersher\\\\TTS_Reactjs\\\\malis-3-frontend\\\\src\\\\components\\\\App\\\\Layout\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useMemo, useEffect, useCallback } from 'react';\nimport { useRouter } from 'next/router';\nimport useStyles from './styles';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport Head from 'next/head';\nimport { Paper, Grid } from '@material-ui/core';\nimport { DataGrid } from '@material-ui/data-grid';\nimport { When, Unless } from 'react-if';\nimport { AdvancedFilter, MakeAList, AppBreadcrumb, MalisNoViewPermissionOnModule, Footer, DataTablePagination, DataTableLoadingOverlay, DataTableNoRowsOverlay, AppButton, DataTableColumnMenu, AppSearchBar } from '@/components';\nimport clsx from 'clsx';\nimport _ from 'lodash';\nimport { advancedFilterActions, commonStore, equivalenceStore } from '@/store/reducers';\nimport { createAction } from '@reduxjs/toolkit';\nimport { actionTypes } from '@/utils/constant';\nimport { TABLE_HEIGHT_INCLUDE_FOOTER } from '@/styles/vars/size';\nimport AppNumber from '@/helper/AppNumber';\n\nvar Layout = function Layout(props) {\n  _s();\n\n  var breadcrumbs = props.breadcrumbs,\n      buttons = props.buttons,\n      Dialogs = props.Dialogs,\n      Options = props.Options,\n      tableProps = props.tableProps,\n      exportable = props.exportable,\n      permissions = props.permissions,\n      searchProps = props.searchProps,\n      filterable = props.filterable,\n      leftSection = props.leftSection,\n      tableSection = props.tableSection,\n      bottomSection = props.bottomSection,\n      tableHeight = props.tableHeight,\n      entity = props.entity,\n      wikiPage = props.wikiPage;\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var router = useRouter();\n  var dispatch = useDispatch();\n  var equivalenceType = useSelector(equivalenceStore.selectEquivalenceType);\n  var isOpenAF = useSelector(advancedFilterActions.selectOpenAdvanceSearch);\n  var tableState = useSelector(commonStore.selectTableState);\n\n  var _useSelector = useSelector(commonStore.selectLoading),\n      loadingTable = _useSelector.table;\n\n  var selectedRows = useSelector(commonStore.selectSelectedRows);\n  var editRows = useSelector(commonStore.selectEditRows);\n  var entityApp = useMemo(function () {\n    if (entity === 'manufacturing_standard' || entity === 'material_standard') {\n      return 'equivalence';\n    }\n\n    return entity;\n  }, [entity]);\n  var headTitle = useMemo(function () {\n    if (!entityApp) {\n      return t('common:loading');\n    }\n\n    if (entityApp === 'equivalence') {\n      if (equivalenceType) {\n        return t(\"\".concat(entityApp, \":head_title_\").concat(equivalenceType));\n      }\n\n      return t('common:loading');\n    }\n\n    return t(\"\".concat(entityApp, \":head_title\"));\n  }, [entityApp, equivalenceType]);\n  var dataList = useSelector(function (state) {\n    var _state$entityApp;\n\n    if (!entityApp) {\n      return [];\n    }\n\n    return ((_state$entityApp = state[entityApp]) === null || _state$entityApp === void 0 ? void 0 : _state$entityApp.dataList) || [];\n  });\n  var getListAction = useMemo(function () {\n    return createAction(\"\".concat(entityApp, \"/\").concat(actionTypes.GET_LIST));\n  }, [entityApp]);\n  var resetStateAction = useMemo(function () {\n    return createAction(\"\".concat(entityApp, \"/\").concat(actionTypes.RESET_STATE));\n  }, [entityApp]);\n  var openCreateDialogAct = useMemo(function () {\n    return createAction(\"\".concat(entityApp, \"/\").concat(actionTypes.OPEN_CREATE_DIALOG));\n  }, [entityApp]);\n  var openUpdateDialogAct = useMemo(function () {\n    return createAction(\"\".concat(entityApp, \"/\").concat(actionTypes.OPEN_UPDATE_DIALOG));\n  }, [entityApp]);\n  useEffect(function () {\n    if (!entity) {\n      return;\n    }\n\n    dispatch(commonStore.actions.setEntity(entity));\n    dispatch(getListAction());\n    return function () {\n      dispatch(resetStateAction());\n    };\n  }, [entity, resetStateAction, getListAction]);\n  useEffect(function () {\n    if (selectedRows.length > 0) {\n      dispatch(commonStore.actions.setSelectedRows([]));\n    }\n\n    if (editRows.length > 0) {\n      dispatch(commonStore.actions.setEditRows([]));\n    }\n  }, [dataList]);\n  useEffect(function () {\n    var _router$query = router.query,\n        id = _router$query.id,\n        action = _router$query.action;\n\n    if (AppNumber.isNumber(id) && action === 'update') {\n      dispatch(openUpdateDialogAct(router.query.id));\n    } else if (action === 'create') {\n      dispatch(openCreateDialogAct());\n    }\n  }, [entityApp, actionTypes, router.query.id, router.query.action]);\n  var renderButtons = useCallback(function () {\n    if (_.isArray(buttons)) {\n      return buttons.filter(function (button) {\n        return !button.hide;\n      }).map(function (_ref, index) {\n        var label = _ref.label,\n            hide = _ref.hide,\n            className = _ref.className,\n            buttonProps = _objectWithoutProperties(_ref, [\"label\", \"hide\", \"className\"]);\n\n        return /*#__PURE__*/_createElement(AppButton, _objectSpread(_objectSpread({}, buttonProps), {}, {\n          key: index,\n          className: clsx(className, classes.buttonControl),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 11\n          },\n          __self: _this\n        }), label);\n      });\n    }\n\n    return /*#__PURE__*/_jsxDEV(AppButton, _objectSpread(_objectSpread({}, buttons), {}, {\n      className: clsx(buttons === null || buttons === void 0 ? void 0 : buttons.className, classes.buttonControl),\n      children: buttons === null || buttons === void 0 ? void 0 : buttons.label\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, _this);\n  }, [buttons]);\n\n  var handleChangePage = function handleChangePage(page) {\n    dispatch(commonStore.actions.setTableState({\n      page: page\n    }));\n    dispatch(getListAction());\n  };\n\n  var handleChangePerpage = function handleChangePerpage(per_page) {\n    dispatch(commonStore.actions.setTableState({\n      per_page: per_page\n    }));\n    handleChangePage(1);\n  };\n\n  var handleSearch = function handleSearch(event, query) {\n    dispatch(commonStore.actions.setSearchQuery(query));\n    handleChangePage(1);\n  };\n\n  var handleSelectRows = function handleSelectRows(_ref2) {\n    var selectionModel = _ref2.selectionModel;\n    dispatch(commonStore.actions.setSelectedRows(selectionModel));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: headTitle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(AppBreadcrumb, {\n      items: breadcrumbs,\n      wikiPage: wikiPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 1,\n      className: classes.main,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.wrapControl,\n          children: [/*#__PURE__*/_jsxDEV(AppSearchBar, _objectSpread(_objectSpread({\n            onSearch: handleSearch,\n            width: 500,\n            placeholder: t(\"\".concat(entityApp, \":search_placeholder\")),\n            filterable: filterable\n          }, searchProps), {}, {\n            disabled: !(permissions === null || permissions === void 0 ? void 0 : permissions.view)\n          }), void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, _this), Options]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\",\n          children: renderButtons()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(When, {\n        condition: isOpenAF,\n        children: /*#__PURE__*/_jsxDEV(AdvancedFilter, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(When, {\n        condition: permissions === null || permissions === void 0 ? void 0 : permissions.view,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          style: {\n            height: tableHeight || TABLE_HEIGHT_INCLUDE_FOOTER,\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Unless, {\n            condition: leftSection === null || leftSection === void 0 ? void 0 : leftSection.hide,\n            children: /*#__PURE__*/_jsxDEV(Grid, _objectSpread(_objectSpread(_objectSpread({\n              item: true\n            }, leftSection.breakPoint), _.omit(leftSection, ['breakPoint', 'hide', 'Component'])), {}, {\n              children: leftSection.Component\n            }), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Grid, _objectSpread(_objectSpread({\n            item: true\n          }, tableSection === null || tableSection === void 0 ? void 0 : tableSection.breakPoint), {}, {\n            children: /*#__PURE__*/_jsxDEV(DataGrid, _objectSpread({\n              checkboxSelection: true,\n              loading: loadingTable,\n              rows: dataList,\n              headerHeight: 30,\n              rowHeight: 30,\n              hideFooter: true,\n              selectionModel: selectedRows,\n              onSelectionModelChange: handleSelectRows,\n              components: {\n                LoadingOverlay: DataTableLoadingOverlay,\n                NoRowsOverlay: DataTableNoRowsOverlay,\n                ColumnMenu: DataTableColumnMenu\n              },\n              onCellClick: function onCellClick(params, event) {\n                if (params.field === 'id') {\n                  event.stopPropagation();\n                }\n              }\n            }, tableProps), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, _this)\n          }), void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, _this), bottomSection, /*#__PURE__*/_jsxDEV(DataTablePagination, {\n          countSelectedItems: selectedRows.length,\n          page: tableState.page,\n          perPage: tableState.per_page,\n          totalItems: tableState.total_items,\n          onChangePage: handleChangePage,\n          onChangePerPage: handleChangePerpage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(When, {\n        condition: !_.isNil(permissions) && (permissions === null || permissions === void 0 ? void 0 : permissions.view) === false,\n        children: /*#__PURE__*/_jsxDEV(MalisNoViewPermissionOnModule, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, _this), Dialogs, /*#__PURE__*/_jsxDEV(When, {\n      condition: exportable,\n      children: /*#__PURE__*/_jsxDEV(MakeAList, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(Layout, \"6REeVPdi/rtoHRKQ1fueiQgDSxc=\", false, function () {\n  return [useStyles, useTranslation, useRouter, useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Layout;\nLayout.defaultProps = {\n  filterable: true,\n  exportable: true,\n  permissions: null,\n  tableProps: {\n    columns: []\n  },\n  tableSection: {\n    breakPoint: {\n      xs: 12\n    }\n  },\n  leftSection: {}\n};\nexport default Layout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Layout\");","map":{"version":3,"sources":["D:/Fersher/TTS_Reactjs/malis-3-frontend/src/components/App/Layout/index.tsx"],"names":["useMemo","useEffect","useCallback","useRouter","useStyles","useDispatch","useSelector","useTranslation","Head","Paper","Grid","DataGrid","When","Unless","AdvancedFilter","MakeAList","AppBreadcrumb","MalisNoViewPermissionOnModule","Footer","DataTablePagination","DataTableLoadingOverlay","DataTableNoRowsOverlay","AppButton","DataTableColumnMenu","AppSearchBar","clsx","_","advancedFilterActions","commonStore","equivalenceStore","createAction","actionTypes","TABLE_HEIGHT_INCLUDE_FOOTER","AppNumber","Layout","props","breadcrumbs","buttons","Dialogs","Options","tableProps","exportable","permissions","searchProps","filterable","leftSection","tableSection","bottomSection","tableHeight","entity","wikiPage","classes","t","router","dispatch","equivalenceType","selectEquivalenceType","isOpenAF","selectOpenAdvanceSearch","tableState","selectTableState","selectLoading","loadingTable","table","selectedRows","selectSelectedRows","editRows","selectEditRows","entityApp","headTitle","dataList","state","getListAction","GET_LIST","resetStateAction","RESET_STATE","openCreateDialogAct","OPEN_CREATE_DIALOG","openUpdateDialogAct","OPEN_UPDATE_DIALOG","actions","setEntity","length","setSelectedRows","setEditRows","query","id","action","isNumber","renderButtons","isArray","filter","button","hide","map","index","label","className","buttonProps","buttonControl","handleChangePage","page","setTableState","handleChangePerpage","per_page","handleSearch","event","setSearchQuery","handleSelectRows","selectionModel","main","control","wrapControl","view","height","width","breakPoint","omit","Component","LoadingOverlay","NoRowsOverlay","ColumnMenu","params","field","stopPropagation","total_items","isNil","defaultProps","columns","xs"],"mappings":"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","sourcesContent":["import { useMemo, useEffect, useCallback } from 'react'\nimport { useRouter } from 'next/router'\nimport useStyles from './styles'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useTranslation } from 'react-i18next'\n\nimport Head from 'next/head'\n\nimport { Paper, Grid } from '@material-ui/core'\nimport { DataGrid } from '@material-ui/data-grid'\n\nimport { When, Unless } from 'react-if'\n\nimport {\n  AdvancedFilter,\n  MakeAList,\n  AppBreadcrumb,\n  MalisNoViewPermissionOnModule,\n  Footer,\n  DataTablePagination,\n  DataTableLoadingOverlay,\n  DataTableNoRowsOverlay,\n  AppButton,\n  DataTableColumnMenu,\n  AppSearchBar\n} from '@/components'\n\nimport clsx from 'clsx'\nimport _ from 'lodash'\nimport { advancedFilterActions, commonStore, equivalenceStore } from '@/store/reducers'\nimport { createAction } from '@reduxjs/toolkit'\nimport { actionTypes } from '@/utils/constant'\n\nimport { TABLE_HEIGHT_INCLUDE_FOOTER } from '@/styles/vars/size'\n\nimport type { ButtonLayout, LayoutProps } from './type'\nimport AppNumber from '@/helper/AppNumber'\n\nconst Layout: React.FC<LayoutProps> = (props) => {\n  const {\n    breadcrumbs,\n    buttons,\n    Dialogs,\n    Options,\n    tableProps,\n    exportable,\n    permissions,\n    searchProps,\n    filterable,\n    leftSection,\n    tableSection,\n    bottomSection,\n    tableHeight,\n    entity,\n    wikiPage\n  } = props\n\n  const classes = useStyles()\n  const { t } = useTranslation()\n  const router = useRouter()\n\n  const dispatch = useDispatch()\n  const equivalenceType = useSelector(equivalenceStore.selectEquivalenceType)\n  const isOpenAF = useSelector(advancedFilterActions.selectOpenAdvanceSearch)\n  const tableState = useSelector(commonStore.selectTableState)\n  const { table: loadingTable } = useSelector(commonStore.selectLoading)\n  const selectedRows = useSelector(commonStore.selectSelectedRows)\n  const editRows = useSelector(commonStore.selectEditRows)\n\n  const entityApp = useMemo(() => {\n    if (entity === 'manufacturing_standard' || entity === 'material_standard') {\n      return 'equivalence'\n    }\n    return entity\n  }, [entity])\n\n  const headTitle = useMemo(() => {\n    if (!entityApp) {\n      return t('common:loading')\n    }\n    if (entityApp === 'equivalence') {\n      if (equivalenceType) {\n        return t(`${entityApp}:head_title_${equivalenceType}`)\n      }\n      return t('common:loading')\n    }\n    return t(`${entityApp}:head_title`)\n  }, [entityApp, equivalenceType])\n\n  const dataList = useSelector((state) => {\n    if (!entityApp) {\n      return []\n    }\n    return state[entityApp]?.dataList || []\n  })\n\n  const getListAction = useMemo(() => createAction(`${entityApp}/${actionTypes.GET_LIST}`), [entityApp])\n\n  const resetStateAction = useMemo(() => createAction(`${entityApp}/${actionTypes.RESET_STATE}`), [entityApp])\n\n  const openCreateDialogAct = useMemo(() => createAction(`${entityApp}/${actionTypes.OPEN_CREATE_DIALOG}`), [entityApp])\n\n  const openUpdateDialogAct = useMemo(\n    () => createAction<number>(`${entityApp}/${actionTypes.OPEN_UPDATE_DIALOG}`),\n    [entityApp]\n  )\n\n  useEffect(() => {\n    if (!entity) {\n      return\n    }\n    dispatch(commonStore.actions.setEntity(entity))\n    dispatch(getListAction())\n    return () => {\n      dispatch(resetStateAction())\n    }\n  }, [entity, resetStateAction, getListAction])\n\n  useEffect(() => {\n    if (selectedRows.length > 0) {\n      dispatch(commonStore.actions.setSelectedRows([]))\n    }\n    if (editRows.length > 0) {\n      dispatch(commonStore.actions.setEditRows([]))\n    }\n  }, [dataList])\n\n  useEffect(() => {\n    const { id, action } = router.query\n    if (AppNumber.isNumber(id) && action === 'update') {\n      dispatch(openUpdateDialogAct((router.query as any).id))\n    } else if (action === 'create') {\n      dispatch(openCreateDialogAct())\n    }\n  }, [entityApp, actionTypes, router.query.id, router.query.action])\n\n  const renderButtons = useCallback(() => {\n    if (_.isArray(buttons)) {\n      return (buttons as ButtonLayout[])\n        .filter((button) => !button.hide)\n        .map(({ label, hide, className, ...buttonProps }, index) => (\n          <AppButton {...buttonProps} key={index} className={clsx(className, classes.buttonControl)}>\n            {label}\n          </AppButton>\n        ))\n    }\n    return (\n      <AppButton {...buttons} className={clsx(buttons?.className, classes.buttonControl)}>\n        {buttons?.label}\n      </AppButton>\n    )\n  }, [buttons])\n\n  const handleChangePage = (page) => {\n    dispatch(commonStore.actions.setTableState({ page }))\n    dispatch(getListAction())\n  }\n\n  const handleChangePerpage = (per_page) => {\n    dispatch(commonStore.actions.setTableState({ per_page }))\n    handleChangePage(1)\n  }\n\n  const handleSearch = (event, query) => {\n    dispatch(commonStore.actions.setSearchQuery(query))\n    handleChangePage(1)\n  }\n\n  const handleSelectRows = ({ selectionModel }) => {\n    dispatch(commonStore.actions.setSelectedRows(selectionModel))\n  }\n\n  return (\n    <>\n      <Head>\n        <title>{headTitle}</title>\n      </Head>\n      <AppBreadcrumb items={breadcrumbs} wikiPage={wikiPage} />\n\n      <Paper elevation={1} className={classes.main}>\n        <div className={classes.control}>\n          <div className={classes.wrapControl}>\n            <AppSearchBar\n              onSearch={handleSearch}\n              width={500}\n              placeholder={t(`${entityApp}:search_placeholder`)}\n              filterable={filterable}\n              {...searchProps}\n              disabled={!permissions?.view}\n            />\n            {Options}\n          </div>\n          <div className=\"\">{renderButtons()}</div>\n        </div>\n\n        <When condition={isOpenAF}>\n          <AdvancedFilter />\n        </When>\n\n        <When condition={permissions?.view}>\n          <Grid\n            container\n            style={{\n              height: tableHeight || TABLE_HEIGHT_INCLUDE_FOOTER,\n              width: '100%'\n            }}\n          >\n            <Unless condition={leftSection?.hide}>\n              <Grid item {...leftSection.breakPoint} {..._.omit(leftSection, ['breakPoint', 'hide', 'Component'])}>\n                {leftSection.Component}\n              </Grid>\n            </Unless>\n\n            <Grid item {...tableSection?.breakPoint}>\n              <DataGrid\n                checkboxSelection\n                loading={loadingTable}\n                rows={dataList}\n                headerHeight={30}\n                rowHeight={30}\n                hideFooter\n                selectionModel={selectedRows}\n                onSelectionModelChange={handleSelectRows}\n                components={{\n                  LoadingOverlay: DataTableLoadingOverlay,\n                  NoRowsOverlay: DataTableNoRowsOverlay,\n                  ColumnMenu: DataTableColumnMenu\n                }}\n                onCellClick={(params, event) => {\n                  if (params.field === 'id') {\n                    event.stopPropagation()\n                  }\n                }}\n                {...tableProps}\n              />\n            </Grid>\n          </Grid>\n          {bottomSection}\n          <DataTablePagination\n            countSelectedItems={selectedRows.length}\n            page={tableState.page}\n            perPage={tableState.per_page}\n            totalItems={tableState.total_items}\n            onChangePage={handleChangePage}\n            onChangePerPage={handleChangePerpage}\n          />\n          <Footer />\n        </When>\n\n        <When condition={!_.isNil(permissions) && permissions?.view === false}>\n          <MalisNoViewPermissionOnModule />\n        </When>\n      </Paper>\n      {Dialogs}\n      <When condition={exportable}>\n        <MakeAList />\n      </When>\n    </>\n  )\n}\n\nLayout.defaultProps = {\n  filterable: true,\n  exportable: true,\n  permissions: null,\n  tableProps: {\n    columns: []\n  },\n  tableSection: {\n    breakPoint: { xs: 12 }\n  },\n  leftSection: {} as any\n}\n\nexport default Layout\n"]},"metadata":{},"sourceType":"module"}