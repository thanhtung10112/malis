{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\TTS_Reactjs\\\\malis-3-frontend\\\\src\\\\components\\\\Dialog\\\\Module\\\\Location\\\\CreateEdit.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useTranslation } from 'next-i18next';\nimport { useForm } from 'react-hook-form';\nimport { Grid } from '@material-ui/core';\nimport { TableExtendedProperties, DialogMain, AppTabHistoryLog, FormControllerTabs, BtnHelp } from '@/components/index';\nimport TabGeneral from './TabGeneral';\nimport TabSpecialties from './TabSpecialties';\nimport _ from 'lodash';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport getValidationSchema from './validationSchema';\nimport { locationStore } from '@/store/reducers';\nimport { removalProperties } from '@/utils/constant';\n\nfunction LocationDialog() {\n  _s();\n\n  var _useTranslation = useTranslation('location'),\n      t = _useTranslation.t;\n\n  var validationSchema = useMemo(function () {\n    return getValidationSchema(t);\n  }, []);\n  var locationForm = useForm({\n    shouldUnregister: false,\n    resolver: yupResolver(validationSchema)\n  });\n\n  var _useState = useState(0),\n      tab = _useState[0],\n      setTab = _useState[1];\n\n  var dispatch = useDispatch();\n  var dialogState = useSelector(locationStore.selectDialogState);\n  var locationDetail = useSelector(locationStore.selectDetail);\n\n  var _useSelector = useSelector(locationStore.selectInitDataForCE),\n      parameters = _useSelector.parameters,\n      wiki_page = _useSelector.wiki_page;\n\n  var permissions = useSelector(locationStore.selectPermissions);\n  var titleDialog = dialogState.editMode ? t('form.title.update_location') : t('form.title.create_location');\n  useEffect(function () {\n    locationForm.reset(locationDetail);\n    setTab(0);\n  }, [locationDetail]);\n\n  var onChangeTab = function onChangeTab(_, newValue) {\n    setTab(newValue);\n  };\n\n  var onHandleSubmit = locationForm.handleSubmit(function (data) {\n    var payload = _.omit(data, [].concat(_toConsumableArray(removalProperties), ['use_in_job']));\n\n    if (dialogState.editMode) {\n      dispatch(locationStore.sagaUpdate({\n        location: payload,\n        id: data.id\n      }));\n    } else {\n      dispatch(locationStore.sagaCreate(payload));\n    }\n  });\n\n  var onClose = function onClose() {\n    locationForm.clearErrors();\n    dispatch(locationStore.sagaCloseDialog());\n  };\n\n  var handleChangeHistoryLogs = function handleChangeHistoryLogs(data) {\n    dispatch(locationStore.actions.setHistoryLogs(data));\n  };\n\n  var generalTab = {\n    label: t('common:tab.general'),\n    errorKey: ['location_id', 'language', 'location_type', 'name', 'office_email', 'office_zip', 'comment', 'office_email', 'office_zip', 'workshop_email'],\n    panel: /*#__PURE__*/_jsxDEV(TabGeneral, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 12\n    }, this)\n  };\n  var specialtiesTab = {\n    label: t('form.tab.specialties'),\n    panel: /*#__PURE__*/_jsxDEV(TabSpecialties, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 12\n    }, this)\n  };\n  var extendedPropertiesTab = {\n    label: t('common:tab.extended_properties'),\n    panel: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(TableExtendedProperties, {\n          control: locationForm.control,\n          name: \"additional_attributes\",\n          tableHeight: 505,\n          propertiesList: parameters.LOAT,\n          editMode: dialogState.editMode,\n          parameterName: \"LOAT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)\n  };\n  var historyTab = {\n    label: t('common:tab.history'),\n    panel: /*#__PURE__*/_jsxDEV(AppTabHistoryLog, {\n      isOpenDialog: dialogState.open,\n      data: dialogState.historyLogs,\n      onChange: handleChangeHistoryLogs,\n      entityId: locationDetail.id,\n      entity: \"location\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this),\n    disabled: !dialogState.editMode\n  };\n  var tabs = [generalTab, specialtiesTab, extendedPropertiesTab, historyTab];\n  return /*#__PURE__*/_jsxDEV(DialogMain, {\n    open: dialogState.open,\n    title: /*#__PURE__*/_jsxDEV(BtnHelp, {\n      title: titleDialog,\n      href: wiki_page\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 14\n    }, this),\n    loading: dialogState.loading,\n    onOk: onHandleSubmit,\n    onClose: onClose,\n    height: dialogState.editMode ? 627 : 580,\n    okButtonProps: {\n      disabled: dialogState.loading || !(permissions === null || permissions === void 0 ? void 0 : permissions.edit) && dialogState.editMode\n    },\n    okText: dialogState.editMode ? t('common:button.update') : t('common:button.create'),\n    children: /*#__PURE__*/_jsxDEV(FormControllerTabs, {\n      value: tab,\n      onChange: onChangeTab,\n      form: locationForm,\n      tabs: tabs\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LocationDialog, \"ECGzAv9WVYYbW3r5SxZKG5ioVwo=\", false, function () {\n  return [useTranslation, useForm, useDispatch, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = LocationDialog;\nexport default LocationDialog;\n\nvar _c;\n\n$RefreshReg$(_c, \"LocationDialog\");","map":{"version":3,"sources":["D:/TTS_Reactjs/malis-3-frontend/src/components/Dialog/Module/Location/CreateEdit.tsx"],"names":["useState","useEffect","useMemo","useSelector","useDispatch","useTranslation","useForm","Grid","TableExtendedProperties","DialogMain","AppTabHistoryLog","FormControllerTabs","BtnHelp","TabGeneral","TabSpecialties","_","yupResolver","getValidationSchema","locationStore","removalProperties","LocationDialog","t","validationSchema","locationForm","shouldUnregister","resolver","tab","setTab","dispatch","dialogState","selectDialogState","locationDetail","selectDetail","selectInitDataForCE","parameters","wiki_page","permissions","selectPermissions","titleDialog","editMode","reset","onChangeTab","newValue","onHandleSubmit","handleSubmit","data","payload","omit","sagaUpdate","location","id","sagaCreate","onClose","clearErrors","sagaCloseDialog","handleChangeHistoryLogs","actions","setHistoryLogs","generalTab","label","errorKey","panel","specialtiesTab","extendedPropertiesTab","control","LOAT","historyTab","open","historyLogs","disabled","tabs","loading","edit"],"mappings":"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","sourcesContent":["import { useState, useEffect, useMemo } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { useTranslation } from 'next-i18next'\nimport { useForm } from 'react-hook-form'\n\nimport { Grid } from '@material-ui/core'\nimport { TableExtendedProperties, DialogMain, AppTabHistoryLog, FormControllerTabs, BtnHelp } from '@/components/index'\n\nimport TabGeneral from './TabGeneral'\nimport TabSpecialties from './TabSpecialties'\n\nimport _ from 'lodash'\nimport { yupResolver } from '@hookform/resolvers/yup'\n\nimport getValidationSchema from './validationSchema'\nimport { locationStore } from '@/store/reducers'\nimport { removalProperties } from '@/utils/constant'\n\nimport type { LocationDetail } from '@/types/Location'\nimport type { HistoryLog } from '@/types/Common'\n\nfunction LocationDialog() {\n  const { t } = useTranslation('location')\n\n  const validationSchema = useMemo(() => getValidationSchema(t), [])\n  const locationForm = useForm<LocationDetail>({\n    shouldUnregister: false,\n    resolver: yupResolver(validationSchema)\n  })\n\n  const [tab, setTab] = useState(0)\n\n  const dispatch = useDispatch()\n  const dialogState = useSelector(locationStore.selectDialogState)\n  const locationDetail = useSelector(locationStore.selectDetail)\n  const { parameters, wiki_page } = useSelector(locationStore.selectInitDataForCE)\n  const permissions = useSelector(locationStore.selectPermissions)\n\n  const titleDialog = dialogState.editMode ? t('form.title.update_location') : t('form.title.create_location')\n\n  useEffect(() => {\n    locationForm.reset(locationDetail)\n    setTab(0)\n  }, [locationDetail])\n\n  const onChangeTab = (_, newValue: number) => {\n    setTab(newValue)\n  }\n\n  const onHandleSubmit = locationForm.handleSubmit((data) => {\n    const payload = _.omit(data, [...removalProperties, 'use_in_job']) as LocationDetail\n    if (dialogState.editMode) {\n      dispatch(locationStore.sagaUpdate({ location: payload, id: data.id }))\n    } else {\n      dispatch(locationStore.sagaCreate(payload))\n    }\n  })\n\n  const onClose = () => {\n    locationForm.clearErrors()\n    dispatch(locationStore.sagaCloseDialog())\n  }\n\n  const handleChangeHistoryLogs = (data: HistoryLog[]) => {\n    dispatch(locationStore.actions.setHistoryLogs(data))\n  }\n\n  const generalTab = {\n    label: t('common:tab.general'),\n    errorKey: [\n      'location_id',\n      'language',\n      'location_type',\n      'name',\n      'office_email',\n      'office_zip',\n      'comment',\n      'office_email',\n      'office_zip',\n      'workshop_email'\n    ],\n    panel: <TabGeneral />\n  }\n\n  const specialtiesTab = {\n    label: t('form.tab.specialties'),\n    panel: <TabSpecialties />\n  }\n\n  const extendedPropertiesTab = {\n    label: t('common:tab.extended_properties'),\n    panel: (\n      <Grid container>\n        <Grid item xs={12}>\n          <TableExtendedProperties\n            control={locationForm.control}\n            name=\"additional_attributes\"\n            tableHeight={505}\n            propertiesList={parameters.LOAT}\n            editMode={dialogState.editMode}\n            parameterName=\"LOAT\"\n          />\n        </Grid>\n      </Grid>\n    )\n  }\n\n  const historyTab = {\n    label: t('common:tab.history'),\n    panel: (\n      <AppTabHistoryLog\n        isOpenDialog={dialogState.open}\n        data={dialogState.historyLogs}\n        onChange={handleChangeHistoryLogs}\n        entityId={locationDetail.id}\n        entity=\"location\"\n      />\n    ),\n    disabled: !dialogState.editMode\n  }\n\n  const tabs = [generalTab, specialtiesTab, extendedPropertiesTab, historyTab]\n\n  return (\n    <DialogMain\n      open={dialogState.open}\n      title={<BtnHelp title={titleDialog} href={wiki_page} />}\n      loading={dialogState.loading}\n      onOk={onHandleSubmit}\n      onClose={onClose}\n      height={dialogState.editMode ? 627 : 580}\n      okButtonProps={{\n        disabled: dialogState.loading || (!permissions?.edit && dialogState.editMode)\n      }}\n      okText={dialogState.editMode ? t('common:button.update') : t('common:button.create')}\n    >\n      <FormControllerTabs value={tab} onChange={onChangeTab} form={locationForm} tabs={tabs} />\n    </DialogMain>\n  )\n}\n\nexport default LocationDialog\n"]},"metadata":{},"sourceType":"module"}