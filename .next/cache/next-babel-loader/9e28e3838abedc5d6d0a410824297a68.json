{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createSlice, createAction, createSelector } from '@reduxjs/toolkit';\nimport _ from 'lodash';\nimport { actionTypes } from '@/utils/constant';\nimport createExtraActions from '@/utils/createExtraActions';\nexport const name = 'parameter_type';\nexport const resetState = createAction(`${name}/${actionTypes.RESET_STATE}`);\nexport const initialState = {\n  dataList: [],\n  detail: {\n    type_id: '',\n    category: 1,\n    is_multilingual: false,\n    description: '',\n    attributes: '',\n    nbr_default: 0\n  },\n  dialogState: {\n    open: false,\n    editMode: false,\n    loading: false,\n    historyLogs: []\n  },\n  initDataForList: {\n    permissions: {\n      application_parameter_type: null,\n      developer_parameter_type: null,\n      simple_parameter_type: null\n    },\n    wiki_page: '',\n    column_tooltips: {}\n  },\n  initDataForCE: {\n    categories: [],\n    wiki_page: ''\n  }\n};\nconst parameterTypeSlice = createSlice({\n  name,\n  initialState,\n  reducers: {\n    setDataList(state, {\n      payload\n    }) {\n      state.dataList = payload;\n    },\n\n    setDetail(state, {\n      payload\n    }) {\n      state.detail = _objectSpread(_objectSpread({}, state.detail), payload);\n    },\n\n    setDialogState(state, {\n      payload\n    }) {\n      state.dialogState = _objectSpread(_objectSpread({}, state.dialogState), payload);\n    },\n\n    setHistoryLogs(state, {\n      payload\n    }) {\n      state.dialogState.historyLogs = payload;\n    },\n\n    setDialogStateOpen(state, {\n      payload\n    }) {\n      state.dialogState.open = payload;\n    },\n\n    setDialogStateEditMode(state, {\n      payload\n    }) {\n      state.dialogState.editMode = payload;\n    },\n\n    setDialogStateLoading(state, {\n      payload\n    }) {\n      state.dialogState.loading = payload;\n    },\n\n    setInitDataForList(state, {\n      payload\n    }) {\n      state.initDataForList = payload;\n    },\n\n    setInitDataForCE(state, {\n      payload\n    }) {\n      state.initDataForCE = payload;\n    },\n\n    setPermissions(state, {\n      payload\n    }) {\n      state.initDataForList.permissions = payload;\n    },\n\n    resetDetail(state) {\n      state.detail = _objectSpread({}, initialState.detail);\n    }\n\n  },\n  extraReducers: {\n    [resetState.type]() {\n      return initialState;\n    }\n\n  }\n});\nexport const {\n  actions\n} = parameterTypeSlice;\nexport const extraActions = createExtraActions(name, {\n  getList: actionTypes.GET_LIST,\n  create: actionTypes.CREATE,\n  update: actionTypes.UPDATE,\n  openUpdateDialog: actionTypes.OPEN_UPDATE_DIALOG,\n  openCreateDialog: actionTypes.OPEN_CREATE_DIALOG,\n  executeOperation: actionTypes.EXECUTE_OPERATION,\n  closeDialog: actionTypes.CLOSE_DIALOG\n});\n\nconst selectState = state => state[name];\n\nexport const selectDialogState = createSelector(selectState, ({\n  dialogState\n}) => dialogState);\nexport const selectDataList = createSelector(selectState, ({\n  dataList\n}) => dataList);\nexport const selectDetail = createSelector(selectState, ({\n  detail\n}) => detail);\nexport const selectInitDataForList = createSelector(selectState, ({\n  initDataForList\n}) => initDataForList);\nexport const selectInitDataForCE = createSelector(selectState, ({\n  initDataForCE\n}) => initDataForCE);\nexport const selectPermissions = createSelector(selectState, ({\n  initDataForList\n}) => {\n  const {\n    permissions\n  } = initDataForList;\n\n  if (_.isNull(permissions.application_parameter_type)) {\n    return null;\n  }\n\n  const getPermissionBaseOnName = name => permissions.application_parameter_type[name] || permissions.developer_parameter_type[name] || permissions.simple_parameter_type[name];\n\n  return {\n    view: getPermissionBaseOnName('view'),\n    create: getPermissionBaseOnName('create'),\n    disable_enable: getPermissionBaseOnName('disable_enable'),\n    delete: getPermissionBaseOnName('delete')\n  };\n});\nexport const selectEditPermission = createSelector(selectState, ({\n  initDataForList,\n  detail\n}) => {\n  const {\n    permissions\n  } = initDataForList;\n  const {\n    category\n  } = detail;\n\n  if (_.isNull(permissions.application_parameter_type)) {\n    return false;\n  }\n\n  return category === 1 && permissions.simple_parameter_type.edit || category === 2 && permissions.application_parameter_type.edit || category === 3 && permissions.developer_parameter_type.edit;\n});\nexport default parameterTypeSlice;","map":{"version":3,"sources":["D:/TTS_Reactjs/malis-3-frontend/src/store/reducers/parameterType.reducer.ts"],"names":["createSlice","createAction","createSelector","_","actionTypes","createExtraActions","name","resetState","RESET_STATE","initialState","dataList","detail","type_id","category","is_multilingual","description","attributes","nbr_default","dialogState","open","editMode","loading","historyLogs","initDataForList","permissions","application_parameter_type","developer_parameter_type","simple_parameter_type","wiki_page","column_tooltips","initDataForCE","categories","parameterTypeSlice","reducers","setDataList","state","payload","setDetail","setDialogState","setHistoryLogs","setDialogStateOpen","setDialogStateEditMode","setDialogStateLoading","setInitDataForList","setInitDataForCE","setPermissions","resetDetail","extraReducers","type","actions","extraActions","getList","GET_LIST","create","CREATE","update","UPDATE","openUpdateDialog","OPEN_UPDATE_DIALOG","openCreateDialog","OPEN_CREATE_DIALOG","executeOperation","EXECUTE_OPERATION","closeDialog","CLOSE_DIALOG","selectState","selectDialogState","selectDataList","selectDetail","selectInitDataForList","selectInitDataForCE","selectPermissions","isNull","getPermissionBaseOnName","view","disable_enable","delete","selectEditPermission","edit"],"mappings":"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","sourcesContent":["import { createSlice, createAction, PayloadAction, createSelector } from '@reduxjs/toolkit'\nimport _ from 'lodash'\n\nimport { actionTypes } from '@/utils/constant'\nimport createExtraActions from '@/utils/createExtraActions'\n\nimport type { Entity, HistoryLog } from '@/types/Common'\nimport type { RootReducerType } from './rootReducer'\nimport type {\n  ParameterTypeItem,\n  ParameterTypeInstace,\n  ParameterTypeInitDataForList,\n  ParameterTypeInitDataForCE,\n  ParameterTypePermissions,\n  ParameterTypePermission\n} from '@/types/ParameterType'\n\nexport const name: Entity = 'parameter_type'\nexport const resetState = createAction(`${name}/${actionTypes.RESET_STATE}`)\nexport const initialState = {\n  dataList: [],\n  detail: {\n    type_id: '',\n    category: 1,\n    is_multilingual: false,\n    description: '',\n    attributes: '',\n    nbr_default: 0\n  } as ParameterTypeInstace,\n  dialogState: {\n    open: false,\n    editMode: false,\n    loading: false,\n    historyLogs: [] as HistoryLog[]\n  },\n  initDataForList: {\n    permissions: {\n      application_parameter_type: null,\n      developer_parameter_type: null,\n      simple_parameter_type: null\n    },\n    wiki_page: '',\n    column_tooltips: {}\n  } as ParameterTypeInitDataForList,\n  initDataForCE: {\n    categories: [],\n    wiki_page: ''\n  } as ParameterTypeInitDataForCE\n}\n\nconst parameterTypeSlice = createSlice({\n  name,\n  initialState,\n  reducers: {\n    setDataList(state, { payload }: PayloadAction<ParameterTypeItem[]>) {\n      state.dataList = payload\n    },\n    setDetail(state, { payload }: PayloadAction<Partial<ParameterTypeInstace>>) {\n      state.detail = {\n        ...state.detail,\n        ...payload\n      }\n    },\n    setDialogState(state, { payload }: PayloadAction<Partial<typeof initialState.dialogState>>) {\n      state.dialogState = {\n        ...state.dialogState,\n        ...payload\n      }\n    },\n    setHistoryLogs(state, { payload }: PayloadAction<HistoryLog[]>) {\n      state.dialogState.historyLogs = payload\n    },\n    setDialogStateOpen(state, { payload }: PayloadAction<boolean>) {\n      state.dialogState.open = payload\n    },\n    setDialogStateEditMode(state, { payload }: PayloadAction<boolean>) {\n      state.dialogState.editMode = payload\n    },\n    setDialogStateLoading(state, { payload }: PayloadAction<boolean>) {\n      state.dialogState.loading = payload\n    },\n    setInitDataForList(state, { payload }: PayloadAction<ParameterTypeInitDataForList>) {\n      state.initDataForList = payload\n    },\n    setInitDataForCE(state, { payload }: PayloadAction<ParameterTypeInitDataForCE>) {\n      state.initDataForCE = payload\n    },\n    setPermissions(state, { payload }: PayloadAction<ParameterTypePermissions>) {\n      state.initDataForList.permissions = payload\n    },\n    resetDetail(state) {\n      state.detail = { ...initialState.detail }\n    }\n  },\n  extraReducers: {\n    [resetState.type]() {\n      return initialState\n    }\n  }\n})\n\nexport const { actions } = parameterTypeSlice\n\nexport const extraActions = createExtraActions(name, {\n  getList: actionTypes.GET_LIST,\n  create: actionTypes.CREATE,\n  update: actionTypes.UPDATE,\n  openUpdateDialog: actionTypes.OPEN_UPDATE_DIALOG,\n  openCreateDialog: actionTypes.OPEN_CREATE_DIALOG,\n  executeOperation: actionTypes.EXECUTE_OPERATION,\n  closeDialog: actionTypes.CLOSE_DIALOG\n})\n\nconst selectState = (state: RootReducerType) => state[name]\nexport const selectDialogState = createSelector(selectState, ({ dialogState }) => dialogState)\nexport const selectDataList = createSelector(selectState, ({ dataList }) => dataList)\nexport const selectDetail = createSelector(selectState, ({ detail }) => detail)\nexport const selectInitDataForList = createSelector(selectState, ({ initDataForList }) => initDataForList)\nexport const selectInitDataForCE = createSelector(selectState, ({ initDataForCE }) => initDataForCE)\n\nexport const selectPermissions = createSelector(selectState, ({ initDataForList }) => {\n  const { permissions } = initDataForList\n  if (_.isNull(permissions.application_parameter_type)) {\n    return null\n  }\n  const getPermissionBaseOnName = (name: keyof ParameterTypePermission) =>\n    permissions.application_parameter_type[name] ||\n    permissions.developer_parameter_type[name] ||\n    permissions.simple_parameter_type[name]\n  return {\n    view: getPermissionBaseOnName('view'),\n    create: getPermissionBaseOnName('create'),\n    disable_enable: getPermissionBaseOnName('disable_enable'),\n    delete: getPermissionBaseOnName('delete')\n  }\n})\n\nexport const selectEditPermission = createSelector(selectState, ({ initDataForList, detail }) => {\n  const { permissions } = initDataForList\n  const { category } = detail\n  if (_.isNull(permissions.application_parameter_type)) {\n    return false\n  }\n  return (\n    (category === 1 && permissions.simple_parameter_type.edit) ||\n    (category === 2 && permissions.application_parameter_type.edit) ||\n    (category === 3 && permissions.developer_parameter_type.edit)\n  )\n})\nexport default parameterTypeSlice\n"]},"metadata":{},"sourceType":"module"}