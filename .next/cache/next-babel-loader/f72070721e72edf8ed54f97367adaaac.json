{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as yup from 'yup';\nimport _ from 'lodash';\nvar importFileType = ['text/plain', 'application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'];\n\nfunction getValidationSchema(t) {\n  var schema = yup.object().shape({\n    importFile: yup.mixed().test('required_file', t('form.message_validation.import_file_required'), function (value) {\n      return !_.isNil(value);\n    }).test('file_type', t('form.message_validation.import_file_check_type'), /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", importFileType.includes((value === null || value === void 0 ? void 0 : value.type) || ''));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()).test('file_size', t('form.message_validation.import_file_check_size'), function (value) {\n      var fileSize = (value === null || value === void 0 ? void 0 : value.size) / 1024 / 1024 || 0;\n      return fileSize <= 1;\n    }),\n    mode: yup.number().transform(function (value) {\n      return parseInt(value);\n    })\n  });\n  return schema;\n}\n\nexport default getValidationSchema;","map":{"version":3,"sources":["D:/TTS_Reactjs/malis-3-frontend/src/components/Dialog/Module/Budget/Import/validationSchema.ts"],"names":["yup","_","importFileType","getValidationSchema","t","schema","object","shape","importFile","mixed","test","value","isNil","includes","type","fileSize","size","mode","number","transform","parseInt"],"mappings":";;AAAA,OAAO,KAAKA,GAAZ,MAAqB,KAArB;AACA,OAAOC,CAAP,MAAc,QAAd;AAIA,IAAMC,cAAc,GAAG,CACrB,YADqB,EAErB,0BAFqB,EAGrB,mEAHqB,CAAvB;;AAMA,SAASC,mBAAT,CAA6BC,CAA7B,EAA2C;AACzC,MAAMC,MAAM,GAAGL,GAAG,CAACM,MAAJ,GAAaC,KAAb,CAAmB;AAChCC,IAAAA,UAAU,EAAER,GAAG,CACZS,KADS,GAETC,IAFS,CAEJ,eAFI,EAEaN,CAAC,CAAC,8CAAD,CAFd,EAEgE,UAACO,KAAD,EAAW;AACnF,aAAO,CAACV,CAAC,CAACW,KAAF,CAAQD,KAAR,CAAR;AACD,KAJS,EAKTD,IALS,CAKJ,WALI,EAKSN,CAAC,CAAC,gDAAD,CALV;AAAA,0EAK8D,iBAAOO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA,iDAC/DT,cAAc,CAACW,QAAf,CAAwB,CAAAF,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEG,IAAP,KAAe,EAAvC,CAD+D;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAL9D;;AAAA;AAAA;AAAA;AAAA,SAQTJ,IARS,CAQJ,WARI,EAQSN,CAAC,CAAC,gDAAD,CARV,EAQ8D,UAACO,KAAD,EAAW;AACjF,UAAMI,QAAQ,GAAG,CAAAJ,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEK,IAAP,IAAc,IAAd,GAAqB,IAArB,IAA6B,CAA9C;AACA,aAAOD,QAAQ,IAAI,CAAnB;AACD,KAXS,CADoB;AAahCE,IAAAA,IAAI,EAAEjB,GAAG,CAACkB,MAAJ,GAAaC,SAAb,CAAuB,UAACR,KAAD;AAAA,aAAWS,QAAQ,CAACT,KAAD,CAAnB;AAAA,KAAvB;AAb0B,GAAnB,CAAf;AAeA,SAAON,MAAP;AACD;;AAED,eAAeF,mBAAf","sourcesContent":["import * as yup from 'yup'\nimport _ from 'lodash'\n\nimport type { TFunction } from 'next-i18next'\n\nconst importFileType = [\n  'text/plain',\n  'application/vnd.ms-excel',\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n]\n\nfunction getValidationSchema(t: TFunction) {\n  const schema = yup.object().shape({\n    importFile: yup\n      .mixed()\n      .test('required_file', t('form.message_validation.import_file_required'), (value) => {\n        return !_.isNil(value)\n      })\n      .test('file_type', t('form.message_validation.import_file_check_type'), async (value) => {\n        return importFileType.includes(value?.type || '')\n      })\n      .test('file_size', t('form.message_validation.import_file_check_size'), (value) => {\n        const fileSize = value?.size / 1024 / 1024 || 0\n        return fileSize <= 1\n      }),\n    mode: yup.number().transform((value) => parseInt(value))\n  })\n  return schema\n}\n\nexport default getValidationSchema\n"]},"metadata":{},"sourceType":"module"}