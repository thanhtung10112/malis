{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Fersher\\\\TTS_Reactjs\\\\malis-3-frontend\\\\src\\\\components\\\\App\\\\SearchBar\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport useStyles from './styles';\nimport { Paper, IconButton, InputBase, Tooltip } from '@material-ui/core';\nimport { When } from 'react-if';\nimport { useConfirm, SearchIcon, FilterIcon } from '@/components';\nimport clsx from 'clsx';\nimport { commonStore, advancedFilterActions } from '@/store/reducers';\n\nvar AppSearchBar = function AppSearchBar(props) {\n  _s();\n\n  var placeholder = props.placeholder,\n      width = props.width,\n      onSearch = props.onSearch,\n      filterable = props.filterable,\n      disabled = props.disabled;\n\n  var _useConfirm = useConfirm(),\n      confirm = _useConfirm.confirm;\n\n  var _useState = useState(''),\n      searchQuery = _useState[0],\n      setSearchQuery = _useState[1];\n\n  var dispatch = useDispatch();\n  var isOpenAF = useSelector(advancedFilterActions.selectOpenAdvanceSearch);\n  var classes = useStyles();\n\n  var handleInputQuery = function handleInputQuery(event) {\n    setSearchQuery(event.target.value);\n  };\n\n  var handleSubmitSearch = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n\n              if (!(searchQuery.length < 3)) {\n                _context.next = 8;\n                break;\n              }\n\n              _context.next = 4;\n              return confirm({\n                description: 'Searching with less than 3 digits will be slow, do you want to continue?'\n              });\n\n            case 4:\n              result = _context.sent;\n\n              if (result === 'OK') {\n                onSearch(event, searchQuery);\n              }\n\n              _context.next = 9;\n              break;\n\n            case 8:\n              onSearch(event, searchQuery);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmitSearch(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var onOpenAdvancedFilter = function onOpenAdvancedFilter() {\n    if (disabled) {\n      return;\n    }\n\n    if (isOpenAF) {\n      dispatch(advancedFilterActions.resetState());\n      dispatch(commonStore.actions.setTableState({\n        page: 1\n      }));\n      dispatch(advancedFilterActions.close());\n    } else {\n      dispatch(advancedFilterActions.open());\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.searchBar__container,\n    \"data-testid\": \"app-searchbar\",\n    children: [/*#__PURE__*/_jsxDEV(When, {\n      condition: filterable,\n      children: /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: isOpenAF ? 'Close Advanced Filter' : 'Open Advanced Filter',\n        \"aria-label\": \"Advanced_Filter\",\n        children: /*#__PURE__*/_jsxDEV(FilterIcon, {\n          onClick: onOpenAdvancedFilter,\n          className: clsx(classes.searchBar__filterIcon, _defineProperty({}, classes.searchBar__disabled, disabled))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Paper, {\n      component: \"form\",\n      elevation: 0,\n      className: classes.searchBar__form,\n      style: {\n        width: width\n      },\n      onSubmit: handleSubmitSearch,\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        type: \"submit\",\n        className: classes.searchBar__searchIcon,\n        \"aria-label\": \"search\",\n        disabled: disabled,\n        children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(InputBase, {\n        disabled: disabled,\n        className: classes.searchBar__input,\n        placeholder: placeholder,\n        value: searchQuery,\n        onChange: handleInputQuery\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(AppSearchBar, \"BhDJwSOcfDOkb8P22n9tvKLAXqY=\", false, function () {\n  return [useConfirm, useDispatch, useSelector, useStyles];\n});\n\n_c = AppSearchBar;\nAppSearchBar.defaultProps = {\n  filterable: true,\n  width: 300,\n  placeholder: 'Search...',\n  disabled: false\n};\nexport default AppSearchBar;\n\nvar _c;\n\n$RefreshReg$(_c, \"AppSearchBar\");","map":{"version":3,"sources":["D:/Fersher/TTS_Reactjs/malis-3-frontend/src/components/App/SearchBar/index.tsx"],"names":["useState","useDispatch","useSelector","useStyles","Paper","IconButton","InputBase","Tooltip","When","useConfirm","SearchIcon","FilterIcon","clsx","commonStore","advancedFilterActions","AppSearchBar","props","placeholder","width","onSearch","filterable","disabled","confirm","searchQuery","setSearchQuery","dispatch","isOpenAF","selectOpenAdvanceSearch","classes","handleInputQuery","event","target","value","handleSubmitSearch","preventDefault","length","description","result","onOpenAdvancedFilter","resetState","actions","setTableState","page","close","open","searchBar__container","searchBar__filterIcon","searchBar__disabled","searchBar__form","searchBar__searchIcon","searchBar__input","defaultProps"],"mappings":"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","sourcesContent":["import { useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport useStyles from './styles'\n\nimport { Paper, IconButton, InputBase, Tooltip } from '@material-ui/core'\nimport { When } from 'react-if'\n\nimport { useConfirm, SearchIcon, FilterIcon } from '@/components'\n\nimport clsx from 'clsx'\nimport { commonStore, advancedFilterActions } from '@/store/reducers'\n\nexport type AppSearchBarProps = {\n  placeholder?: string\n  width?: number\n  onSearch(event, query): void\n  filterable?: boolean\n  disabled?: boolean\n}\n\nconst AppSearchBar: React.FC<AppSearchBarProps> = (props) => {\n  const { placeholder, width, onSearch, filterable, disabled } = props\n\n  const { confirm } = useConfirm()\n\n  const [searchQuery, setSearchQuery] = useState('')\n\n  const dispatch = useDispatch()\n  const isOpenAF = useSelector(advancedFilterActions.selectOpenAdvanceSearch)\n\n  const classes = useStyles()\n\n  const handleInputQuery = (event) => {\n    setSearchQuery(event.target.value)\n  }\n\n  const handleSubmitSearch = async (event) => {\n    event.preventDefault()\n    if (searchQuery.length < 3) {\n      const result = await confirm({\n        description: 'Searching with less than 3 digits will be slow, do you want to continue?'\n      })\n      if (result === 'OK') {\n        onSearch(event, searchQuery)\n      }\n    } else {\n      onSearch(event, searchQuery)\n    }\n  }\n\n  const onOpenAdvancedFilter = () => {\n    if (disabled) {\n      return\n    }\n    if (isOpenAF) {\n      dispatch(advancedFilterActions.resetState())\n      dispatch(commonStore.actions.setTableState({ page: 1 }))\n      dispatch(advancedFilterActions.close())\n    } else {\n      dispatch(advancedFilterActions.open())\n    }\n  }\n\n  return (\n    <div className={classes.searchBar__container} data-testid=\"app-searchbar\">\n      <When condition={filterable}>\n        <Tooltip title={isOpenAF ? 'Close Advanced Filter' : 'Open Advanced Filter'} aria-label=\"Advanced_Filter\">\n          <FilterIcon\n            onClick={onOpenAdvancedFilter}\n            className={clsx(classes.searchBar__filterIcon, {\n              [classes.searchBar__disabled]: disabled\n            })}\n          />\n        </Tooltip>\n      </When>\n      <Paper\n        component=\"form\"\n        elevation={0}\n        className={classes.searchBar__form}\n        style={{ width }}\n        onSubmit={handleSubmitSearch}\n      >\n        <IconButton type=\"submit\" className={classes.searchBar__searchIcon} aria-label=\"search\" disabled={disabled}>\n          <SearchIcon />\n        </IconButton>\n        <InputBase\n          disabled={disabled}\n          className={classes.searchBar__input}\n          placeholder={placeholder}\n          value={searchQuery}\n          onChange={handleInputQuery}\n        />\n      </Paper>\n    </div>\n  )\n}\n\nAppSearchBar.defaultProps = {\n  filterable: true,\n  width: 300,\n  placeholder: 'Search...',\n  disabled: false\n}\n\nexport default AppSearchBar\n"]},"metadata":{},"sourceType":"module"}