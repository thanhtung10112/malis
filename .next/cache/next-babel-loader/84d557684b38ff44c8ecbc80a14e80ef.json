{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(fetchList),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(fetchInitDataForList),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(fetchInitDataForCE),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(fetchDetail),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(getManufacturerList),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(openManuCreateDialog),\n    _marked7 = /*#__PURE__*/_regeneratorRuntime.mark(openManuUpdateDialog),\n    _marked8 = /*#__PURE__*/_regeneratorRuntime.mark(createManu),\n    _marked9 = /*#__PURE__*/_regeneratorRuntime.mark(updateManu),\n    _marked10 = /*#__PURE__*/_regeneratorRuntime.mark(generateManuId),\n    _marked11 = /*#__PURE__*/_regeneratorRuntime.mark(closeManuDialog),\n    _marked12 = /*#__PURE__*/_regeneratorRuntime.mark(manufacturerSaga);\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { takeEvery, put, putResolve, call } from 'redux-saga/effects';\nimport { select, all } from 'typed-redux-saga';\nimport { manufacturerStore, commonStore, advancedFilterActions } from '@/store/reducers';\nimport manufacturerApi from '@/apis/manufacturer.api';\nexport function fetchList() {\n  var _yield$all, tableState, searchQuery, filterData, page, per_page, data;\n\n  return _regeneratorRuntime.wrap(function fetchList$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return all({\n            tableState: select(commonStore.selectTableState),\n            searchQuery: select(commonStore.selectSearchQuery),\n            filterData: select(advancedFilterActions.selectFilterData)\n          });\n\n        case 2:\n          _yield$all = _context.sent;\n          tableState = _yield$all.tableState;\n          searchQuery = _yield$all.searchQuery;\n          filterData = _yield$all.filterData;\n          page = tableState.page, per_page = tableState.per_page;\n          _context.next = 9;\n          return call(manufacturerApi.getList, _objectSpread({\n            per_page: per_page,\n            page: page,\n            s: searchQuery\n          }, filterData));\n\n        case 9:\n          data = _context.sent;\n          _context.next = 12;\n          return put(commonStore.actions.setTableState({\n            total_items: data.total_items\n          }));\n\n        case 12:\n          _context.next = 14;\n          return put(manufacturerStore.actions.setDataList(data.manufacturers));\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\nexport function fetchInitDataForList() {\n  var data;\n  return _regeneratorRuntime.wrap(function fetchInitDataForList$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return call(manufacturerApi.getInitDataForList);\n\n        case 2:\n          data = _context2.sent;\n          _context2.next = 5;\n          return put(manufacturerStore.actions.setInitDataForList(data));\n\n        case 5:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\nexport function fetchInitDataForCE() {\n  var _yield$call, permissions, response;\n\n  return _regeneratorRuntime.wrap(function fetchInitDataForCE$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return call(manufacturerApi.getInitDataForCE);\n\n        case 2:\n          _yield$call = _context3.sent;\n          permissions = _yield$call.permissions;\n          response = _objectWithoutProperties(_yield$call, [\"permissions\"]);\n          _context3.next = 7;\n          return all([put(manufacturerStore.actions.setPermissions(permissions)), put(manufacturerStore.actions.setInitDataForCE(response)), put(manufacturerStore.actions.setDetail({\n            manufacturer_id: response.next_code\n          }))]);\n\n        case 7:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\nexport function fetchDetail(id) {\n  var _yield$call2, manufacturer;\n\n  return _regeneratorRuntime.wrap(function fetchDetail$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return call(manufacturerApi.getDetail, id);\n\n        case 2:\n          _yield$call2 = _context4.sent;\n          manufacturer = _yield$call2.manufacturer;\n          _context4.next = 6;\n          return put(manufacturerStore.actions.setDetail(manufacturer));\n\n        case 6:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\nexport function getManufacturerList() {\n  var permissions;\n  return _regeneratorRuntime.wrap(function getManufacturerList$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context5.prev = 2;\n          _context5.next = 5;\n          return call(fetchInitDataForList);\n\n        case 5:\n          return _context5.delegateYield(select(manufacturerStore.selectPermissions), \"t0\", 6);\n\n        case 6:\n          permissions = _context5.t0;\n\n          if (!(permissions === null || permissions === void 0 ? void 0 : permissions.view)) {\n            _context5.next = 10;\n            break;\n          }\n\n          _context5.next = 10;\n          return call(fetchList);\n\n        case 10:\n          _context5.next = 16;\n          break;\n\n        case 12:\n          _context5.prev = 12;\n          _context5.t1 = _context5[\"catch\"](2);\n          _context5.next = 16;\n          return put(commonStore.actions.setError(_context5.t1));\n\n        case 16:\n          _context5.next = 18;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 18:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, null, [[2, 12]]);\n}\nexport function openManuCreateDialog() {\n  return _regeneratorRuntime.wrap(function openManuCreateDialog$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 2:\n          _context6.prev = 2;\n          _context6.next = 5;\n          return call(fetchInitDataForCE);\n\n        case 5:\n          _context6.next = 7;\n          return put(manufacturerStore.actions.setDialogStateOpen(true));\n\n        case 7:\n          _context6.next = 13;\n          break;\n\n        case 9:\n          _context6.prev = 9;\n          _context6.t0 = _context6[\"catch\"](2);\n          _context6.next = 13;\n          return put(commonStore.actions.setError(_context6.t0));\n\n        case 13:\n          _context6.next = 15;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 15:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6, null, [[2, 9]]);\n}\nexport function openManuUpdateDialog(_ref) {\n  var id;\n  return _regeneratorRuntime.wrap(function openManuUpdateDialog$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          id = _ref.payload;\n          _context7.next = 3;\n          return put(commonStore.actions.setLoadingPage(true));\n\n        case 3:\n          _context7.prev = 3;\n          _context7.next = 6;\n          return call(fetchInitDataForCE);\n\n        case 6:\n          _context7.next = 8;\n          return call(fetchDetail, id);\n\n        case 8:\n          _context7.next = 10;\n          return put(manufacturerStore.actions.setDialogStateOpen(true));\n\n        case 10:\n          _context7.next = 16;\n          break;\n\n        case 12:\n          _context7.prev = 12;\n          _context7.t0 = _context7[\"catch\"](3);\n          _context7.next = 16;\n          return put(commonStore.actions.setError(_context7.t0));\n\n        case 16:\n          _context7.next = 18;\n          return put(commonStore.actions.setLoadingPage(false));\n\n        case 18:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7, null, [[3, 12]]);\n}\nexport function createManu(_ref2) {\n  var payload, _yield$call3, message;\n\n  return _regeneratorRuntime.wrap(function createManu$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          payload = _ref2.payload;\n          _context8.next = 3;\n          return put(manufacturerStore.actions.setDialogStateLoading(true));\n\n        case 3:\n          _context8.prev = 3;\n          _context8.next = 6;\n          return call(manufacturerApi.create, payload);\n\n        case 6:\n          _yield$call3 = _context8.sent;\n          message = _yield$call3.message;\n          _context8.next = 10;\n          return call(fetchInitDataForCE);\n\n        case 10:\n          _context8.next = 12;\n          return put(commonStore.actions.setSuccessMessage(message));\n\n        case 12:\n          _context8.next = 14;\n          return put(manufacturerStore.actions.resetDetail());\n\n        case 14:\n          _context8.next = 20;\n          break;\n\n        case 16:\n          _context8.prev = 16;\n          _context8.t0 = _context8[\"catch\"](3);\n          _context8.next = 20;\n          return put(commonStore.actions.setError(_context8.t0));\n\n        case 20:\n          _context8.next = 22;\n          return put(manufacturerStore.actions.setDialogStateLoading(false));\n\n        case 22:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8, null, [[3, 16]]);\n}\nexport function updateManu(_ref3) {\n  var payload, id, formData, _yield$call4, message;\n\n  return _regeneratorRuntime.wrap(function updateManu$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          payload = _ref3.payload;\n          _context9.next = 3;\n          return put(manufacturerStore.actions.setDialogStateLoading(true));\n\n        case 3:\n          _context9.prev = 3;\n          id = payload.id, formData = payload.formData;\n          _context9.next = 7;\n          return call(manufacturerApi.update, id, formData);\n\n        case 7:\n          _yield$call4 = _context9.sent;\n          message = _yield$call4.message;\n          _context9.next = 11;\n          return call(closeManuDialog);\n\n        case 11:\n          _context9.next = 13;\n          return put(commonStore.actions.setSuccessMessage(message));\n\n        case 13:\n          _context9.next = 19;\n          break;\n\n        case 15:\n          _context9.prev = 15;\n          _context9.t0 = _context9[\"catch\"](3);\n          _context9.next = 19;\n          return put(commonStore.actions.setError(_context9.t0));\n\n        case 19:\n          _context9.next = 21;\n          return put(manufacturerStore.actions.setDialogStateLoading(false));\n\n        case 21:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, _marked9, null, [[3, 15]]);\n}\nexport function generateManuId(_ref4) {\n  var formData, data;\n  return _regeneratorRuntime.wrap(function generateManuId$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          formData = _ref4.payload;\n          _context10.next = 3;\n          return put(manufacturerStore.actions.setDialogStateLoading(true));\n\n        case 3:\n          _context10.prev = 3;\n          _context10.next = 6;\n          return call(manufacturerApi.getNextCode, formData.manufacturer_id);\n\n        case 6:\n          data = _context10.sent;\n          _context10.next = 9;\n          return put(manufacturerStore.actions.setDetail(_objectSpread(_objectSpread({}, formData), {}, {\n            manufacturer_id: data.generated_code\n          })));\n\n        case 9:\n          _context10.next = 11;\n          return put(commonStore.actions.setSuccessMessage(data.message));\n\n        case 11:\n          _context10.next = 17;\n          break;\n\n        case 13:\n          _context10.prev = 13;\n          _context10.t0 = _context10[\"catch\"](3);\n          _context10.next = 17;\n          return put(commonStore.actions.setError(_context10.t0));\n\n        case 17:\n          _context10.next = 19;\n          return put(manufacturerStore.actions.setDialogStateLoading(false));\n\n        case 19:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, _marked10, null, [[3, 13]]);\n}\nexport function closeManuDialog() {\n  return _regeneratorRuntime.wrap(function closeManuDialog$(_context11) {\n    while (1) {\n      switch (_context11.prev = _context11.next) {\n        case 0:\n          _context11.next = 2;\n          return putResolve(manufacturerStore.actions.setDialogStateOpen(false));\n\n        case 2:\n          _context11.next = 4;\n          return call(getManufacturerList);\n\n        case 4:\n          _context11.next = 6;\n          return put(manufacturerStore.actions.resetDetail());\n\n        case 6:\n        case \"end\":\n          return _context11.stop();\n      }\n    }\n  }, _marked11);\n}\n\nfunction manufacturerSaga() {\n  return _regeneratorRuntime.wrap(function manufacturerSaga$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          _context12.next = 2;\n          return takeEvery(manufacturerStore.sagaGetList, getManufacturerList);\n\n        case 2:\n          _context12.next = 4;\n          return takeEvery(manufacturerStore.sagaOpenCreateDialog, openManuCreateDialog);\n\n        case 4:\n          _context12.next = 6;\n          return takeEvery(manufacturerStore.sagaOpenUpdateDialog, openManuUpdateDialog);\n\n        case 6:\n          _context12.next = 8;\n          return takeEvery(manufacturerStore.sagaCreate, createManu);\n\n        case 8:\n          _context12.next = 10;\n          return takeEvery(manufacturerStore.sagaUpdate, updateManu);\n\n        case 10:\n          _context12.next = 12;\n          return takeEvery(manufacturerStore.sagaGenerateCode, generateManuId);\n\n        case 12:\n          _context12.next = 14;\n          return takeEvery(manufacturerStore.sagaCloseDialog, closeManuDialog);\n\n        case 14:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  }, _marked12);\n}\n\nexport default manufacturerSaga;","map":{"version":3,"sources":["D:/Fersher/TTS_Reactjs/malis-3-frontend/src/store/saga/manufacturer.saga.ts"],"names":["fetchList","fetchInitDataForList","fetchInitDataForCE","fetchDetail","getManufacturerList","openManuCreateDialog","openManuUpdateDialog","createManu","updateManu","generateManuId","closeManuDialog","manufacturerSaga","takeEvery","put","putResolve","call","select","all","manufacturerStore","commonStore","advancedFilterActions","manufacturerApi","tableState","selectTableState","searchQuery","selectSearchQuery","filterData","selectFilterData","page","per_page","getList","s","data","actions","setTableState","total_items","setDataList","manufacturers","getInitDataForList","setInitDataForList","getInitDataForCE","permissions","response","setPermissions","setInitDataForCE","setDetail","manufacturer_id","next_code","id","getDetail","manufacturer","setLoadingPage","selectPermissions","view","setError","setDialogStateOpen","payload","setDialogStateLoading","create","message","setSuccessMessage","resetDetail","formData","update","getNextCode","generated_code","sagaGetList","sagaOpenCreateDialog","sagaOpenUpdateDialog","sagaCreate","sagaUpdate","sagaGenerateCode","sagaCloseDialog"],"mappings":"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","sourcesContent":["import { takeEvery, put, putResolve, call } from 'redux-saga/effects'\nimport { select, all } from 'typed-redux-saga'\n\nimport { manufacturerStore, commonStore, advancedFilterActions } from '@/store/reducers'\n\nimport manufacturerApi from '@/apis/manufacturer.api'\n\nexport function* fetchList() {\n  const { tableState, searchQuery, filterData } = yield all({\n    tableState: select(commonStore.selectTableState),\n    searchQuery: select(commonStore.selectSearchQuery),\n    filterData: select(advancedFilterActions.selectFilterData)\n  })\n  const { page, per_page } = tableState\n  const data = yield call(manufacturerApi.getList, {\n    per_page,\n    page,\n    s: searchQuery,\n    ...filterData\n  })\n  yield put(commonStore.actions.setTableState({ total_items: data.total_items }))\n  yield put(manufacturerStore.actions.setDataList(data.manufacturers))\n}\n\nexport function* fetchInitDataForList() {\n  const data = yield call(manufacturerApi.getInitDataForList)\n  yield put(manufacturerStore.actions.setInitDataForList(data))\n}\n\nexport function* fetchInitDataForCE() {\n  const { permissions, ...response } = yield call(manufacturerApi.getInitDataForCE)\n  yield all([\n    put(manufacturerStore.actions.setPermissions(permissions)),\n    put(manufacturerStore.actions.setInitDataForCE(response)),\n    put(\n      manufacturerStore.actions.setDetail({\n        manufacturer_id: response.next_code\n      })\n    )\n  ])\n}\n\nexport function* fetchDetail(id: number) {\n  const { manufacturer } = yield call(manufacturerApi.getDetail, id)\n  yield put(manufacturerStore.actions.setDetail(manufacturer))\n}\n\nexport function* getManufacturerList() {\n  yield put(commonStore.actions.setLoadingPage(true))\n  try {\n    yield call(fetchInitDataForList)\n    const permissions = yield* select(manufacturerStore.selectPermissions)\n    if (permissions?.view) {\n      yield call(fetchList)\n    }\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nexport function* openManuCreateDialog() {\n  yield put(commonStore.actions.setLoadingPage(true))\n\n  try {\n    yield call(fetchInitDataForCE)\n    yield put(manufacturerStore.actions.setDialogStateOpen(true))\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nexport function* openManuUpdateDialog({ payload: id }: ReturnType<typeof manufacturerStore.sagaOpenUpdateDialog>) {\n  yield put(commonStore.actions.setLoadingPage(true))\n\n  try {\n    yield call(fetchInitDataForCE)\n    yield call(fetchDetail, id)\n    yield put(manufacturerStore.actions.setDialogStateOpen(true))\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n\n  yield put(commonStore.actions.setLoadingPage(false))\n}\n\nexport function* createManu({ payload }: ReturnType<typeof manufacturerStore.sagaCreate>) {\n  yield put(manufacturerStore.actions.setDialogStateLoading(true))\n  try {\n    const { message } = yield call(manufacturerApi.create, payload)\n    yield call(fetchInitDataForCE)\n    yield put(commonStore.actions.setSuccessMessage(message))\n    yield put(manufacturerStore.actions.resetDetail())\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n  yield put(manufacturerStore.actions.setDialogStateLoading(false))\n}\n\nexport function* updateManu({ payload }: ReturnType<typeof manufacturerStore.sagaUpdate>) {\n  yield put(manufacturerStore.actions.setDialogStateLoading(true))\n  try {\n    const { id, formData } = payload\n    const { message } = yield call(manufacturerApi.update, id, formData)\n    yield call(closeManuDialog)\n    yield put(commonStore.actions.setSuccessMessage(message))\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n  yield put(manufacturerStore.actions.setDialogStateLoading(false))\n}\n\nexport function* generateManuId({ payload: formData }: ReturnType<typeof manufacturerStore.sagaGenerateCode>) {\n  yield put(manufacturerStore.actions.setDialogStateLoading(true))\n  try {\n    const data = yield call(manufacturerApi.getNextCode, formData.manufacturer_id)\n    yield put(\n      manufacturerStore.actions.setDetail({\n        ...formData,\n        manufacturer_id: data.generated_code\n      })\n    )\n    yield put(commonStore.actions.setSuccessMessage(data.message))\n  } catch (error) {\n    yield put(commonStore.actions.setError(error))\n  }\n  yield put(manufacturerStore.actions.setDialogStateLoading(false))\n}\n\nexport function* closeManuDialog() {\n  yield putResolve(manufacturerStore.actions.setDialogStateOpen(false))\n  yield call(getManufacturerList)\n  yield put(manufacturerStore.actions.resetDetail())\n}\n\nfunction* manufacturerSaga() {\n  yield takeEvery(manufacturerStore.sagaGetList, getManufacturerList)\n  yield takeEvery(manufacturerStore.sagaOpenCreateDialog, openManuCreateDialog)\n  yield takeEvery(manufacturerStore.sagaOpenUpdateDialog, openManuUpdateDialog)\n  yield takeEvery(manufacturerStore.sagaCreate, createManu)\n  yield takeEvery(manufacturerStore.sagaUpdate, updateManu)\n  yield takeEvery(manufacturerStore.sagaGenerateCode, generateManuId)\n  yield takeEvery(manufacturerStore.sagaCloseDialog, closeManuDialog)\n}\n\nexport default manufacturerSaga\n"]},"metadata":{},"sourceType":"module"}