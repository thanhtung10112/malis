{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Fersher\\\\TTS_Reactjs\\\\malis-3-frontend\\\\src\\\\components\\\\Dialog\\\\Module\\\\Drawing\\\\DialogRevision.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { Grid } from '@material-ui/core';\nimport { DialogMain, FormControllerTextField } from '@/components';\nimport { useEffect, useMemo } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useForm } from 'react-hook-form';\nimport { useTranslation } from 'next-i18next';\nimport * as yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { drawingStore } from '@/store/reducers';\n\nvar DialogRevision = function DialogRevision() {\n  _s();\n\n  var _useTranslation = useTranslation('drawing'),\n      t = _useTranslation.t;\n\n  var validationSchema = useMemo(function () {\n    return yup.object({\n      new_revision: yup.string().required(t('validation_message.new_revision_required')).matches(/^[A-Z0-9]{1,8}$/, t('validation_message.new_revision_matches')),\n      description: yup.string().required(t('validation_message.description_required'))\n    });\n  }, []);\n  var revisionForm = useForm({\n    shouldUnregister: false,\n    resolver: yupResolver(validationSchema)\n  });\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(drawingStore.selectRevisionDialog),\n      open = _useSelector.open,\n      loading = _useSelector.loading,\n      revisionDetail = _useSelector.detail;\n\n  var drawingDetail = useSelector(drawingStore.selectDetail);\n  useEffect(function () {\n    if (!open) {\n      dispatch(drawingStore.actions.resetRevisionDialogDetail());\n    }\n  }, [open]);\n  useEffect(function () {\n    revisionForm.reset(revisionDetail);\n  }, [revisionDetail]);\n  var handleSaveRevision = revisionForm.handleSubmit(function (formData) {\n    dispatch(drawingStore.sagaSaveNewRev({\n      revision: formData,\n      drawingId: drawingDetail.id\n    }));\n  });\n\n  var handleClose = function handleClose() {\n    dispatch(drawingStore.actions.setRevisionDialogOpen(false));\n  };\n\n  return /*#__PURE__*/_jsxDEV(DialogMain, {\n    open: open,\n    loading: loading,\n    fullWidth: true,\n    title: t('form.title.save_as_revision'),\n    maxWidth: \"sm\",\n    okText: t('common:button.save'),\n    onOk: handleSaveRevision,\n    onClose: handleClose,\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 2,\n      style: {\n        marginTop: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(FormControllerTextField, {\n          name: \"new_revision\",\n          label: \"New revision\",\n          required: true,\n          control: revisionForm.control\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(FormControllerTextField, {\n          name: \"reason\",\n          label: \"Reason of Change(internal)\",\n          control: revisionForm.control,\n          multiline: true,\n          rows: 10\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(FormControllerTextField, {\n          name: \"description\",\n          label: \"Description(external)\",\n          required: true,\n          control: revisionForm.control\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(DialogRevision, \"+EBGYih3FOQ9cYMwXUn6ilcdQe0=\", false, function () {\n  return [useTranslation, useForm, useDispatch, useSelector, useSelector];\n});\n\n_c = DialogRevision;\nexport default DialogRevision;\n\nvar _c;\n\n$RefreshReg$(_c, \"DialogRevision\");","map":{"version":3,"sources":["D:/Fersher/TTS_Reactjs/malis-3-frontend/src/components/Dialog/Module/Drawing/DialogRevision.tsx"],"names":["Grid","DialogMain","FormControllerTextField","useEffect","useMemo","useSelector","useDispatch","useForm","useTranslation","yup","yupResolver","drawingStore","DialogRevision","t","validationSchema","object","new_revision","string","required","matches","description","revisionForm","shouldUnregister","resolver","dispatch","selectRevisionDialog","open","loading","revisionDetail","detail","drawingDetail","selectDetail","actions","resetRevisionDialogDetail","reset","handleSaveRevision","handleSubmit","formData","sagaSaveNewRev","revision","drawingId","id","handleClose","setRevisionDialogOpen","marginTop","control"],"mappings":"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","sourcesContent":["import { Grid } from '@material-ui/core'\nimport { DialogMain, FormControllerTextField } from '@/components'\n\nimport { useEffect, useMemo } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { useForm } from 'react-hook-form'\nimport { useTranslation } from 'next-i18next'\n\nimport * as yup from 'yup'\nimport { yupResolver } from '@hookform/resolvers/yup'\nimport { drawingStore } from '@/store/reducers'\n\nimport type { RevisionDetail } from '@/types/Drawing'\n\nconst DialogRevision: React.FC = () => {\n  const { t } = useTranslation('drawing')\n\n  const validationSchema = useMemo(\n    () =>\n      yup.object({\n        new_revision: yup\n          .string()\n          .required(t('validation_message.new_revision_required'))\n          .matches(/^[A-Z0-9]{1,8}$/, t('validation_message.new_revision_matches')),\n        description: yup.string().required(t('validation_message.description_required'))\n      }),\n    []\n  )\n\n  const revisionForm = useForm<RevisionDetail>({\n    shouldUnregister: false,\n    resolver: yupResolver(validationSchema)\n  })\n\n  const dispatch = useDispatch()\n  const { open, loading, detail: revisionDetail } = useSelector(drawingStore.selectRevisionDialog)\n  const drawingDetail = useSelector(drawingStore.selectDetail)\n\n  useEffect(() => {\n    if (!open) {\n      dispatch(drawingStore.actions.resetRevisionDialogDetail())\n    }\n  }, [open])\n\n  useEffect(() => {\n    revisionForm.reset(revisionDetail)\n  }, [revisionDetail])\n\n  const handleSaveRevision = revisionForm.handleSubmit((formData) => {\n    dispatch(\n      drawingStore.sagaSaveNewRev({\n        revision: formData,\n        drawingId: drawingDetail.id\n      })\n    )\n  })\n\n  const handleClose = () => {\n    dispatch(drawingStore.actions.setRevisionDialogOpen(false))\n  }\n\n  return (\n    <DialogMain\n      open={open}\n      loading={loading}\n      fullWidth\n      title={t('form.title.save_as_revision')}\n      maxWidth=\"sm\"\n      okText={t('common:button.save')}\n      onOk={handleSaveRevision}\n      onClose={handleClose}\n    >\n      <Grid container spacing={2} style={{ marginTop: 4 }}>\n        <Grid item xs={12}>\n          <FormControllerTextField name=\"new_revision\" label=\"New revision\" required control={revisionForm.control} />\n        </Grid>\n        <Grid item xs={12}>\n          <FormControllerTextField\n            name=\"reason\"\n            label=\"Reason of Change(internal)\"\n            control={revisionForm.control}\n            multiline\n            rows={10}\n          />\n        </Grid>\n\n        <Grid item xs={12}>\n          <FormControllerTextField\n            name=\"description\"\n            label=\"Description(external)\"\n            required\n            control={revisionForm.control}\n          />\n        </Grid>\n      </Grid>\n    </DialogMain>\n  )\n}\n\nexport default DialogRevision\n"]},"metadata":{},"sourceType":"module"}